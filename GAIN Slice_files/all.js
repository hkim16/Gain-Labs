(function(a,b){function G(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(O,"$1-$2").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:K.isNaN(d)?N.test(d)?K.parseJSON(d):d:parseFloat(d)}catch(f){}K.data(a,c,d)}else d=b}return d}function F(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function E(a,c,d){var e=c+"defer",f=c+"queue",g=c+"mark",h=K.data(a,e,b,!0);h&&(d==="queue"||!K.data(a,f,b,!0))&&(d==="mark"||!K.data(a,g,b,!0))&&setTimeout(function(){!K.data(a,f,b,!0)&&!K.data(a,g,b,!0)&&(K.removeData(a,e,!0),h.resolve())},0)}function D(){return!1}function C(){return!0}function B(a,c,d){var e=K.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,K.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function A(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=[],p=[],q=K._data(this,"events");if(!(a.liveFired===this||!q||!q.live||a.target.disabled||a.button&&a.type==="click")){a.namespace&&(m=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var r=q.live.slice(0);for(h=0;h<r.length;h++)f=r[h],f.origType.replace(Y,"")===a.type?p.push(f.selector):r.splice(h--,1);e=K(a.target).closest(p,a.currentTarget);for(i=0,j=e.length;i<j;i++){l=e[i];for(h=0;h<r.length;h++){f=r[h];if(l.selector===f.selector&&(!m||m.test(f.namespace))&&!l.elem.disabled){g=l.elem,d=null;if(f.preType==="mouseenter"||f.preType==="mouseleave")a.type=f.preType,d=K(a.relatedTarget).closest(f.selector)[0],d&&K.contains(g,d)&&(d=g);(!d||d!==g)&&o.push({elem:g,handleObj:f,level:l.level})}}}for(i=0,j=o.length;i<j;i++){e=o[i];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,n=e.handleObj.origHandler.apply(e.elem,arguments);if(n===!1||a.isPropagationStopped()){c=e.level,n===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function z(a,b){return(a&&a!=="*"?a+".":"")+b.replace($,"`").replace(_,"&")}function y(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function x(a,b,c){b=b||0;if(K.isFunction(b))return K.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return K.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=K.grep(a,function(a){return a.nodeType===1});if(bl.test(b))return K.filter(b,d,!c);b=K.filter(b,d)}return K.grep(a,function(a,d){return K.inArray(a,b)>=0===c})}function w(a,b){return K.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function v(a,b){if(b.nodeType===1&&!!K.hasData(a)){var c=K.expando,d=K.data(a),e=K.data(b,d);if(d=d[c]){var f=d.events;e=e[c]=K.extend({},d);if(f){delete e.handle,e.events={};for(var g in f)for(var h=0,i=f[g].length;h<i;h++)K.event.add(b,g+(f[g][h].namespace?".":"")+f[g][h].namespace,f[g][h],f[g][h].data)}}}}function u(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(K.expando)}}function t(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function s(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function r(a){K.nodeName(a,"input")?s(a):"getElementsByTagName"in a&&K.grep(a.getElementsByTagName("input"),s)}function q(a,b){b.src?K.ajax({url:b.src,async:!1,dataType:"script"}):K.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function p(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bH:bI;if(d>0){c!=="border"&&K.each(e,function(){c||(d-=parseFloat(K.css(a,"padding"+this))||0),c==="margin"?d+=parseFloat(K.css(a,c+this))||0:d-=parseFloat(K.css(a,"border"+this+"Width"))||0});return d+"px"}d=bJ(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&&K.each(e,function(){d+=parseFloat(K.css(a,"padding"+this))||0,c!=="padding"&&(d+=parseFloat(K.css(a,"border"+this+"Width"))||0),c==="margin"&&(d+=parseFloat(K.css(a,c+this))||0)});return d+"px"}function o(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(K.isFunction(c)){var d=b.toLowerCase().split(bY),e=0,f=d.length,g,h,i;for(;e<f;e++)g=d[e],i=/^\+/.test(g),i&&(g=g.substr(1)||"*"),h=a[g]=a[g]||[],h[i?"unshift":"push"](c)}}}function n(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===ca,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=n(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=n(a,c,d,e,"*",g));return l}function m(a,c){var d,e,f=K.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&K.extend(!0,a,e)}function l(a,b,c,d){if(K.isArray(b))K.each(b,function(b,e){c||bN.test(a)?d(a,e):l(a+"["+(typeof e=="object"||K.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)l(a+"["+e+"]",b[e],c,d);else d(a,b)}function k(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function j(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},f,g,h=d.length,i,j=d[0],k,l,m,n,o;for(f=1;f<h;f++){if(f===1)for(g in a.converters)typeof g=="string"&&(e[g.toLowerCase()]=a.converters[g]);k=j,j=d[f];if(j==="*")j=k;else if(k!=="*"&&k!==j){l=k+" "+j,m=e[l]||e["* "+j];if(!m){o=b;for(n in e){i=n.split(" ");if(i[0]===k||i[0]==="*"){o=e[i[1]+" "+j];if(o){n=e[n],n===!0?m=o:o===!0&&(m=n);break}}}}!m&&!o&&K.error("No conversion from "+l.replace(" "," to ")),m!==!0&&(c=m?m(c):o(n(c)))}}return c}function i(){try{return new a.XMLHttpRequest}catch(b){}}function h(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function g(){setTimeout(f,0);return cs=K.now()}function f(){cs=b}function e(a,b){var c={};K.each(cr.concat.apply([],cr.slice(0,b)),function(){c[this]=a});return c}function d(a){if(!cl[a]){var b=H.body,c=K("<"+a+">").appendTo(b),d=c.css("display");c.remove();if(d==="none"||d===""){cm||(cm=H.createElement("iframe"),cm.frameBorder=cm.width=cm.height=0),b.appendChild(cm);if(!cn||!cm.createElement)cn=(cm.contentWindow||cm.contentDocument).document,cn.write((H.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cn.close();c=cn.createElement(a),cn.body.appendChild(c),d=K.css(c,"display"),b.removeChild(cm)}cl[a]=d}return cl[a]}function c(a){return K.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var H=a.document,I=a.navigator,J=a.location,K=function(){function c(){if(!d.isReady){try{H.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,i=/\S/,j=/^\s+/,k=/\s+$/,l=/\d/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=I.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,J=Array.prototype.indexOf,K={};d.fn=d.prototype={constructor:d,init:function(a,c,e){var f,g,i,j;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!c&&H.body){this.context=H,this[0]=H.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?f=h.exec(a):f=[null,a,null];if(f&&(f[1]||!c)){if(f[1]){c=c instanceof d?c[0]:c,j=c?c.ownerDocument||c:H,i=m.exec(a),i?d.isPlainObject(c)?(a=[H.createElement(i[1])],d.fn.attr.call(a,c,!0)):a=[j.createElement(i[1])]:(i=d.buildFragment([f[1]],[j]),a=(i.cacheable?d.clone(i.fragment):i.fragment).childNodes);return d.merge(this,a)}g=H.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return e.find(a);this.length=1,this[0]=g}this.context=H,this.selector=a;return this}return!c||c.jquery?(c||e).find(a):this.constructor(c).find(a)}if(d.isFunction(a))return e.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.6.3",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();d.isArray(a)?E.apply(e,a):d.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")");return e},each:function(a,b){return d.each(this,a,b)},ready:function(a){d.bindReady(),A.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},d.fn.init.prototype=d.fn,d.extend=d.fn.extend=function(){var a,c,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!d.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){e=i[c],f=a[c];if(i===f)continue;l&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},i[c]=d.extend(l,h,f)):f!==b&&(i[c]=f)}return i},d.extend({noConflict:function(b){a.$===d&&(a.$=f),b&&a.jQuery===d&&(a.jQuery=e);return d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(a===!0&&!--d.readyWait||a!==!0&&!d.isReady){if(!H.body)return setTimeout(d.ready,1);d.isReady=!0;if(a!==!0&&--d.readyWait>0)return;A.resolveWith(H,[d]),d.fn.trigger&&d(H).trigger("ready").unbind("ready")}},bindReady:function(){if(!A){A=d._Deferred();if(H.readyState==="complete")return setTimeout(d.ready,1);if(H.addEventListener)H.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",d.ready,!1);else if(H.attachEvent){H.attachEvent("onreadystatechange",B),a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}H.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!l.test(a)||isNaN(a)},type:function(a){return a==null?String(a):K[C.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var e;for(e in a);return e===b||D.call(a,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(c){var e,f;try{a.DOMParser?(f=new DOMParser,e=f.parseFromString(c,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(c))}catch(g){e=b}(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+c);return e},noop:function(){},globalEval:function(b){b&&i.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,i=h===b||d.isFunction(a);if(e){if(i){for(f in a)if(c.apply(a[f],e)===!1)break}else for(;g<h;)if(c.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?E.call(c,a):d.merge(c,a)}return c},inArray:function(a,b){if(!b)return-1;if(J)return J.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,e){var f,g,h=[],i=0,j=a.length,k=a instanceof d||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||d.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,e),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,e),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var e=a[c];c=a,a=e}if(!d.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||d.guid++;return g},access:function(a,c,e,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)d.access(a,j,c[j],f,g,e);return a}if(e!==b){f=!h&&f&&d.isFunction(e);for(var k=0;k<i;k++)g(a[k],c,f?e.call(a[k],k,g(a[k],c)):e,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,e){e&&e instanceof d&&!(e instanceof a)&&(e=a(e));return d.fn.init.call(this,c,e,b)},a.fn.init.prototype=a.fn;var b=a(H);return a},browser:{}}),d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){K["[object "+b+"]"]=b.toLowerCase()}),z=d.uaMatch(y),z.browser&&(d.browser[z.browser]=!0,d.browser.version=z.version),d.browser.webkit&&(d.browser.safari=!0),i.test(" ")&&(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),g=d(H),H.addEventListener?B=function(){H.removeEventListener("DOMContentLoaded",B,!1),d.ready()}:H.attachEvent&&(B=function(){H.readyState==="complete"&&(H.detachEvent("onreadystatechange",B),d.ready())});return d}(),L="done fail isResolved isRejected promise then always pipe".split(" "),M=[].slice;K.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,f,g,h,i,j;b&&(j=b,b=0);for(f=0,g=c.length;f<g;f++)h=c[f],i=K.type(h),i==="array"?e.done.apply(e,h):i==="function"&&a.push(h);j&&e.resolveWith(j[0],j[1])}return this},resolveWith:function(e,f){if(!d&&!b&&!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1,a=[];return this}};return e},Deferred:function(a){var b=K._Deferred(),c=K._Deferred(),d;K.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return K.Deferred(function(d){K.each({done:[a,"resolve"],fail:[c,"reject"]},function(a,c){var e=c[0],f=c[1],g;K.isFunction(e)?b[a](function(){g=e.apply(this,arguments),g&&K.isFunction(g.promise)?g.promise().then(d.resolve,d.reject):d[f+"With"](this===b?d:this,[g])}):b[a](d[f])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=L.length;while(c--)a[L[c]]=b[L[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b);return b},when:function(a){function b(a){return function(b){c[a]=arguments.length>1?M.call(arguments,0):b,--f||g.resolveWith(g,M.call(c,0))}}var c=arguments,d=0,e=c.length,f=e,g=e<=1&&a&&K.isFunction(a.promise)?a:K.Deferred();if(e>1){for(;d<e;d++)c[d]&&K.isFunction(c[d].promise)?c[d].promise().then(b(d),g.reject):--f;f||g.resolveWith(g,c)}else g!==a&&g.resolveWith(g,e?[a]:[]);return g.promise()}}),K.support=function(){var a=H.createElement("div"),b=H.documentElement,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a.setAttribute("className","t"),a.innerHTML="   <link><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type=checkbox>",c=a.getElementsByTagName("*"),d=a.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=H.createElement("select"),f=e.appendChild(H.createElement("option")),g=a.getElementsByTagName("input")[0],i={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName("tbody").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55$/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:g.value==="on",optSelected:f.selected,getSetAttribute:a.className!=="t",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},g.checked=!0,i.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,i.optDisabled=!f.disabled;try{delete a.test}catch(t){i.deleteExpando=!1}!a.addEventListener&&a.attachEvent&&a.fireEvent&&(a.attachEvent("onclick",function(){i.noCloneEvent=!1}),a.cloneNode(!0).fireEvent("onclick")),g=H.createElement("input"),g.value="t",g.setAttribute("type","radio"),i.radioValue=g.value==="t",g.setAttribute("checked","checked"),a.appendChild(g),j=H.createDocumentFragment(),j.appendChild(a.firstChild),i.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="",a.style.width=a.style.paddingLeft="1px",k=H.getElementsByTagName("body")[0],m=H.createElement(k?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},k&&K.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)m.style[r]=n[r];m.appendChild(a),l=k||b,l.insertBefore(m,l.firstChild),i.appendChecked=g.checked,i.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,i.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",i.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",o=a.getElementsByTagName("td"),s=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",i.reliableHiddenOffsets=s&&o[0].offsetHeight===0,a.innerHTML="",H.defaultView&&H.defaultView.getComputedStyle&&(h=H.createElement("div"),h.style.width="0",h.style.marginRight="0",a.appendChild(h),i.reliableMarginRight=(parseInt((H.defaultView.getComputedStyle(h,null)||{marginRight:0}).marginRight,10)||0)===0),m.innerHTML="",l.removeChild(m);if(a.attachEvent)for(r in{submit:1,change:1,focusin:1})q="on"+r,s=q in a,s||(a.setAttribute(q,"return;"),s=typeof a[q]=="function"),i[r+"Bubbles"]=s;m=j=e=f=k=h=a=g=null;return i}(),K.boxModel=K.support.boxModel;var N=/^(?:\{.*\}|\[.*\])$/,O=/([a-z])([A-Z])/g;K.extend({cache:{},uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?K.cache[a[K.expando]]:a[K.expando];return!!a&&!F(a)},data:function(a,c,d,e){if(!!K.acceptData(a)){var f,g,h=K.expando,i=typeof c=="string",j=a.nodeType,k=j?K.cache:a,l=j?a[K.expando]:a[K.expando]&&K.expando;if((!l||e&&l&&k[l]&&!k[l][h])&&i&&d===b)return;l||(j?a[K.expando]=l=++K.uuid:l=K.expando),k[l]||(k[l]={},j||(k[l].toJSON=K.noop));if(typeof c=="object"||typeof c=="function")e?k[l][h]=K.extend(k[l][h],c):k[l]=K.extend(k[l],c);f=k[l],e&&(f[h]||(f[h]={}),f=f[h]),d!==b&&(f[K.camelCase(c)]=d);if(c==="events"&&!f[c])return f[h]&&f[h].events;i?(g=f[c],g==null&&(g=f[K.camelCase(c)])):g=f;return g}},removeData:function(a,b,c){if(!!K.acceptData(a)){var d,e=K.expando,f=a.nodeType,g=f?K.cache:a,h=f?a[K.expando]:K.expando;if(!g[h])return;if(b){d=c?g[h][e]:g[h];if(d){d[b]||(b=K.camelCase(b)),delete d[b];if(!F(d))return}}if(c){delete g[h][e];if(!F(g[h]))return}var i=g[h][e];K.support.deleteExpando||!g.setInterval?delete g[h]:g[h]=null,i?(g[h]={},f||(g[h].toJSON=K.noop),g[h][e]=i):f&&(K.support.deleteExpando?delete a[K.expando]:a.removeAttribute?a.removeAttribute(K.expando):a[K.expando]=null)}},_data:function(a,b,c){return K.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=K.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),K.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=K.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,f;for(var g=0,h=e.length;g<h;g++)f=e[g].name,f.indexOf("data-")===0&&(f=K.camelCase(f.substring(5)),G(this[0],f,d[f]))}}return d}if(typeof a=="object")return this.each(function(){K.data(this,a)});var i=a.split(".");i[1]=i[1]?"."+i[1]:"";if(c===b){d=this.triggerHandler("getData"+i[1]+"!",[i[0]]),d===b&&this.length&&(d=K.data(this[0],a),d=G(this[0],a,d));return d===b&&i[1]?this.data(i[0]):d}return this.each(function(){var b=K(this),d=[i[0],c];b.triggerHandler("setData"+i[1]+"!",d),K.data(this,a,c),b.triggerHandler("changeData"+i[1]+"!",d)})},removeData:function(a){return this.each(function(){K.removeData(this,a)})}}),K.extend({_mark:function(a,c){a&&(c=(c||"fx")+"mark",K.data(a,c,(K.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&&(d=c,c=a,a=!1);if(c){d=d||"fx";var e=d+"mark",f=a?0:(K.data(c,e,b,!0)||1)-1;f?K.data(c,e,f,!0):(K.removeData(c,e,!0),E(c,d,"mark"))}},queue:function(a,c,d){if(a){c=(c||"fx")+"queue";var e=K.data(a,c,b,!0);d&&(!e||K.isArray(d)?e=K.data(a,c,K.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){b=b||"fx";var c=K.queue(a,b),d=c.shift(),e;d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){K.dequeue(a,b)})),c.length||(K.removeData(a,b+"queue",!0),E(a,b,"queue"))}}),K.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return K.queue(this[0],a);return this.each(function(){var b=K.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&K.dequeue(this,a)})},dequeue:function(a){return this.each(function(){K.dequeue(this,a)})},delay:function(a,b){a=K.fx?K.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){K.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--h||e.resolveWith(f,[f])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var e=K.Deferred(),f=this,g=f.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=K.data(f[g],i,b,!0)||(K.data(f[g],j,b,!0)||K.data(f[g],k,b,!0))&&K.data(f[g],i,K._Deferred(),!0))h++,l.done(d);d();return e.promise()}});var P=/[\n\t\r]/g,Q=/\s+/,R=/\r/g,S=/^(?:button|input)$/i,T=/^(?:button|input|object|select|textarea)$/i,U=/^a(?:rea)?$/i,V=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,W,X;K.fn.extend({attr:function(a,b){return K.access(this,a,b,!0,K.attr)},removeAttr:function(a){return this.each(function(){K.removeAttr(this,a)})},prop:function(a,b){return K.access(this,a,b,!0,K.prop)},removeProp:function(a){a=K.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(K.isFunction(a))return this.each(function(b){K(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(Q);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=K.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(K.isFunction(a))return this.each(function(b){K(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(Q);for(d=0,e=this.length;d<e;d++){f=this[d];if(f.nodeType===1&&f.className)if(a){g=(" "+f.className+" ").replace(P," ");for(h=0,i=c.length;h<i;h++)g=g.replace(" "+c[h]+" "," ");f.className=K.trim(g)}else f.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(K.isFunction(a))return this.each(function(c){K(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,f=0,g=K(this),h=b,i=a.split(Q);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&K._data(this,"__className__",this.className),this.className=this.className||a===!1?"":K._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(P," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length){if(e){c=K.valHooks[e.nodeName.toLowerCase()]||K.valHooks[e.type];if(c&&"get"in c&&(d=c.get(e,"value"))!==b)return d;d=e.value;return typeof d=="string"?d.replace(R,""):d==null?"":d}return b}var f=K.isFunction(a);return this.each(function(d){var e=K(this),g;if(this.nodeType===1){f?g=a.call(this,d,e.val()):g=a,g==null?g="":typeof g=="number"?g+="":K.isArray(g)&&(g=K.map(g,function(a){return a==null?"":a+""})),c=K.valHooks[this.nodeName.toLowerCase()]||K.valHooks[this.type];if(!c||!("set"in c)||c.set(this,g,"value")===b)this.value=g}})}}),K.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,f=a.type==="select-one";if(c<0)return null;for(var g=f?c:0,h=f?c+1:e.length;g<h;g++){var i=e[g];if(i.selected&&(K.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!K.nodeName(i.parentNode,"optgroup"))){b=K(i).val();if(f)return b;d.push(b)}}if(f&&!d.length&&e.length)return K(e[c]).val();return d},set:function(a,b){var c=K.makeArray(b);K(a).find("option").each(function(){this.selected=K.inArray(K(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(a,c,d,e){var f=a.nodeType;if(!a||f===3||f===8||f===2)return b;if(e&&c in K.attrFn)return K(a)[c](d);if(!("getAttribute"in a))return K.prop(a,c,d);var g,h,i=f!==1||!K.isXMLDoc(a);i&&(c=K.attrFix[c]||c,h=K.attrHooks[c],h||(V.test(c)?h=X:W&&(h=W)));if(d!==b){if(d===null){K.removeAttr(a,c);return b}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g},removeAttr:function(a,b){var c;a.nodeType===1&&(b=K.attrFix[b]||b,K.attr(a,b,""),a.removeAttribute(b),V.test(b)&&(c=K.propFix[b]||b)in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(S.test(a.nodeName)&&a.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&b==="radio"&&K.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(W&&K.nodeName(a,"button"))return W.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(W&&K.nodeName(a,"button"))return W.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var f,g,h=e!==1||!K.isXMLDoc(a);h&&(c=K.propFix[c]||c,g=K.propHooks[c]);return d!==b?g&&"set"in g&&(f=g.set(a,d,c))!==b?f:a[c]=d:g&&"get"in g&&(f=g.get(a,c))!==null?f:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):T.test(a.nodeName)||U.test(a.nodeName)&&a.href?0:b}}}}),K.attrHooks.tabIndex=K.propHooks.tabIndex,X={get:function(a,c){var d;return K.prop(a,c)===!0||(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?K.removeAttr(a,c):(d=K.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},K.support.getSetAttribute||(W=K.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=H.createAttribute(c),a.setAttributeNode(d));return d.nodeValue=b+""}},K.each(["width","height"],function(a,b){K.attrHooks[b]=K.extend(K.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})})),K.support.hrefNormalized||K.each(["href","src","width","height"],function(a,c){K.attrHooks[c]=K.extend(K.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),K.support.style||(K.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(a,b){if(K.isArray(b))return a.checked=K.inArray(K(a).val(),b)>=0}})});var Y=/\.(.*)$/,Z=/^(?:textarea|input|select)$/i,$=/\./g,_=/ /g,ba=/[^\w\s.|`]/g,bb=function(a){return a.replace(ba,"\\$&")};K.event={add:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){if(d===!1)d=D;else if(!d)return;var f,g;d.handler&&(f=d,d=f.handler),d.guid||(d.guid=K.guid++);var h=K._data(a);if(!h)return;var i=h.events,j=h.handle;i||(h.events=i={}),j||(h.handle=j=function(a){return typeof K!="undefined"&&(!a||K.event.triggered!==a.type)?K.event.handle.apply(j.elem,arguments):b}),j.elem=a,c=c.split(" ");var k,l=0,m;while(k=c[l++]){g=f?K.extend({},f):{handler:d,data:e},k.indexOf(".")>-1?(m=k.split("."),k=m.shift(),g.namespace=m.slice(0).sort().join(".")):(m=[],g.namespace=""),g.type=k,g.guid||(g.guid=d.guid);var n=i[k],o=K.event.special[k]||{};if(!n){n=i[k]=[];if(!o.setup||o.setup.call(a,e,m,j)===!1)a.addEventListener?a.addEventListener(k,j,!1):a.attachEvent&&a.attachEvent("on"+k,j)}o.add&&(o.add.call(a,g),g.handler.guid||(g.handler.guid=d.guid)),n.push(g),K.event.global[k]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=D);var f,g,h,i,j=0,k,l,m,n,o,p,q,r=K.hasData(a)&&K._data(a),s=r&&r.events;if(!r||!s)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(g in s)K.event.remove(a,g+c);return}c=c.split(" ");while(g=c[j++]){q=g,p=null,k=g.indexOf(".")<0,l=[],k||(l=g.split("."),g=l.shift(),m=new RegExp("(^|\\.)"+K.map(l.slice(0).sort(),bb).join("\\.(?:.*\\.)?")+"(\\.|$)")),o=s[g];if(!o)continue;if(!d){for(i=0;i<o.length;i++){p=o[i];if(k||m.test(p.namespace))K.event.remove(a,q,p.handler,i),o.splice(i--,1)}continue}n=K.event.special[g]||{};for(i=e||0;i<o.length;i++){p=o[i];if(d.guid===p.guid){if(k||m.test(p.namespace))e==null&&o.splice(i--,1),n.remove&&n.remove.call(a,p);if(e!=null)break}}if(o.length===0||e!=null&&o.length===1)(!n.teardown||n.teardown.call(a,l)===!1)&&K.removeEvent(a,g,r.handle),f=null,delete s[g]}if(K.isEmptyObject(s)){var t=r.handle;t&&(t.elem=null),delete r.events,delete r.handle,K.isEmptyObject(r)&&K.removeData(a,b,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){var g=c.type||c,h=[],i;g.indexOf("!")>=0&&(g=g.slice(0,-1),i=!0),g.indexOf(".")>=0&&(h=g.split("."),g=h.shift(),h.sort());if(!!e&&!K.event.customEvent[g]||!!K.event.global[g]){c=typeof c=="object"?c[K.expando]?c:new K.Event(g,c):new K.Event(g),c.type=g,c.exclusive=i,c.namespace=h.join("."),c.namespace_re=new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)");if(f||!e)c.preventDefault(),c.stopPropagation();if(!e){K.each(K.cache,function(){var a=K.expando,b=this[a];b&&b.events&&b.events[g]&&K.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?K.makeArray(d):[],d.unshift(c);var j=e,k=g.indexOf(":")<0?"on"+g:"";do{var l=K._data(j,"handle");c.currentTarget=j,l&&l.apply(j,d),k&&K.acceptData(j)&&j[k]&&j[k].apply(j,d)===!1&&(c.result=!1,c.preventDefault()),j=j.parentNode||j.ownerDocument||j===c.target.ownerDocument&&a}while(j&&!c.isPropagationStopped());if(!c.isDefaultPrevented()){var m,n=K.event.special[g]||{};if((!n._default||n._default.call(e.ownerDocument,c)===!1)&&(g!=="click"||!K.nodeName(e,"a"))&&K.acceptData(e)){try{k&&e[g]&&(m=e[k],m&&(e[k]=null),K.event.triggered=g,e[g]())}catch(o){}m&&(e[k]=m),K.event.triggered=b}}return c.result}},handle:function(c){c=K.event.fix(c||a.event);var d=((K._data(this,"events")||{})[c.type]||[]).slice(0),e=!c.exclusive&&!c.namespace,f=Array.prototype.slice.call(arguments,0);f[0]=c,c.currentTarget=this;for(var g=0,h=d.length;g<h;g++){var i=d[g];if(e||c.namespace_re.test(i.namespace)){c.handler=i.handler,c.data=i.data,c.handleObj=i;var j=i.handler.apply(this,f);j!==b&&(c.result=j,j===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[K.expando])return a;var c=a;a=K.Event(c);for(var d=this.props.length,e;d;)e=this.props[--d],a[e]=c[e];a.target||(a.target=a.srcElement||H),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var f=a.target.ownerDocument||H,g=f.documentElement,h=f.body;a.pageX=a.clientX+(g&&g.scrollLeft||h&&h.scrollLeft||0)-(g&&g.clientLeft||h&&h.clientLeft||0),a.pageY=a.clientY+(g&&g.scrollTop||h&&h.scrollTop||0)-(g&&g.clientTop||h&&h.clientTop||0)}a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);return a},guid:1e8,proxy:K.proxy,special:{ready:{setup:K.bindReady,teardown:K.noop},live:{add:function(a){K.event.add(this,z(a.origType,a.selector),K.extend({},a,{handler:A,guid:a.handler.guid}))},remove:function(a){K.event.remove(this,z(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){K.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},K.removeEvent=H.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},K.Event=function(a,b){if(!this.preventDefault)return new K.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?C:D):this.type=a,b&&K.extend(this,b),this.timeStamp=K.now(),this[K.expando]=!0},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=C;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=C;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=C,this.stopPropagation()},isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D};var bc=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&&(b&&(c=K.contains(this,b)),c||(K.event.handle.apply(this,arguments),a.type=d))},bd=function(a){a.type=a.data,K.event.handle.apply(this,arguments)};K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){K.event.special[a]={setup:function(c){K.event.add(this,b,c&&c.selector?bd:bc,a)},teardown:function(a){K.event.remove(this,b,a&&a.selector?bd:bc)}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(a,b){if(!K.nodeName(this,"form"))K.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=K.nodeName(b,"input")?b.type:"";(c==="submit"||c==="image")&&K(b).closest("form").length&&B("submit",this,arguments)}),K.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=K.nodeName(b,"input")?b.type:"";(c==="text"||c==="password")&&K(b).closest("form").length&&a.keyCode===13&&B("submit",this,arguments)});else return!1},teardown:function(a){K.event.remove(this,".specialSubmit")}});if(!K.support.changeBubbles){var be,bf=function(a){var b=K.nodeName(a,"input")?a.type:"",c=a.value;b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?K.map(a.options,function(a){return a.selected}).join("-"):"":K.nodeName(a,"select")&&(c=a.selectedIndex);return c},bg=function(a){var c=a.target,d,e;if(!!Z.test(c.nodeName)&&!c.readOnly){d=K._data(c,"_change_data"),e=bf(c),(a.type!=="focusout"||c.type!=="radio")&&K._data(c,"_change_data",e);if(d===b||e===d)return;if(d!=null||e)a.type="change",a.liveFired=b,K.event.trigger(a,arguments[1],c)}};K.event.special.change={filters:{focusout:bg,beforedeactivate:bg,click:function(a){var b=a.target,c=K.nodeName(b,"input")?b.type:"";(c==="radio"||c==="checkbox"||K.nodeName(b,"select"))&&bg.call(this,a)},keydown:function(a){var b=a.target,c=K.nodeName(b,"input")?b.type:"";(a.keyCode===13&&!K.nodeName(b,"textarea")||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&bg.call(this,a)},beforeactivate:function(a){var b=a.target;K._data(b,"_change_data",bf(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in be)K.event.add(this,c+".specialChange",be[c]);return Z.test(this.nodeName)},teardown:function(a){K.event.remove(this,".specialChange");return Z.test(this.nodeName)}},be=K.event.special.change.filters,be.focus=be.beforeactivate}K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(a,b){function c(a){var c=K.event.fix(a);c.type=b,c.originalEvent={},K.event.trigger(c,null,c.target),c.isDefaultPrevented()&&a.preventDefault()}var d=0;K.event.special[b]={setup:function(){d++===0&&H.addEventListener(a,c,!0)},teardown:function(){--d===0&&H.removeEventListener(a,c,!0)}}}),K.each(["bind","one"],function(a,c){K.fn[c]=function(a,d,e){var f;if(typeof a=="object"){for(var g in a)this[c](g,d,a[g],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c==="one"?(f=function(a){K(this).unbind(a,f);return e.apply(this,arguments)},f.guid=e.guid||K.guid++):f=e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var h=0,i=this.length;h<i;h++)K.event.add(this[h],a,f,d);return this}}),K.fn.extend({unbind:function(a,b){if(typeof a=="object"&&!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d<e;d++)K.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){K.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return K.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||K.guid++,d=0,e=function(c){var e=(K.data(this,"lastToggle"+a.guid)||0)%d;K.data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var bh={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};K.each(["live","die"],function(a,c){K.fn[c]=function(a,d,e,f){var g,h=0,i,j,k,l=f||this.selector,m=f?this:K(this.context);if(typeof a=="object"&&!a.preventDefault){for(var n in a)m[c](n,d,a[n],l);return this}if(c==="die"&&!a&&f&&f.charAt(0)==="."){m.unbind(f);return this}if(d===!1||K.isFunction(d))e=d||D,d=b;a=(a||"").split(" ");while((g=a[h++])!=null){i=Y.exec(g),j="",i&&(j=i[0],g=g.replace(Y,""));if(g==="hover"){a.push("mouseenter"+j,"mouseleave"+j);continue}k=g,bh[g]?(a.push(bh[g]+j),g=g+j):g=(bh[g]||g)+j;if(c==="live")for(var o=0,p=m.length;o<p;o++)K.event.add(m[o],"live."+z(g,l),{data:d,selector:l,handler:e,origType:g,origHandler:e,preType:k});else m.unbind("live."+z(g,l),e)}return this}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){K.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)},K.attrFn&&(K.attrFn[b]=!0)}),function(){function c(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function a(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){h=!1;return 0});var k=function(a,b,c,e){c=c||[],b=b||H;var g=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var h,i,j,n,o,q,r,s,u=!0,v=k.isXML(b),w=[],x=a;do{d.exec(""),h=d.exec(x);if(h){x=h[3],w.push(h[1]);if(h[2]){n=h[3];break}}}while(h);if(w.length>1&&m.exec(a))if(w.length===2&&l.relative[w[0]])i=t(w[0]+w[1],b);else{i=l.relative[w[0]]?[b]:k(w.shift(),b);while(w.length)a=w.shift(),l.relative[a]&&(a+=w.shift()),i=t(a,i)}else{!e&&w.length>1&&b.nodeType===9&&!v&&l.match.ID.test(w[0])&&!l.match.ID.test(w[w.length-1])&&(o=k.find(w.shift(),b,v),b=o.expr?k.filter(o.expr,o.set)[0]:o.set[0]);if(b){o=e?{expr:w.pop(),set:p(e)}:k.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&b.parentNode?b.parentNode:b,v),i=o.expr?k.filter(o.expr,o.set):o.set,w.length>0?j=p(i):u=!1;while(w.length)q=w.pop(),r=q,l.relative[q]?r=w.pop():q="",r==null&&(r=b),l.relative[q](j,r,v)}else j=w=[]}j||(j=i),j||k.error(q||a);if(f.call(j)==="[object Array]")if(!u)c.push.apply(c,j);else if(b&&b.nodeType===1)for(s=0;j[s]!=null;s++)j[s]&&(j[s]===!0||j[s].nodeType===1&&k.contains(b,j[s]))&&c.push(i[s]);else for(s=0;j[s]!=null;s++)j[s]&&j[s].nodeType===1&&c.push(i[s]);else p(j,c);n&&(k(n,g,c,e),k.uniqueSort(c));return c};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(b,d,f){var g,h=e++,i=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("parentNode",d,h,b,g,f)},"~":function(b,d,f){var g,h=e++,i=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("previousSibling",d,h,b,g,f)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not")if((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=k(a[3],null,null,b);else{var g=k.filter(a[3],b,c,!0^f);c||e.push.apply(e,g);return!1}else if(l.match.POS.test(a[0])||l.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(H.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(f.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;H.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){if(a===b){g=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=H.createElement("div"),c="script"+(new Date).getTime(),d=H.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),H.getElementById(c)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=H.createElement("div");a.appendChild(H.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),H.querySelectorAll&&function(){var a=k,b=H.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,d,e,f){d=d||H;if(!f&&!k.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1])return p(d.getElementsByTagName(b),e);if(g[2]&&l.find.CLASS&&d.getElementsByClassName)return p(d.getElementsByClassName(g[2]),e)}if(d.nodeType===9){if(b==="body"&&d.body)return p([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return p([],e);if(h.id===g[3])return p([h],e)}try{return p(d.querySelectorAll(b),e)}catch(i){}}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j=d,m=d.getAttribute("id"),n=m||c,o=d.parentNode,q=/^\s*[+~]/.test(b);m?n=n.replace(/'/g,"\\$&"):d.setAttribute("id",n),q&&o&&(d=d.parentNode);try{if(!q||o)return p(d.querySelectorAll("[id='"+n+"'] "+b),e)}catch(r){}finally{m||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)k[d]=a[d];b=null}}(),function(){var a=H.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(H.createElement("div"),"div"),d=!1;try{b.call(H.documentElement,"[test!='']:sizzle")}catch(e){d=!0}k.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(d||!l.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return k(e,null,null,[a]).length>0}}}(),function(){var a=H.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),H.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:H.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var t=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};K.find=k,K.expr=k.selectors,K.expr[":"]=K.expr.filters,K.unique=k.uniqueSort,K.text=k.getText,K.isXMLDoc=k.isXML,K.contains=k.contains}();var bi=/Until$/,bj=/^(?:parents|prevUntil|prevAll)/,bk=/,/,bl=/^.[^:#\[\.,]*$/,bm=Array.prototype.slice,bn=K.expr.match.POS,bo={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return K(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(K.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;for(c=0,d=this.length;c<d;c++){f=e.length,K.find(a,this[c],e);if(c>0)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}}return e},has:function(a){var b=K(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(K.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(x(this,a,!1),"not",a)},filter:function(a){return this.pushStack(x(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?K.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,f=this[0];if(K.isArray(a)){var g,h,i={},j=1;if(f&&a.length){for(d=0,e=a.length;d<e;d++)h=a[d],i[h]||(i[h]=bn.test(h)?K(h,b||this.context):h);while(f&&f.ownerDocument&&f!==b){for(h in i)g=i[h],(g.jquery?g.index(f)>-1:K(f).is(g))&&c.push({selector:h,elem:f,level:j});f=f.parentNode,j++}}return c}var k=bn.test(a)||typeof a!="string"?K(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){f=this[d];while(f){if(k?k.index(f)>-1:K.find.matchesSelector(f,a)){c.push(f);break}f=f.parentNode;if(!f||!f.ownerDocument||f===b||f.nodeType===11)break}}c=c.length>1?K.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return K.inArray(this[0],K(a));return K.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?K(a,b):K.makeArray(a&&a.nodeType?[a]:a),d=K.merge(this.get(),c);return this.pushStack(y(c[0])||y(d[0])?d:K.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),K.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return K.dir(a,"parentNode")},parentsUntil:function(a,b,c){return K.dir(a,"parentNode",c)},next:function(a){return K.nth(a,2,"nextSibling")},prev:function(a){return K.nth(a,2,"previousSibling")},nextAll:function(a){return K.dir(a,"nextSibling")},prevAll:function(a){return K.dir(a,"previousSibling")},nextUntil:function(a,b,c){return K.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return K.dir(a,"previousSibling",c)},siblings:function(a){return K.sibling(a.parentNode.firstChild,a)},children:function(a){return K.sibling(a.firstChild)},contents:function(a){return K.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:K.makeArray(a.childNodes)}},function(a,b){K.fn[a]=function(c,d){var e=K.map(this,b,c),f=bm.call(arguments);bi.test(a)||(d=c),d&&typeof d=="string"&&(e=K.filter(d,e)),e=this.length>1&&!bo[a]?K.unique(e):e,(this.length>1||bk.test(d))&&bj.test(a)&&(e=e.reverse());return this.pushStack(e,a,f.join(","))}}),K.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?K.find.matchesSelector(b[0],a)?[b[0]]:[]:K.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!K(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bp=/ jQuery\d+="(?:\d+|null)"/g,bq=/^\s+/,br=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bs=/<([\w:]+)/,bt=/<tbody/i,bu=/<|&#?\w+;/,bv=/<(?:script|object|embed|option|style)/i,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)/,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,K.support.htmlSerialize||(bz._default=[1,"div<div>","</div>"]),K.fn.extend({text:function(a){if(K.isFunction(a))return this.each(function(b){var c=K(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(a));return K.text(this)},wrapAll:function(a){if(K.isFunction(a))return this.each(function(b){K(this).wrapAll(a.call(this,b))});if(this[0]){var b=K(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(K.isFunction(a))return this.each(function(b){K(this).wrapInner(a.call(this,b))});return this.each(function(){var b=K(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){K(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=K(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,K(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||K.filter(a,[d]).length)!b&&d.nodeType===1&&(K.cleanData(d.getElementsByTagName("*")),K.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&K.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return K.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(bp,""):null;if(typeof a=="string"&&!bv.test(a)&&(K.support.leadingWhitespace||!bq.test(a))&&!bz[(bs.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(br,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(K.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else K.isFunction(a)?this.each(function(b){var c=K(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(K.isFunction(a))return this.each(function(b){var c=K(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=K(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;K(this).remove(),b?K(b).before(a):K(c).append(a)})}return this.length?this.pushStack(K(K.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!K.support.checkClone&&arguments.length===3&&typeof i=="string"&&bw.test(i))return this.each(function(){K(this).domManip(a,c,d,!0)});if(K.isFunction(i))return this.each(function(e){var f=K(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){h=i&&i.parentNode,K.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?e={fragment:h}:e=K.buildFragment(a,this,j),g=e.fragment,g.childNodes.length===1?f=g=g.firstChild:f=g.firstChild;if(f){c=c&&K.nodeName(f,"tr");for(var k=0,l=this.length,m=l-1;k<l;k++)d.call(c?w(this[k],f):this[k],e.cacheable||l>1&&k<m?K.clone(g,!0,!0):g)}j.length&&K.each(j,q)}return this}}),K.buildFragment=function(a,b,c){var d,e,f,g;b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=H),a.length===1&&typeof a[0]=="string"&&a[0].length<512&&g===H&&a[0].charAt(0)==="<"&&!bv.test(a[0])&&(K.support.checkClone||!bw.test(a[0]))&&(e=!0,f=K.fragments[a[0]],f&&f!==1&&(d=f)),d||(d=g.createDocumentFragment(),K.clean(a,g,d,c)),e&&(K.fragments[a[0]]=f?d:1);return{fragment:d,cacheable:e}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){K.fn[a]=function(c){var d=[],e=K(c),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var g=0,h=e.length;g<h;g++){var i=(g>0?this.clone(!0):this).get();K(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),K.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,f,g;if((!K.support.noCloneEvent||!K.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!K.isXMLDoc(a)){u(a,d),e=t(a),f=t(d);for(g=0;e[g];++g)f[g]&&u(e[g],f[g])}if(b){v(a,d);if(c){e=t(a),f=t(d);for(g=0;e[g];++g)v(e[g],f[g])}}e=f=null;return d},clean:function(a,b,c,d){var e;b=b||H,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||H);var f=[],g;for(var h=0,i;(i=a[h])!=null;h++){typeof i=="number"&&(i+="");if(!i)continue;if(typeof i=="string")if(!bu.test(i))i=b.createTextNode(i);else{i=i.replace(br,"<$1></$2>");var j=(bs.exec(i)||["",""])[1].toLowerCase(),k=bz[j]||bz._default,l=k[0],m=b.createElement("div");m.innerHTML=k[1]+i+k[2];while(l--)m=m.lastChild;if(!K.support.tbody){var n=bt.test(i),o=j==="table"&&!n?m.firstChild&&m.firstChild.childNodes:k[1]==="<table>"&&!n?m.childNodes:[];for(g=o.length-1;g>=0;--g)K.nodeName(o[g],"tbody")&&!o[g].childNodes.length&&o[g].parentNode.removeChild(o[g])}!K.support.leadingWhitespace&&bq.test(i)&&m.insertBefore(b.createTextNode(bq.exec(i)[0]),m.firstChild),i=m.childNodes}var p;if(!K.support.appendChecked)if(i[0]&&typeof (p=i.length)=="number")for(g=0;g<p;g++)r(i[g]);else r(i);i.nodeType?f.push(i):f=K.merge(f,i)}if(c){e=function(a){return!a.type||bx.test(a.type)};for(h=0;f[h];h++)if(d&&K.nodeName(f[h],"script")&&(!f[h].type||f[h].type.toLowerCase()==="text/javascript"))d.push(f[h].parentNode?f[h].parentNode.removeChild(f[h]):f[h]);else{if(f[h].nodeType===1){var q=K.grep(f[h].getElementsByTagName("script"),e);f.splice.apply(f,[h+1,0].concat(q))}c.appendChild(f[h])}}return f},cleanData:function(a){var b,c,d=K.cache,e=K.expando,f=K.event.special,g=K.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&K.noData[i.nodeName.toLowerCase()])continue;c=i[K.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var j in b.events)f[j]?K.event.remove(i,j):K.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[K.expando]:i.removeAttribute&&i.removeAttribute(K.expando),delete d[c]}}}});var bA=/alpha\([^)]*\)/i,bB=/opacity=([^)]*)/,bC=/([A-Z]|^ms)/g,bD=/^-?\d+(?:px)?$/i,bE=/^-?\d/,bF=/^([\-+])=([\-+.\de]+)/,bG={position:"absolute",visibility:"hidden",display:"block"},bH=["Left","Right"],bI=["Top","Bottom"],bJ,bK,bL;K.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return K.access(this,a,c,!0,function(a,c,d){return d!==b?K.style(a,c,d):K.css(a,c)})},K.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bJ(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var f,g,h=K.camelCase(c),i=a.style,j=K.cssHooks[h];c=K.cssProps[h]||h;if(d===b){if(j&&"get"in j&&(f=j.get(a,!1,e))!==b)return f;return i[c]}g=typeof d,g==="string"&&(f=bF.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(K.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!K.cssNumber[h]&&(d+="px");if(!j||!("set"in j)||(d=j.set(a,d))!==b)try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;c=K.camelCase(c),f=K.cssHooks[c],c=K.cssProps[c]||c,c==="cssFloat"&&(c="float");if(f&&"get"in f&&(e=f.get(a,!0,d))!==b)return e;if(bJ)return bJ(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),K.curCSS=K.css,K.each(["height","width"],function(a,b){K.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return p(a,b,d);K.swap(a,bG,function(){e=p(a,b,d)});return e}},set:function(a,b){if(!bD.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),K.support.opacity||(K.cssHooks.opacity={get:function(a,b){return bB.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=K.isNaN(b)?"":"alpha(opacity="+b*100+")",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&K.trim(f.replace(bA,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bA.test(f)?f.replace(bA,e):f+" "+e}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(a,b){var c;K.swap(a,{display:"inline-block"},function(){b?c=bJ(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),H.defaultView&&H.defaultView.getComputedStyle&&(bK=function(a,c){var d,e,f;c=c.replace(bC,"-$1").toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(f=e.getComputedStyle(a,null))d=f.getPropertyValue(c),d===""&&!K.contains(a.ownerDocument.documentElement,a)&&(d=K.style(a,c));return d}),H.documentElement.currentStyle&&(bL=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;!bD.test(d)&&bE.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e));return d===""?"auto":d}),bJ=bK||bL,K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!K.support.reliableHiddenOffsets&&(a.style.display||K.css(a,"display"))==="none"},K.expr.filters.visible=function(a){return!K.expr.filters.hidden(a)});var bM=/%20/g,bN=/\[\]$/,bO=/\r?\n/g,bP=/#.*$/,bQ=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bR=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bS=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bT=/^(?:GET|HEAD)$/,bU=/^\/\//,bV=/\?/,bW=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bX=/^(?:select|textarea)/i,bY=/\s+/,bZ=/([?&])_=[^&]*/,b$=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,b_=K.fn.load,ca={},cb={},cc,cd,ce=["*/"]+["*"];try{cc=J.href}catch(cf){cc=H.createElement("a"),cc.href="",cc=cc.href}cd=b$.exec(cc.toLowerCase())||[],K.fn.extend({load:function(a,c,d){if(typeof a!="string"&&b_)return b_.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(K.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=K.param(c,K.ajaxSettings.traditional),g="POST"));var h=this;K.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?K("<div>").append(c.replace(bW,"")).find(f):c)),d&&h.each(d,[c,b,a])}});return this},serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bX.test(this.nodeName)||bR.test(this.type))}).map(function(a,b){var c=K(this).val();return c==null?null:K.isArray(c)?K.map(c,function(a,c){return{name:b.name,value:a.replace(bO,"\r\n")}}):{name:b.name,value:c.replace(bO,"\r\n")}}).get()}}),K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){K.fn[b]=function(a){return this.bind(b,a)}}),K.each(["get","post"],function(a,c){K[c]=function(a,d,e,f){K.isFunction(d)&&(f=f||e,e=d,d=b);return K.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),K.extend({getScript:function(a,c){return K.get(a,b,c,"script")},getJSON:function(a,b,c){return K.get(a,b,c,"json")},ajaxSetup:function(a,b){b?m(a,K.ajaxSettings):(b=a,a=K.ajaxSettings),m(a,b);return a},ajaxSettings:{url:cc,isLocal:bS.test(cd[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ce},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:o(ca),ajaxTransport:o(cb),ajax:function(a,c){function d(a,c,d,n){if(v!==2){v=2,t&&clearTimeout(t),s=b,q=n||"",y.readyState=a>0?4:0;var o,p,r,u=c,x=d?k(e,y,d):b,z,A;if(a>=200&&a<300||a===304){if(e.ifModified){if(z=y.getResponseHeader("Last-Modified"))K.lastModified[m]=z;if(A=y.getResponseHeader("Etag"))K.etag[m]=A}if(a===304)u="notmodified",o=!0;else try{p=j(e,x),u="success",o=!0}catch(B){u="parsererror",r=B}}else{r=u;if(!u||a)u="error",a<0&&(a=0)}y.status=a,y.statusText=""+(c||u),o?h.resolveWith(f,[p,u,y]):h.rejectWith(f,[y,u,r]),y.statusCode(l),l=b,w&&g.trigger("ajax"+(o?"Success":"Error"),[y,e,o?p:r]),i.resolveWith(f,[y,u]),w&&(g.trigger("ajaxComplete",[y,e]),--K.active||K.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var e=K.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof K)?K(f):K.event,h=K.Deferred(),i=K._Deferred(),l=e.statusCode||{},m,o={},p={},q,r,s,t,u,v=0,w,x,y={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=p[c]=p[c]||a,o[a]=b}return this},getAllResponseHeaders:function(){return v===2?q:null},getResponseHeader:function(a){var c;if(v===2){if(!r){r={};while(c=bQ.exec(q))r[c[1].toLowerCase()]=c[2]}c=r[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){v||(e.mimeType=a);return this},abort:function(a){a=a||"abort",s&&s.abort(a),d(0,a);return this}};h.promise(y),y.success=y.done,y.error=y.fail,y.complete=i.done,y.statusCode=function(a){if(a){var b;if(v<2)for(b in a)l[b]=[l[b],a[b]];else b=a[y.status],y.then(b,b)}return this},e.url=((a||e.url)+"").replace(bP,"").replace(bU,cd[1]+"//"),e.dataTypes=K.trim(e.dataType||"*").toLowerCase().split(bY),e.crossDomain==null&&(u=b$.exec(e.url.toLowerCase()),e.crossDomain=!(!u||u[1]==cd[1]&&u[2]==cd[2]&&(u[3]||(u[1]==="http:"?80:443))==(cd[3]||(cd[1]==="http:"?80:443)))),e.data&&e.processData&&typeof e.data!="string"&&(e.data=K.param(e.data,e.traditional)),n(ca,e,c,y);if(v===2)return!1;w=e.global,e.type=e.type.toUpperCase(),e.hasContent=!bT.test(e.type),w&&K.active++===0&&K.event.trigger("ajaxStart");if(!e.hasContent){e.data&&(e.url+=(bV.test(e.url)?"&":"?")+e.data,delete e.data),m=e.url;if(e.cache===!1){var z=K.now(),A=e.url.replace(bZ,"$1_="+z);e.url=A+(A===e.url?(bV.test(e.url)?"&":"?")+"_="+z:"")}}(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",e.contentType),e.ifModified&&(m=m||e.url,K.lastModified[m]&&y.setRequestHeader("If-Modified-Since",K.lastModified[m]),K.etag[m]&&y.setRequestHeader("If-None-Match",K.etag[m])),y.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", "+ce+"; q=0.01":""):e.accepts["*"]);for(x in e.headers)y.setRequestHeader(x,e.headers[x]);if(e.beforeSend&&(e.beforeSend.call(f,y,e)===!1||v===2)){y.abort();return!1}for(x in{success:1,error:1,complete:1})y[x](e[x]);s=n(cb,e,c,y);if(!s)d(-1,"No Transport");else{y.readyState=1,w&&g.trigger("ajaxSend",[y,e]),e.async&&e.timeout>0&&(t=setTimeout(function(){y.abort("timeout")},e.timeout));try{v=1,s.send(o,d)}catch(B){v<2?d(-1,B):K.error(B)}}return y},param:function(a,c){var d=[],e=function(a,b){b=K.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=K.ajaxSettings.traditional);if(K.isArray(a)||a.jquery&&!K.isPlainObject(a))K.each(a,function(){e(this.name,this.value)});else for(var f in a)l(f,a[f],c,e);return d.join("&").replace(bM,"+")}}),K.extend({active:0,lastModified:{},etag:{}});var cg=K.now(),ch=/(\=)\?(&|$)|\?\?/i;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return K.expando+"_"+cg++}}),K.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ch.test(b.url)||e&&ch.test(b.data))){var f,g=b.jsonpCallback=K.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";b.jsonp!==!1&&(i=i.replace(ch,k),b.url===i&&(e&&(j=j.replace(ch,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&K.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){f||K.error(g+" was not called");return f[0]},b.dataTypes[0]="json";return"script"}}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){K.globalEval(a);return a}}}),K.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),K.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=H.head||H.getElementsByTagName("head")[0]||H.documentElement;return{send:function(e,f){c=H.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var ci=a.ActiveXObject?function(){for(var a in ck)ck[a](0,1)}:!1,cj=0,ck;K.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&i()||h()}:i,function(a){K.extend(K.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(c){if(!c.crossDomain||K.support.cors){var d;return{send:function(e,f){var g=c.xhr(),h,i;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(i in c.xhrFields)g[i]=c.xhrFields[i];c.mimeType&&g.overrideMimeType&&g.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(i in e)g.setRequestHeader(i,e[i])}catch(j){}g.send(c.hasContent&&c.data||null),d=function(a,e){var i,j,k,l,m;try{if(d&&(e||g.readyState===4)){d=b,h&&(g.onreadystatechange=K.noop,ci&&delete ck[h]);if(e)g.readyState!==4&&g.abort();else{i=g.status,k=g.getAllResponseHeaders(),l={},m=g.responseXML,m&&m.documentElement&&(l.xml=m),l.text=g.responseText;try{j=g.statusText}catch(n){j=""}!i&&c.isLocal&&!c.crossDomain?i=l.text?200:404:i===1223&&(i=204)}}}catch(o){e||f(-1,o)}l&&f(i,j,l,k)},!c.async||g.readyState===4?d():(h=++cj,ci&&(ck||(ck={},K(a).unload(ci)),ck[h]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cl={},cm,cn,co=/^(?:toggle|show|hide)$/,cp=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cq,cr=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cs;K.fn.extend({show:function(a,b,c){var f,g;if(a||a===0)return this.animate(e("show",3),a,b,c);for(var h=0,i=this.length;h<i;h++)f=this[h],f.style&&(g=f.style.display,!K._data(f,"olddisplay")&&g==="none"&&(g=f.style.display=""),g===""&&K.css(f,"display")==="none"&&K._data(f,"olddisplay",d(f.nodeName)));for(h=0;h<i;h++){f=this[h];if(f.style){g=f.style.display;if(g===""||g==="none")f.style.display=K._data(f,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(e("hide",3),a,b,c);for(var d=0,f=this.length;d<f;d++)if(this[d].style){var g=K.css(this[d],"display");g!=="none"&&!K._data(this[d],"olddisplay")&&K._data(this[d],"olddisplay",g)}for(d=0;d<f;d++)this[d].style&&(this[d].style.display="none");return this},_toggle:K.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";K.isFunction(a)&&K.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:K(this).is(":hidden");K(this)[b?"show":"hide"]()}):this.animate(e("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,e){var f=K.speed(b,c,e);if(K.isEmptyObject(a))return this.each(f.complete,[!1]);a=K.extend({},a);return this[f.queue===!1?"each":"queue"](function(){f.queue===!1&&K._mark(this);var b=K.extend({},f),c=this.nodeType===1,e=c&&K(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=K.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],K.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&e||h==="show"&&!e)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],K.css(this,"display")==="inline"&&K.css(this,"float")==="none"&&(K.support.inlineBlockNeedsLayout?(j=d(this.nodeName),j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)k=new K.fx(this,b,i),h=a[i],co.test(h)?k[h==="toggle"?e?"show":"hide":h]():(l=cp.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(K.cssNumber[i]?"":"px"),o!=="px"&&(K.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,K.style(this,i,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,""));return!0})},stop:function(a,b){a&&this.queue([]),this.each(function(){var a=K.timers,c=a.length;b||K._unmark(!0,this);while(c--)a[c].elem===this&&(b&&a[c](!0),a.splice(c,1))}),b||this.dequeue();return this}}),K.each({slideDown:e("show",1),slideUp:e("hide",1),slideToggle:e("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){K.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),K.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?K.extend({},a):{complete:c||!c&&b||K.isFunction(a)&&a,duration:a,easing:c&&b||b&&!K.isFunction(b)&&b};d.duration=K.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in K.fx.speeds?K.fx.speeds[d.duration]:K.fx.speeds._default,d.old=d.complete,d.complete=function(a){K.isFunction(d.old)&&d.old.call(this),d.queue!==!1?K.dequeue(this):a!==!1&&K._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),K.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(K.fx.step[this.prop]||K.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=K.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,b,c){function d(a){return e.step(a)}var e=this,f=K.fx;this.startTime=cs||g(),this.start=a,this.end=b,this.unit=c||this.unit||(K.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,d.elem=this.elem,d()&&K.timers.push(d)&&!cq&&(cq=setInterval(f.tick,f.interval))},show:function(){this.options.orig[this.prop]=K.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),K(this.elem).show()},hide:function(){this.options.orig[this.prop]=K.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cs||g(),c=!0,d=this.elem,e=this.options,f,h;if(a||b>=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(f in e.animatedProperties)e.animatedProperties[f]!==!0&&(c=!1);if(c){e.overflow!=null&&!K.support.shrinkWrapBlocks&&K.each(["","X","Y"],function(a,b){d.style["overflow"+b]=e.overflow[a]}),e.hide&&K(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)K.style(d,i,e.orig[i]);e.complete.call(d)}return!1}e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=K.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},K.extend(K.fx,{tick:function(){for(var a=K.timers,b=0;b<a.length;++b)a[b]()||a.splice(b--,1);a.length||K.fx.stop()},interval:13,stop:function(){clearInterval(cq),cq=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){K.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),K.expr&&K.expr.filters&&(K.expr.filters.animated=function(a){return K.grep(K.timers,function(b){return a===b.elem}).length});var ct=/^t(?:able|d|h)$/i,cu=/^(?:body|html)$/i;"getBoundingClientRect"in H.documentElement?K.fn.offset=function(a){var b=this[0],d;if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return K.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,g=f.documentElement;if(!d||!K.contains(g,b))return d?{top:d.top,left:d.left}:{top:0,left:0};var h=f.body,i=c(f),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||K.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||K.support.boxModel&&g.scrollLeft||h.scrollLeft,n=d.top+l-j,o=d.left+m-k;return{top:n,left:o}}:K.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return K.offset.bodyOffset(b);K.offset.initialize();var c,d=b.offsetParent,e=b,f=b.ownerDocument,g=f.documentElement,h=f.body,i=f.defaultView,j=i?i.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,l=b.offsetLeft;while((b=b.parentNode)&&b!==h&&b!==g){if(K.offset.supportsFixedPosition&&j.position==="fixed")break;c=i?i.getComputedStyle(b,null):b.currentStyle,k-=b.scrollTop,l-=b.scrollLeft,b===d&&(k+=b.offsetTop,l+=b.offsetLeft,K.offset.doesNotAddBorder&&(!K.offset.doesAddBorderForTableAndCells||!ct.test(b.nodeName))&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),K.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),j=c}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;K.offset.supportsFixedPosition&&j.position==="fixed"&&(k+=Math.max(g.scrollTop,h.scrollTop),l+=Math.max(g.scrollLeft,h.scrollLeft));return{top:k,left:l}},K.offset={initialize:function(){var a=H.body,b=H.createElement("div"),c,d,e,f,g=parseFloat(K.css(a,"marginTop"))||0,h="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";K.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=h,a.insertBefore(b,a.firstChild),c=b.firstChild,d=c.firstChild,f=c.nextSibling.firstChild.firstChild,this.doesNotAddBorder=d.offsetTop!==5,this.doesAddBorderForTableAndCells=f.offsetTop===5,d.style.position="fixed",d.style.top="20px",this.supportsFixedPosition=d.offsetTop===20||d.offsetTop===15,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",this.subtractsBorderForOverflowNotVisible=d.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==g,a.removeChild(b),K.offset.initialize=K.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;K.offset.initialize(),K.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(K.css(a,"marginTop"))||0,c+=parseFloat(K.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=K.css(a,"position");d==="static"&&(a.style.position="relative");var e=K(a),f=e.offset(),g=K.css(a,"top"),h=K.css(a,"left"),i=(d==="absolute"||d==="fixed")&&K.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),K.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},K.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cu.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(K.css(a,"marginTop"))||0,c.left-=parseFloat(K.css(a,"marginLeft"))||0,d.top+=parseFloat(K.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(K.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||H.body;while(a&&!cu.test(a.nodeName)&&K.css(a,"position")==="static")a=a.offsetParent;return a})}}),K.each(["Left","Top"],function(a,d){var e="scroll"+d;K.fn[e]=function(d){var f,g;if(d===b){f=this[0];if(!f)return null;g=c(f);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:K.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]}return this.each(function(){g=c(this),g?g.scrollTo(a?K(g).scrollLeft():d,a?d:K(g).scrollTop()):this[e]=d})}}),K.each(["Height","Width"],function(a,c){var d=c.toLowerCase();K.fn["inner"+c]=function(){var a=this[0];return a&&a.style?parseFloat(K.css(a,d,"padding")):null},K.fn["outer"+c]=function(a){var b=this[0];return b&&b.style?parseFloat(K.css(b,d,a?"margin":"border")):null},K.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(K.isFunction(a))return this.each(function(b){var c=K(this);c[d](a.call(this,b,c[d]()))});if(K.isWindow(e)){var f=e.document.documentElement["client"+c],g=e.document.body;return e.document.compatMode==="CSS1Compat"&&f||g&&g["client"+c]||f}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=K.css(e,d),i=parseFloat(h);return K.isNaN(i)?h:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=K})(window),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new B(a)};typeof module!="undefined"&&module.exports?(module.exports=w,w._=w):a._=w,w.VERSION="1.1.7";var x=w.each=w.forEach=function(a,b,d){if(a!=null)if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(j.call(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=function(a,b,c){var d=[];if(a==null)return d;if(l&&a.map===l)return a.map(b,c);x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});return d},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=c!==void 0;a==null&&(a=[]);if(m&&a.reduce===m){d&&(b=w.bind(b,d));return e?a.reduce(b,c):a.reduce(b)}x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){a==null&&(a=[]);if(n&&a.reduceRight===n){d&&(b=w.bind(b,d));return c!==void 0?a.reduceRight(b,c):a.reduceRight(b)}var e=(w.isArray(a)?a.slice():w.toArray(a)).reverse();return w.reduce(e,b,c,d)},w.find=w.detect=function(a,b,c){var d;y(a,function(a,e,f){if(b.call(c,a,e,f)){d=a;return!0}});return d},w.filter=w.select=function(a,b,c){var d=[];if(a==null)return d;if(o&&a.filter===o)return a.filter(b,c);x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)});return d},w.reject=function(a,b,c){var d=[];if(a==null)return d;x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)});return d},w.every=w.all=function(a,b,d){var e=!0;if(a==null)return e;if(p&&a.every===p)return a.every(b,d);x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c});return e};var y=w.some=w.any=function(a,b,d){b=b||w.identity;var e=!1;if(a==null)return e;if(q&&a.some===q)return a.some(b,d);x(a,function(a,f,g){if(e|=b.call(d,a,f,g))return c});return!!e};w.include=w.contains=function(a,b){var c=!1;if(a==null)return c;if(r&&a.indexOf===r)return a.indexOf(b)!=-1;y(a,function(a){if(c=a===b)return!0});return c},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})});return d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})});return d.value},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={};x(a,function(a,d){var e=b(a,d);(c[e]||(c[e]=[])).push(a)});return c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){if(!a)return[];if(a.toArray)return a.toArray();if(w.isArray(a))return g.call(a);if(w.isArguments(a))return g.call(a);return w.values(a)},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.last=function(a){return a[a.length-1]},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a){return w.reduce(a,function(a,b){if(w.isArray(b))return a.concat(w.flatten(b));a[a.length]=b;return a},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b){return w.reduce(a,function(a,c,d){if(0==d||(b===!0?w.last(a)!=c:!w.include(a,c)))a[a.length]=c;return a},[])},w.union=function(){return w.uniq(w.flatten(arguments))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a,b){return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c){d=w.sortedIndex(a,b);return a[d]===b?d:-1}if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);while(e<d)f[e++]=a,a+=c;return f},w.bind=function(a,b){if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)});return a},w.memoize=function(a,b){var c={};b||(b=w.identity);return function(){var d=b.apply(this,arguments);return j.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))};var z=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,b)}};w.throttle=function(a,b){return z(a,b,!1)},w.debounce=function(a,b){return z(a,b,!0)},w.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}},w.compose=function(){var a=g.call(arguments);return function(){var b=g.call(arguments);for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)j.call(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){x(g.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])});return a},w.defaults=function(a){x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])});return a},w.clone=function(a){return w.isArray(a)?a.slice():w.extend({},a)},w.tap=function(a,b){b(a);return a},w.isEqual=function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(w.isDate(a)&&w.isDate(b))return a.getTime()===b.getTime();if(w.isNaN(a)&&w.isNaN(b))return!1;if(w.isRegExp(a)&&w.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(a.length&&a.length!==b.length)return!1;var e=w.keys(a),f=w.keys(b);if(e.length!=f.length)return!1;for(var g in a)if(!(g in b)||!w.isEqual(a[g],b[g]))return!1;return!0},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(j.call(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)==="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return!!a&&!!j.call(a,"callee")},w.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},w.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)},w.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1},w.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},w.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.noConflict=function(){a._=b;return this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.mixin=function(a){x(w.functions(a),function(b){D(b,w[b]=a[b])})};var A=0;w.uniqueId=function(a){var b=A++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj",d);return b?e(b):e};var B=function(a){this._wrapped=a};w.prototype=B.prototype;var C=function(a,b){return b?w(a).chain():a},D=function(a,b){B.prototype[a]=function(){var a=g.call(arguments);h.call(a,this._wrapped);return C(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];B.prototype[a]=function(){b.apply(this._wrapped,arguments);return C(this._wrapped,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];B.prototype[a]=function(){return C(b.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){this._chain=!0;return this},B.prototype.value=function(){return this._wrapped}}(),function(){var a=this,b=a.Backbone,c;typeof exports!="undefined"?c=exports:c=a.Backbone={},c.VERSION="0.5.3";var d=a._;!d&&typeof require!="undefined"&&(d=require("underscore")._);var e=a.jQuery||a.Zepto;c.noConflict=function(){a.Backbone=b;return this},c.emulateHTTP=!1,c.emulateJSON=!1,c.Events={bind:function(a,b,c){var d=this._callbacks||(this._callbacks={}),e=d[a]||(d[a]=[]);e.push([b,c]);return this},unbind:function(a,b){var c;if(!a)this._callbacks={};else if(c=this._callbacks)if(!b)c[a]=[];else{var d=c[a];if(!d)return this;for(var e=0,f=d.length;e<f;e++)if(d[e]&&b===d[e][0]){d[e]=null;break}}return this},trigger:function(a){var b,c,d,e,f,g=2;if(!(c=this._callbacks))return this;while(g--){d=g?a:"all";if(b=c[d])for(var h=0,i=b.length;h<i;h++)(e=b[h])?(f=g?Array.prototype.slice.call(arguments,1):arguments,e[0].apply(e[1]||this,f)):(b.splice(h,1),h--,i--)}return this}},c.Model=function(a,b){var c;a||(a={});if(c=this.defaults)d.isFunction(c)&&(c=c.call(this)),a=d.extend({},c,a);this.attributes={},this._escapedAttributes={},this.cid=d.uniqueId("c"),this.set(a,{silent:!0}),this._changed=!1,this._previousAttributes=d.clone(this.attributes),b&&b.collection&&(this.collection=b.collection),this.initialize(a,b)},d.extend(c.Model.prototype,c.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.attributes[a];return this._escapedAttributes[a]=w(c==null?"":""+c)},has:function(a){return this.attributes[a]!=null},set:function(a,b){b||(b={});if(!a)return this;a.attributes&&(a=a.attributes);var c=this.attributes,e=this._escapedAttributes;if(!b.silent&&this.validate&&!this._performValidation(a,b))return!1;this.idAttribute in a&&(this.id=a[this.idAttribute]);var f=this._changing;this._changing=!0;for(var g in a){var h=a[g];d.isEqual(c[g],h)||(c[g]=h,delete e[g],this._changed=!0,b.silent||this.trigger("change:"+g,this,h,b))}!f&&!b.silent&&this._changed&&this.change(b),this._changing=!1;return this},unset:function(a,b){if(!(a in this.attributes))return this;b||(b={});var c=this.attributes[a],d={};d[a]=void 0;if(!b.silent&&this.validate&&!this._performValidation(d,b))return!1;delete this.attributes[a],delete this._escapedAttributes[a],a==this.idAttribute&&delete this.id,this._changed=!0,b.silent||(this.trigger("change:"+a,this,void 0,b),this.change(b));return this},clear:function(a){a||(a={});var b,c=this.attributes,d={};for(b in c)d[b]=void 0;if(!a.silent&&this.validate&&!this._performValidation(d,a))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!a.silent){for(b in c)this.trigger("change:"+b,this,void 0,a);this.change(a)}return this},fetch:function(a){a||(a={});var b=this,d=a.success;a.success=function(c,e,f){if(!b.set(b.parse(c,f),a))return!1;d&&d(b,c)},a.error=v(a.error,b,a);return(this.sync||c.sync).call(this,"read",this,a)},save:function(a,b){b||(b={});if(a&&!this.set(a,b))return!1;var d=this,e=b.success;b.success=function(a,c,f){if(!d.set(d.parse(a,f),b))return!1;e&&e(d,a,f)},b.error=v(b.error,d,b);var f=this.isNew()?"create":"update";return(this.sync||c.sync).call(this,f,this,b)},destroy:function(a){a||(a={});if(this.isNew())return this.trigger("destroy",this,this.collection,a);var b=this,d=a.success;a.success=function(c){b.trigger("destroy",b,b.collection,a),d&&d(b,c)},a.error=v(a.error,b,a);return(this.sync||c.sync).call(this,"delete",this,a)},url:function(){var a=t(this.collection)||this.urlRoot||u();if(this.isNew())return a;return a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(a){this.trigger("change",this,a),this._previousAttributes=d.clone(this.attributes),this._changed=!1},hasChanged:function(a){if(a)return this._previousAttributes[a]!=this.attributes[a];return this._changed},changedAttributes:function(a){a||(a=this.attributes);var b=this._previousAttributes,c=!1;for(var e in a)d.isEqual(b[e],a[e])||(c=c||{},c[e]=a[e]);return c},previous:function(a){if(!a||!this._previousAttributes)return null;return this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},_performValidation:function(a,b){var c=this.validate(a);if(c){b.error?b.error(this,c,b):this.trigger("error",this,c,b);return!1}return!0}}),c.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),d.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),a&&this.reset(a,{silent:!0}),this.initialize.apply(this,arguments)},d.extend(c.Collection.prototype,c.Events,{model:c.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._add(a[c],b);else this._add(a,b);return this},remove:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;c<e;c++)this._remove(a[c],b);else this._remove(a,b);return this},get:function(a){if(a==null)return null;return this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator),a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return d.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={}),this.each(this._removeReference),this._reset(),this.add(a,{silent:!0}),b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a||(a={});var b=this,d=a.success;a.success=function(c,e,f){b[a.add?"add":"reset"](b.parse(c,f),a),d&&d(b,c)},a.error=v(a.error,b,a);return(this.sync||c.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var d=b.success;b.success=function(a,e,f){c.add(a,b),d&&d(a,e,f)},a.save(null,b);return a},parse:function(a,b){return a},chain:function(){return d(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof c.Model)a.collection||(a.collection=this);else{var d=a;a=new this.model(d,{collection:this}),a.validate&&!a._performValidation(d,b)&&(a=!1)}return a},_add:function(a,b){b||(b={}),a=this._prepareModel(a,b);if(!a)return!1;var c=this.getByCid(a);if(c)throw new Error(["Can't add the same model to a set twice",c.id]);this._byId[a.id]=a,this._byCid[a.cid]=a;var d=b.at!=null?b.at:this.comparator?this.sortedIndex(a,this.comparator):this.length;this.models.splice(d,0,a),a.bind("all",this._onModelEvent),this.length++,b.silent||a.trigger("add",a,this,b);return a},_remove:function(a,b){b||(b={}),a=this.getByCid(a)||this.get(a);if(!a)return null;delete this._byId[a.id],delete this._byCid[a.cid],this.models.splice(this.indexOf(a),1),this.length--,b.silent||a.trigger("remove",a,this,b),this._removeReference(a);return a},_removeReference:function(a){this==a.collection&&delete a.collection,a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,b,c,d){if(a!="add"&&a!="remove"||c==this)a=="destroy"&&this._remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments)}});var f=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];d.each(f,function(a){c.Collection.prototype[a]=function(){return d[a].apply(d,[this.models].concat(d.toArray(arguments)))}}),c.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var g=/:([\w\d]+)/g,h=/\*([\w\d]+)/g,i=/[-[\]{}()+?.,\\^$|#\s]/g;d.extend(c.Router.prototype,c.Events,{initialize:function(){},route:function(a,b,e){c.history||(c.history=new c.History),d.isRegExp(a)||(a=this._routeToRegExp(a)),c.history.route(a,d.bind(function(c){var d=this._extractParameters(a,c);e.apply(this,d),this.trigger.apply(this,["route:"+b].concat(d))},this))},navigate:function(a,b){c.history.navigate(a,b)},_bindRoutes:function(){if(!!this.routes){var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){a=a.replace(i,"\\$&").replace(g,"([^/]*)").replace(h,"(.*?)");return new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),c.History=function(){this.handlers=[],d.bindAll(this,"checkUrl")};var j=/^#*/,k=/msie [\w.]+/,l=!1;d.extend(c.History.prototype,{interval:50,getFragment:function(a,b){if(a==null)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c),a.indexOf(this.options.root)==0&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return decodeURIComponent(a.replace(j,""))},start:function(a){if(l)throw new Error("Backbone.history has already been started");this.options=d.extend({},{root:"/"},this.options,a),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),c=document.documentMode,f=k.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);f&&(this.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?e(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!f?e(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=b,l=!0;var g=window.location,h=g.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!h){this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment);return!0}this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=g.hash.replace(j,""),window.history.replaceState({},document.title,g.protocol+"//"+g.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.iframe.location.hash));if(b==this.fragment||b==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=d.any(this.handlers,function(a){if(a.route.test(b)){a.callback(b);return!0}});return c},navigate:function(a,b){var c=(a||"").replace(j,"");if(this.fragment!=c&&this.fragment!=decodeURIComponent(c)){if(this._hasPushState){var d=window.location;c.indexOf(this.options.root)!=0&&(c=this.options.root+c),this.fragment=c,window.history.pushState({},document.title,d.protocol+"//"+d.host+c)}else window.location.hash=this.fragment=c,this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=c);b&&this.loadUrl(a)}}}),c.View=function(a){this.cid=d.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var m=function(a){return e(a,this.el)},n=/^(\S+)\s*(.*)$/,o=["model","collection","el","id","attributes","className","tagName"];d.extend(c.View.prototype,c.Events,{tagName:"div",$:m,initialize:function(){},render:function(){return this},remove:function(){e(this.el).remove();return this},make:function(a,b,c){var d=document.createElement(a);b&&e(d).attr(b),c&&e(d).html(c);return d},delegateEvents:function(a){if(!!a||!!(a=this.events)){d.isFunction(a)&&(a=a.call(this)),e(this.el).unbind(".delegateEvents"+this.cid);for(var b in a){var c=this[a[b]];if(!c)throw new Error('Event "'+a[b]+'" does not exist');var f=b.match(n),g=f[1],h=f[2];c=d.bind(c,this),g+=".delegateEvents"+this.cid,h===""?e(this.el).bind(g,c):e(this.el).delegate(h,g,c)}}},_configure:function(a){this.options&&(a=d.extend({},this.options,a));for(var b=0,c=o.length;b<c;b++){var e=o[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(!this.el){var a=this.attributes||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.el=this.make(this.tagName,a)}else d.isString(this.el)&&(this.el=e(this.el).get(0))}});var p=function(a,b){var c=s(this,a,b);c.extend=this.extend;return c};c.Model.extend=c.Collection.extend=c.Router.extend=c.View.extend=p;var q={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(a,b,f){var g=q[a],h=d.extend({type:g,dataType:"json"},f);h.url||(h.url=t(b)||u()),!h.data&&b&&(a=="create"||a=="update")&&(h.contentType="application/json",h.data=JSON.stringify(b.toJSON())),c.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),c.emulateHTTP&&(g==="PUT"||g==="DELETE")&&(c.emulateJSON&&(h.data._method=g),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g)}),h.type!=="GET"&&!c.emulateJSON&&(h.processData=!1);return e.ajax(h)};var r=function(){},s=function(a,b,c){var e;b&&b.hasOwnProperty("constructor")?e=b.constructor:e=function(){return a.apply(this,arguments)},d.extend(e,a),r.prototype=a.prototype,e.prototype=new r,b&&d.extend(e.prototype,b),c&&d.extend(e,c),e.prototype.constructor=e,e.__super__=a.prototype;return e},t=function(a){if(!a||!a.url)return null;return d.isFunction(a.url)?a.url():a.url},u=function(){throw new Error('A "url" property or function must be specified')},v=function(a,b,c){return function(d){a?a(b,d,c):b.trigger("error",b,d,c)}},w=function(a){return a.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}.call(this),function(){function f(b){if(typeof b=="number")return[b,b in a.offsetToTz?a.offsetToTz[b][0]:""];var c=parseInt(b,10);if(isNaN(c))return[a.tzToOffset[b],b];b=(c<0?1:-1)*(Math.floor(Math.abs(c)/100)*60+Math.abs(c)%100);return[b,b in a.offsetToTz?a.offsetToTz[b][0]:""]}function e(a){var b=a<0?"-":"+";a=Math.abs(a);return b+(a<10?"000"+a:a<100?"00"+a:a<1e3?"0"+a:a)}function d(a){return a<10?"00"+a:a<100?"0"+a:a}function c(a){var b=a<0?"-":"+";a=Math.abs(a);return b+(a<10?"0"+a:a)}function b(a){return a<10?"0"+a:a}var a=typeof exports!="undefined"?exports:{};a.tzToOffset={ACDT:-630,ACST:-570,ACT:-480,ADT:180,AEDT:-660,AEST:-600,AFT:-270,AKDT:480,AKST:540,AMST:-300,AMT:-240,ART:180,AST:-240,AWDT:-540,AWST:-480,AZOST:60,AZT:-240,BDT:-480,BIOT:-360,BIT:720,BOT:240,BRT:180,BST:-60,BTT:-360,CAT:-120,CCT:-390,CDT:300,CEDT:-120,CEST:-120,CET:-60,CHAST:-765,ChST:-600,CIST:480,CKT:600,CLST:180,CLT:240,COST:240,COT:300,CST:-480,CST:360,CVT:60,CXT:-420,DFT:-60,EAST:360,EAT:-180,ECT:240,ECT:300,EDT:240,EEDT:-180,EEST:-180,EET:-120,EST:300,FJT:-720,FKST:240,GALT:360,GET:-240,GFT:180,GILT:-720,GIT:540,GMT:0,GST:120,GYT:240,HADT:540,HAST:600,HKT:-480,HMT:-300,HST:600,IRKT:-480,IRST:-210,IST:-120,IST:-330,IST:-60,JST:-540,KRAT:-420,KST:-540,LHST:-630,LINT:-840,MAGT:-660,MDT:360,MIT:570,MSD:-240,MSK:-180,MST:-390,MST:-480,MST:420,MUT:-240,NDT:150,NFT:-690,NPT:-345,NST:210,NT:210,OMST:-360,PDT:420,PETT:-720,PHOT:-780,PKT:-300,PST:-480,PST:480,RET:-240,SAMT:-240,SAST:-120,SBT:-660,SCT:-240,SLT:-330,SST:-480,SST:660,TAHT:600,THA:-420,UTC:0,UYST:120,UYT:180,VET:270,VLAT:-600,WAT:-60,WEDT:-60,WEST:-60,YAKT:-540,YEKT:-300},a.offsetToTz={720:["BIT"],660:["SST"],600:["HST","CKT","HAST","TAHT"],570:["MIT"],540:["AKST","GIT","HADT"],480:["PST","AKDT","CIST"],420:["MST","PDT"],360:["CST","EAST","GALT","MDT"],300:["EST","CDT","COT","ECT"],270:["VET"],240:["ECT","AST","BOT","CLT","COST","EDT","FKST","GYT"],210:["NT","NST"],180:["BRT","ADT","ART","CLST","GFT","UYT"],150:["NDT"],120:["GST","UYST"],60:["AZOST","CVT"],0:["UTC","GMT"],"-60":["CET","BST","DFT","IST","WAT","WEDT","WEST"],"-120":["EET","CAT","CEDT","CEST","IST","SAST"],"-180":["MSK","AST","AST","EAT","EEDT","EEST"],"-210":["IRST"],"-240":["AST","AMT","AZT","GET","MSD","MUT","RET","SAMT","SCT"],"-270":["AFT"],"-300":["AMST","HMT","PKT","YEKT"],"-330":["IST","SLT"],"-345":["NPT"],"-360":["BIOT","BST","BTT","OMST"],"-390":["CCT","MST"],"-420":["CXT","KRAT","THA"],"-480":["ACT","AWST","BDT","CST","HKT","IRKT","MST","PST","SST"],"-540":["AWDT","JST","KST","YAKT"],"-570":["ACST"],"-600":["AEST","ChST","VLAT"],"-630":["ACDT","LHST"],"-660":["AEDT","MAGT","SBT"],"-690":["NFT"],"-720":["FJT","GILT","PETT"],"-765":["CHAST"],"-780":["PHOT"],"-840":["LINT"]},a.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a.months=["January","February","March","April","May","June","July","August","September","October","November","December"],a.monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a.ordinals=function(a){switch(a%10){case 1:return a%100!==11?"st":"th";case 2:return a%100!==12?"nd":"th";case 3:return a%100!==13?"rd":"th";default:return"th"}},Date.prototype.format=function(g,h){var i=this.getTime();if(h===undefined)h=this.getTimezone(),k=this.getTimezoneName();else{var j=f(h);h=j[0];var k=j[1]}this.setTime(i-h*6e4);var l="";for(var m=0;m<g.length;m++)switch(g.charAt(m)){case"d":l+=b(this.getUTCDate());break;case"D":l+=a.weekdaysShort[this.getUTCDay()];break;case"j":l+=this.getUTCDate();break;case"l":l+=a.weekdays[this.getUTCDay()];break;case"N":l+=this.getUTCDay()||7;break;case"S":l+=a.ordinals(this.getUTCDate());break;case"w":l+=this.getUTCDay();break;case"z":l+=this.getUTCDayOfYear();break;case"W":l+=b(this.getUTCISOWeek());break;case"F":l+=a.months[this.getUTCMonth()];break;case"m":l+=b(this.getUTCMonth()+1);break;case"M":l+=a.monthsShort[this.getUTCMonth()];break;case"n":l+=this.getUTCMonth()+1;break;case"t":l+=this.getUTCDaysOfMonth();break;case"L":l+=this.isLeapYear()?1:0;break;case"o":l+=this.getUTCISOFullYear();break;case"Y":l+=this.getUTCFullYear();break;case"y":l+=b(this.getUTCFullYear()%100);break;case"a":l+=this.getUTCHours()>=12?"pm":"am";break;case"A":l+=this.getUTCHours()>=12?"PM":"AM";break;case"g":l+=this.getUTCHours()%12||12;break;case"G":l+=this.getUTCHours();break;case"h":l+=b(this.getUTCHours()%12||12);break;case"H":l+=b(this.getUTCHours());break;case"i":l+=b(this.getUTCMinutes());break;case"s":l+=b(this.getUTCSeconds());break;case"u":l+=d(this.getUTCMilliseconds());break;case"O":l+=e((h<0?1:-1)*(Math.floor(Math.abs(h)/60)*100+Math.abs(h)%60));break;case"P":l+=c((h<0?1:-1)*Math.floor(Math.abs(h)/60))+":"+b(Math.abs(h)%60);break;case"T":l+=k;break;case"Z":l+=-h*60;break;case"c":l+=this.format("Y-m-d\\TH:i:sP",h);break;case"r":l+=this.format("D, d M y H:i:s O",h);break;case"U":l+=Math.floor(this.getTime()/1e3);break;case"\\":g.charAt(++m)!==undefined&&(l+=g.charAt(m));break;default:l+=g.charAt(m)}this.setTime(i);return l},Date.prototype.isLeapYear=function(){var a=this.getUTCFullYear();return a%400===0||a%4===0&&a%100!==0},Date.prototype.getUTCISOWeek=function(){var a=new Date(this);a.setUTCDate(a.getUTCDate()-(a.getUTCDay()||7)+4);return Math.ceil((a.getTime()-Date.UTC(a.getUTCFullYear(),0))/864e5/7)},Date.prototype.getUTCISOFullYear=function(){var a=new Date(this);a.setUTCDate(a.getUTCDate()-(a.getUTCDay()||7)+4);return a.getUTCFullYear()},Date.prototype.getUTCDaysOfMonth=function(){var a=new Date(this);a.setUTCMonth(a.getUTCMonth()+1),a.setUTCDate(0);return a.getUTCDate()},Date.prototype.getUTCDayOfYear=function(){return Math.floor((this.getTime()-Date.UTC(this.getUTCFullYear(),0))/864e5)},Date.prototype.getTimezone=function(){if(!("_tz"in this)){var a=(new Date).toString().match(/([A-Z]{3,4}|NT|ChST)(?![-\+])/);a&&a[1]?this.setTimezone(a[1]):this.setTimezone((new Date).getTimezoneOffset())}return this._tz},Date.prototype.getTimezoneName=function(){this.getTimezone();return this._tzName},Date.prototype.setTimezone=function(a){var b=f(a);this._tz=b[0],this._tzName=b[1]}}(),function(){function cs(){return"circle"}function cr(){return 64}function cq(a,b){var c=(a.ownerSVGElement||a).createSVGPoint();if(cp<0&&(window.scrollX||window.scrollY)){var d=d3.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),e=d[0][0].getScreenCTM();cp=!e.f&&!e.e,d.remove()}cp?(c.x=b.pageX,c.y=b.pageY):(c.x=b.clientX,c.y=b.clientY),c=c.matrixTransform(a.getScreenCTM().inverse());return[c.x,c.y]}function co(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+bA;return[c*Math.cos(d),c*Math.sin(d)]}}function cn(a){return[a.x,a.y]}function cm(a){return a.endAngle}function cl(a){return a.startAngle}function ck(a){return a.radius}function cj(a){return a.target}function ci(a){return a.source}function ch(a){return function(b,c){return a[c][1]}}function cg(a){return function(b,c){return a[c][0]}}function cf(a){function i(f){if(f.length<1)return null;var i=bH(this,f,b,d),j=bH(this,f,b===c?cg(i):c,d===e?ch(i):e);return"M"+g(a(j),h)+"L"+g(a(i.reverse()),h)+"Z"}var b=bI,c=bI,d=0,e=bJ,f="linear",g=bK[f],h=.7;i.x=function(a){if(!arguments.length)return c;b=c=a;return i},i.x0=function(a){if(!arguments.length)return b;b=a;return i},i.x1=function(a){if(!arguments.length)return c;c=a;return i},i.y=function(a){if(!arguments.length)return e;d=e=a;return i},i.y0=function(a){if(!arguments.length)return d;d=a;return i},i.y1=function(a){if(!arguments.length)return e;e=a;return i},i.interpolate=function(a){if(!arguments.length)return f;g=bK[f=a];return i},i.tension=function(a){if(!arguments.length)return h;h=a;return i};return i}function ce(a){var b,c=-1,d=a.length,e,f;while(++c<d)b=a[c],e=b[0],f=b[1]+bA,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function cd(a){return a.length<3?bL(a):a[0]+bR(a,cc(a))}function cc(a){var b=[],c,d,e,f,g=cb(a),h=-1,i=a.length-1;while(++h<i)c=ca(a[h],a[h+1]),Math.abs(c)<1e-6?g[h]=g[h+1]=0:(d=g[h]/c,e=g[h+1]/c,f=d*d+e*e,f>9&&(f=c*3/Math.sqrt(f),g[h]=f*d,g[h+1]=f*e));h=-1;while(++h<=i)f=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),b.push([f||0,g[h]*f||0]);return b}function cb(a){var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=ca(e,f);while(++b<c)d[b]=g+(g=ca(e=f,f=a[b+1]));d[b]=g;return d}function ca(a,b){return(b[1]-a[1])/(b[0]-a[0])}function b_(a,b,c){a.push("C",bX(bY,b),",",bX(bY,c),",",bX(bZ,b),",",bX(bZ,c),",",bX(b$,b),",",bX(b$,c))}function bX(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function bW(a,b){var c=a.length-1,d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1,i,j;while(++h<=c)i=a[h],j=h/c,i[0]=b*i[0]+(1-b)*(d+j*f),i[1]=b*i[1]+(1-b)*(e+j*g);return bT(a)}function bV(a){var b,c=-1,d=a.length,e=d+4,f,g=[],h=[];while(++c<4)f=a[c%d],g.push(f[0]),h.push(f[1]);b=[bX(b$,g),",",bX(b$,h)],--c;while(++c<e)f=a[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),b_(b,g,h);return b.join("")}function bU(a){if(a.length<4)return bL(a);var b=[],c=-1,d=a.length,e,f=[0],g=[0];while(++c<3)e=a[c],f.push(e[0]),g.push(e[1]);b.push(bX(b$,f)+","+bX(b$,g)),--c;while(++c<d)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),b_(b,f,g);return b.join("")}function bT(a){if(a.length<3)return bL(a);var b=[],c=1,d=a.length,e=a[0],f=e[0],g=e[1],h=[f,f,f,(e=a[1])[0]],i=[g,g,g,e[1]];b.push(f,",",g),b_(b,h,i);while(++c<d)e=a[c],h.shift(),h.push(e[0]),i.shift(),i.push(e[1]),b_(b,h,i);c=-1;while(++c<2)h.shift(),h.push(e[0]),i.shift(),i.push(e[1]),b_(b,h,i);return b.join("")}function bS(a,b){var c=[],d=(1-b)/2,e,f=a[0],g=a[1],h=1,i=a.length;while(++h<i)e=f,f=g,g=a[h],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function bR(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return bL(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;c&&(d+="Q"+(f[0]-g[0]*2/3)+","+(f[1]-g[1]*2/3)+","+f[0]+","+f[1],e=a[1],i=2);if(b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+h[0]*2/3)+","+(f[1]+h[1]*2/3)+","+k[0]+","+k[1]}return d}function bQ(a,b,c){return a.length<3?bL(a):a[0]+bR(a,bS(a,b))}function bP(a,b){return a.length<3?bL(a):a[0]+bR((a.push(a[0]),a),bS([a[a.length-2]].concat(a,[a[1]]),b))}function bO(a,b){return a.length<4?bL(a):a[1]+bR(a.slice(1,a.length-1),bS(a,b))}function bN(a){var b=[],c=0,d=a.length,e=a[0];b.push(e[0],",",e[1]);while(++c<d)b.push("H",(e=a[c])[0],"V",e[1]);return b.join("")}function bM(a){var b=[],c=0,d=a.length,e=a[0];b.push(e[0],",",e[1]);while(++c<d)b.push("V",(e=a[c])[1],"H",e[0]);return b.join("")}function bL(a){var b=[],c=0,d=a.length,e=a[0];b.push(e[0],",",e[1]);while(++c<d)b.push("L",(e=a[c])[0],",",e[1]);return b.join("")}function bJ(a){return a[1]}function bI(a){return a[0]}function bH(a,b,c,d){var e=[],f=-1,g=b.length,h=typeof c=="function",i=typeof d=="function",j;if(h&&i)while(++f<g)e.push([c.call(a,j=b[f],f),d.call(a,j,f)]);else if(h)while(++f<g)e.push([c.call(a,b[f],f),d]);else if(i)while(++f<g)e.push([c,d.call(a,b[f],f)]);else while(++f<g)e.push([c,d]);return e}function bG(a){function g(d){return d.length<1?null:"M"+e(a(bH(this,d,b,c)),f)}var b=bI,c=bJ,d="linear",e=bK[d],f=.7;g.x=function(a){if(!arguments.length)return b;b=a;return g},g.y=function(a){if(!arguments.length)return c;c=a;return g},g.interpolate=function(a){if(!arguments.length)return d;e=bK[d=a];return g},g.tension=function(a){if(!arguments.length)return f;f=a;return g};return g}function bF(a){return a.endAngle}function bE(a){return a.startAngle}function bD(a){return a.outerRadius}function bC(a){return a.innerRadius}function bv(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function bu(a){return a.toPrecision(1)}function bt(a){return-Math.log(-a)/Math.LN10}function bs(a){return Math.log(a)/Math.LN10}function br(a,b,c,d){var e=[],f=[],g=0,h=a.length;while(++g<h)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=d3.bisect(a,b,1,a.length-1)-1;return f[c](e[c](b))}}function bq(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function bp(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(bn(a,b)[2])/Math.LN10+.01))+"f")}function bo(a,b){return d3.range.apply(d3,bn(a,b))}function bn(a,b){var c=bi(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+e*.5,c[2]=e;return c}function bm(a){a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1);return{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function bl(a,b){a.range=d3.rebind(a,b.range),a.rangeRound=d3.rebind(a,b.rangeRound),a.interpolate=d3.rebind(a,b.interpolate),a.clamp=d3.rebind(a,b.clamp);return a}function bk(){return Math}function bj(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],g;f<e&&(g=c,c=d,d=g,g=e,e=f,f=g),b=b(f-e),a[c]=b.floor(e),a[d]=b.ceil(f);return a}function bi(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function bh(){}function bf(){var a=null,b=bb,c=Infinity;while(b)b.flush?b=a?a.next=b.next:bb=b.next:(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function be(){var a,b=Date.now(),c=bb;while(c)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),c=c.next;var d=bf()-b;d>24?(isFinite(d)&&(clearTimeout(bd),bd=setTimeout(be,d)),bc=0):(bc=1,bg(be))}function ba(a){return typeof a=="function"?function(b,c,d){var e=a.call(this,b,c)+"";return d!=e&&d3.interpolate(d,e)}:(a=a+"",function(b,c,d){return d!=a&&d3.interpolate(d,a)})}function _(a){function n(b){var h=!0,l=-1;a.each(function(){if(i[++l]!==2){var a=(b-j[l])/k[l],n=this.__transition__,o,p,q=e[l];if(a<1){h=!1;if(a<0)return}else a=1;if(i[l]){if(!n||n.active!==c){i[l]=2;return}}else{if(!n||n.active>c){i[l]=2;return}i[l]=1,g.start.dispatch.apply(this,arguments),q=e[l]={},n.active=c;for(p in d)if(o=d[p].apply(this,arguments))q[p]=o}o=m(a);for(p in q)q[p].call(this,o);if(a===1){i[l]=2;if(n.active===c){var r=n.owner;r===c&&(delete this.__transition__,f&&this.parentNode&&this.parentNode.removeChild(this)),$=c,g.end.dispatch.apply(this,arguments),$=0,n.owner=r}}}});return h}var b={},c=$||++Z,d={},e=[],f=!1,g=d3.dispatch("start","end"),i=[],j=[],k=[],l,m=d3.ease("cubic-in-out");a.each(function(){(this.__transition__||(this.__transition__={})).owner=c}),b.delay=function(c){var d=Infinity,e=-1;typeof c=="function"?a.each(function(a,b){var f=j[++e]=+c.apply(this,arguments);f<d&&(d=f)}):(d=+c,a.each(function(a,b){j[++e]=d})),d3.timer(n,d);return b},b.duration=function(c){var d=-1;typeof c=="function"?(l=0,a.each(function(a,b){var e=k[++d]=+c.apply(this,arguments);e>l&&(l=e)})):(l=+c,a.each(function(a,b){k[++d]=l}));return b},b.ease=function(a){m=typeof a=="function"?a:d3.ease.apply(d3,arguments);return b},b.attrTween=function(a,c){function f(b,d){var e=c.call(this,b,d,this.getAttributeNS(a.space,a.local));return e&&function(b){this.setAttributeNS(a.space,a.local,e(b))}}function e(b,d){var e=c.call(this,b,d,this.getAttribute(a));return e&&function(b){this.setAttribute(a,e(b))}}d["attr."+a]=a.local?f:e;return b},b.attr=function(a,c){return b.attrTween(a,ba(c))},b.styleTween=function(a,c,e){function f(b,d){var f=c.call(this,b,d,window.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),e)}}arguments.length<3&&(e=null),d["style."+a]=f;return b},b.style=function(a,c,d){arguments.length<3&&(d=null);return b.styleTween(a,ba(c),d)},b.text=function(a){d.text=function(b,c){this.textContent=typeof a=="function"?a.call(this,b,c):a};return b},b.select=function(b){var c,d=_(a.select(b)).ease(m);c=-1,d.delay(function(a,b){return j[++c]}),c=-1,d.duration(function(a,b){return k[++c]});return d},b.selectAll=function(b){var c,d=_(a.selectAll(b)).ease(m);c=-1,d.delay(function(a,b){return j[b?c:++c]}),c=-1,d.duration(function(a,b){return k[b?c:++c]});return d},b.remove=function(){f=!0;return b},b.each=function(a,c){g[a].add(c);return b},b.call=h;return b.delay(0).duration(250)}function Y(a){return{__data__:a}}function X(a){arguments.length||(a=d3.ascending);return function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function W(a){function b(b){var c=[],d,e,f,g;for(var h=0,i=a.length;h<i;h++){f=a[h],c.push(d=[]),d.parentNode=f.parentNode;for(var j=0,k=f.length;j<k;j++)(g=f[j])?(d.push(e=b(f.parentNode)),e.__data__=g.__data__):d.push(null)}return V(c)}a.append=function(a){function d(b){return b.appendChild(document.createElementNS(a.space,a.local))}function c(b){return b.appendChild(document.createElement(a))}a=d3.ns.qualify(a);return b(a.local?d:c)},a.insert=function(a,c){function e(b){return b.insertBefore(document.createElementNS(a.space,a.local),S(c,b))}function d(b){return b.insertBefore(document.createElement(a),S(c,b))}a=d3.ns.qualify(a);return b(a.local?e:d)};return a}function V(a){function d(b){for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.length;f<g;f++){var h=e[f];if(h)return b.call(h,h.__data__,f)}}return null}function c(b){var c=[],d,e,f;for(var g=0,h=a.length;g<h;g++){e=a[g];for(var i=0,j=e.length;i<j;i++)if(f=e[i])c.push(d=b(f)),d.parentNode=f}return V(c)}function b(b){var c=[],d,e,f,g;for(var h=0,i=a.length;h<i;h++){f=a[h],c.push(d=[]),d.parentNode=f.parentNode;for(var j=0,k=f.length;j<k;j++)(g=f[j])?(d.push(e=b(g)),e&&"__data__"in g&&(e.__data__=g.__data__)):d.push(null)}return V(c)}a.select=function(a){return b(function(b){return S(a,b)})},a.selectAll=function(a){return c(function(b){return T(a,b)})},a.filter=function(b){var c=[],d,e,f;for(var g=0,h=a.length;g<h;g++){e=a[g],c.push(d=[]),d.parentNode=e.parentNode;for(var i=0,j=e.length;i<j;i++)(f=e[i])&&b.call(f,f.__data__,i)&&d.push(f)}return V(c)},a.map=function(b){var c,d;for(var e=0,f=a.length;e<f;e++){c=a[e];for(var g=0,h=c.length;g<h;g++)if(d=c[g])d.__data__=b.call(d,d.__data__,g)}return a},a.data=function(b,c){function g(a,b){var g=0,h=a.length,i=b.length,j=Math.min(h,i),k=Math.max(h,i),l=[],m=[],n=[],o,p;if(c){var q={},r=[],s,t=b.length;for(g=0;g<h;g++)s=c.call(o=a[g],o.__data__,g),s in q?n[t++]=o:q[s]=o,r.push(s);for(g=0;g<i;g++)o=q[s=c.call(b,p=b[g],g)],o?(o.__data__=p,l[g]=o,m[g]=n[g]=null):(m[g]=Y(p),l[g]=n[g]=null),delete q[s];for(g=0;g<h;g++)r[g]in q&&(n[g]=a[g])}else{for(;g<j;g++)o=a[g],p=b[g],o?(o.__data__=p,l[g]=o,m[g]=n[g]=null):(m[g]=Y(p),l[g]=n[g]=null);for(;g<i;g++)m[g]=Y(b[g]),l[g]=n[g]=null;for(;g<k;g++)n[g]=a[g],m[g]=l[g]=null}m.parentNode=l.parentNode=n.parentNode=a.parentNode,d.push(m),e.push(l),f.push(n)}var d=[],e=[],f=[],h=-1,i=a.length,j;if(typeof b=="function")while(++h<i)g(j=a[h],b.call(j,j.parentNode.__data__,h));else while(++h<i)g(j=a[h],b);var k=V(e);k.enter=function(){return W(d)},k.exit=function(){return V(f)};return k},a.each=function(b){for(var c=0,d=a.length;c<d;c++){var e=a[c];for(var f=0,g=e.length;f<g;f++){var h=e[f];h&&b.call(h,h.__data__,f)}}return a},a.empty=function(){return!d(function(){return!0})},a.node=function(){return d(function(){return this})},a.attr=function(b,c){function j(){var a=c.apply(this,arguments);a==null?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,a)}function i(){var a=c.apply(this,arguments);a==null?this.removeAttribute(b):this.setAttribute(b,a)}function h(){this.setAttributeNS(b.space,b.local,c)}function g(){this.setAttribute(b,c)}function f(){this.removeAttributeNS(b.space,b.local)}function e(){this.removeAttribute(b)}b=d3.ns.qualify(b);if(arguments.length<2)return d(b.local?function(){return this.getAttributeNS(b.space,b.local)}:function(){return this.getAttribute(b)});return a.each(c==null?b.local?f:e:typeof c=="function"?b.local?j:i:b.local?h:g)},a.classed=function(b,c){function i(){(c.apply(this,arguments)?f:h).call(this)}function h(){if(a=this.classList)return a.remove(b);var a=this.className,c=a.baseVal!=null,d=c?a.baseVal:a;d=g(d.replace(e," ")),c?a.baseVal=d:this.className=d}function f(){if(a=this.classList)return a.add(b);var a=this.className,c=a.baseVal!=null,d=c?a.baseVal:a;e.lastIndex=0,e.test(d)||(d=g(d+" "+b),c?a.baseVal=d:this.className=d)}var e=new RegExp("(^|\\s+)"+d3.requote(b)+"(\\s+|$)","g");if(arguments.length<2)return d(function(){if(a=this.classList)return a.contains(b);var a=this.className;e.lastIndex=0;return e.test(a.baseVal!=null?a.baseVal:a)});return a.each(typeof c=="function"?i:c?f:h)},a.style=function(b,c,e){function h(){var a=c.apply(this,arguments);a==null?this.style.removeProperty(b):this.style.setProperty(b,a,e)}function g(){this.style.setProperty(b,c,e)}function f(){this.style.removeProperty(b)}arguments.length<3&&(e="");if(arguments.length<2)return d(function(){return window.getComputedStyle(this,null).getPropertyValue(b)});return a.each(c==null?f:typeof c=="function"?h:g)},a.property=function(b,c){function g(){var a=c.apply(this,arguments);a==null?delete this[b]:this[b]=a}function f(){this[b]=c}function e(){delete this[b]}b=d3.ns.qualify(b);if(arguments.length<2)return d(function(){return this[b]});return a.each(c==null?e:typeof c=="function"?g:f)},a.text=function(b){function e(){this.textContent=b.apply(this,arguments)}function c(){this.textContent=b}if(arguments.length<1)return d(function(){return this.textContent});return a.each(typeof b=="function"?e:c)},a.html=function(b){function e(){this.innerHTML=b.apply(this,arguments)}function c(){this.innerHTML=b}if(arguments.length<1)return d(function(){return this.innerHTML});return a.each(typeof b=="function"?e:c)},a.append=function(a){function d(b){return b.appendChild(document.createElementNS(a.space,a.local))}function c(b){return b.appendChild(document.createElement(a))}a=d3.ns.qualify(a);return b(a.local?d:c)},a.insert=function(a,c){function e(b){return b.insertBefore(document.createElementNS(a.space,a.local),S(c,b))}function d(b){return b.insertBefore(document.createElement(a),S(c,b))}a=d3.ns.qualify(a);return b(a.local?e:d)},a.remove=function(){return a.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},a.sort=function(b){b=X.apply(this,arguments);for(var c=0,d=a.length;c<d;c++){var e=a[c];e.sort(b);for(var f=1,g=e.length,h=e[0];f<g;f++){var i=e[f];i&&(h&&h.parentNode.insertBefore(i,h.nextSibling),h=i)}}return a},a.on=function(b,c,d){arguments.length<3&&(d=!1);var e=b.indexOf("."),f=e===-1?b:b.substring(0,e),g="__on"+b;return a.each(function(a,b){function h(a){var d=d3.event;d3.event=a;try{c.call(this,e.__data__,b)}finally{d3.event=d}}this[g]&&this.removeEventListener(f,this[g],d),c&&this.addEventListener(f,this[g]=h,d);var e=this})},a.transition=function(){return _(a)},a.call=h;return a}function R(a,b,c){function g(a){return Math.round(f(a)*255)}function f(a){a>360?a-=360:a<0&&(a+=360);if(a<60)return d+(e-d)*a/60;if(a<180)return e;if(a<240)return d+(e-d)*(240-a)/60;return d}var d,e;a=a%360,a<0&&(a+=360),b=b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,e=c<=.5?c*(1+b):c+b-c*b,d=2*c-e;return H(g(a+120),g(a),g(a-120))}function Q(a,b,c){this.h=a,this.s=b,this.l=c}function P(a,b,c){return new Q(a,b,c)}function M(a){var b=parseFloat(a);return a.charAt(a.length-1)==="%"?Math.round(b*2.55):b}function L(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,g,h,i=(e+d)/2;f?(h=i<.5?f/(e+d):f/(2-e-d),a==e?g=(b-c)/f+(b<c?6:0):b==e?g=(c-a)/f+2:g=(a-b)/f+4,g*=60):h=g=0;return P(g,h,i)}function K(a,b,c){var d=0,e=0,f=0,g,h,i;g=/([a-z]+)\((.*)\)/i.exec(a);if(g){h=g[2].split(",");switch(g[1]){case"hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case"rgb":return b(M(h[0]),M(h[1]),M(h[2]))}}if(i=N[a])return b(i.r,i.g,i.b);a!=null&&a.charAt(0)==="#"&&(a.length===4?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):a.length===7&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),f=parseInt(f,16));return b(d,e,f)}function J(a){return a<16?"0"+a.toString(16):a.toString(16)}function I(a,b,c){this.r=a,this.g=b,this.b=c}function H(a,b,c){return new I(a,b,c)}function G(a,b){b=1/(b-(a=+a));return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function F(a,b){b=1/(b-(a=+a));return function(c){return(c-a)*b}}function E(a){return a in D||/\bcolor\b/.test(a)?d3.interpolateRgb:d3.interpolate}function B(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function A(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}}function z(a,b){var c;arguments.length<2&&(b=.45),arguments.length<1?(a=1,c=b/4):c=b/(2*Math.PI)*Math.asin(1/a);return function(d){return 1+a*Math.pow(2,10*-d)*Math.sin((d-c)*2*Math.PI/b)}}function y(a){return 1-Math.sqrt(1-a*a)}function x(a){return Math.pow(2,10*(a-1))}function w(a){return 1-Math.cos(a*Math.PI/2)}function v(a){return function(b){return Math.pow(b,a)}}function u(a){return a}function t(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function s(a){return function(b){return 1-a(1-b)}}function n(a){var b=a.lastIndexOf("."),c=b>=0?a.substring(b):(b=a.length,""),d=[];while(b>0)d.push(a.substring(b-=3,b+3));return d.reverse().join(",")+c}function m(a){return a+""}function j(a){var b={},c=[];b.add=function(a){for(var d=0;d<c.length;d++)if(c[d].listener==a)return b;c.push({listener:a,on:!0});return b},b.remove=function(a){for(var d=0;d<c.length;d++){var e=c[d];if(e.listener==a){e.on=!1,c=c.slice(0,d).concat(c.slice(d+1));break}}return b},b.dispatch=function(){var a=c;for(var b=0,d=a.length;b<d;b++){var e=a[b];e.on&&e.listener.apply(this,arguments)}};return b}function h(a){a.apply(this,(arguments[0]=this,arguments));return this}function g(a){return a.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function f(a){return a==null}function e(a){return a.length}function c(a){return Array.prototype.slice.call(a)}function b(a){var b=-1,c=a.length,d=[];while(++b<c)d.push(a[b]);return d}d3={version:"1.29.5"},Date.now||(Date.now=function(){return+(new Date)}),Object.create||(Object.create=function(a){function b(){}b.prototype=a;return new b});var a=c;try{a(document.documentElement.childNodes)[0].nodeType}catch(d){a=b}d3.functor=function(a){return typeof a=="function"?a:function(){return a}},d3.rebind=function(a,b){return function(){var c=b.apply(a,arguments);return arguments.length?a:c}},d3.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},d3.min=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){while(++c<d&&((e=a[c])==null||e!=e))e=undefined;while(++c<d)(f=a[c])!=null&&e>f&&(e=f)}else{while(++c<d&&((e=b.call(a,a[c],c))==null||e!=e))e=undefined;while(++c<d)(f=b.call(a,a[c],c))!=null&&e>f&&(e=f)}return e},d3.max=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){while(++c<d&&((e=a[c])==null||e!=e))e=undefined;while(++c<d)(f=a[c])!=null&&f>e&&(e=f)}else{while(++c<d&&((e=b.call(a,a[c],c))==null||e!=e))e=undefined;while(++c<d)(f=b.call(a,a[c],c))!=null&&f>e&&(e=f)}return e},d3.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(arguments.length===1)while(++f<d)isNaN(e=+a[f])||(c+=e);else while(++f<d)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c},d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=a[d-1],f=c-d;return f?e+f*(a[d]-e):e},d3.zip=function(){if(!(f=arguments.length))return[];for(var a=-1,b=d3.min(arguments,e),c=Array(b);++a<b;)for(var d=-1,f,g=c[a]=Array(f);++d<f;)g[d]=arguments[d][a];return c},d3.bisectLeft=function(a,b,c,d){arguments.length<3&&(c=0),arguments.length<4&&(d=a.length);while(c<d){var e=c+d>>1;a[e]<b?c=e+1:d=e}return c},d3.bisect=d3.bisectRight=function(a,b,c,d){arguments.length<3&&(c=0),arguments.length<4&&(d=a.length);while(c<d){var e=c+d>>1;b<a[e]?d=e:c=e+1}return c},d3.first=function(a,b){var c=0,d=a.length,e=a[0],f;arguments.length===1&&(b=d3.ascending);while(++c<d)b.call(a,e,f=a[c])>0&&(e=f);return e},d3.last=function(a,b){var c=0,d=a.length,e=a[0],f;arguments.length===1&&(b=d3.ascending);while(++c<d)b.call(a,e,f=a[c])<=0&&(e=f);return e},d3.nest=function(){function g(a,d){if(d>=b.length)return a;var e=[],f=c[d++],h;for(h in a)e.push({key:h,values:g(a[h],d)});f&&e.sort(function(a,b){return f(a.key,b.key)});return e}function f(c,g){if(g>=b.length)return e?e.call(a,c):d?c.sort(d):c;var h=-1,i=c.length,j=b[g++],k,l,m={};while(++h<i)(k=j(l=c[h]))in m?m[k].push(l):m[k]=[l];for(k in m)m[k]=f(m[k],g);return m}var a={},b=[],c=[],d,e;a.map=function(a){return f(a,0)},a.entries=function(a){return g(f(a,0),0)},a.key=function(c){b.push(c);return a},a.sortKeys=function(d){c[b.length-1]=d;return a},a.sortValues=function(b){d=b;return a},a.rollup=function(b){e=b;return a};return a},d3.keys=function(a){var b=[];for(var c in a)b.push(c);return b},d3.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},d3.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},d3.permute=function(a,b){var c=[],d=-1,e=b.length;while(++d<e)c[d]=a[b[d]];return c},d3.merge=function(a){return Array.prototype.concat.apply([],a)},d3.split=function(a,b){var c=[],d=[],e,g=-1,h=a.length;arguments.length<2&&(b=f);while(++g<h)b.call(d,e=a[g],g)?d=[]:(d.length||c.push(d),d.push(e));return c},d3.range=function(a,b,c){arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0));if((b-a)/c==Infinity)throw new Error("infinite range");var d=[],e=-1,f;if(c<0)while((f=a+c*++e)>b)d.push(f);else while((f=a+c*++e)<b)d.push(f);return d},d3.requote=function(a){return a.replace(i,"\\$&")};var i=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*Math.pow(10,b))*Math.pow(10,-b):Math.round(a)},d3.xhr=function(a,b,c){var d=new XMLHttpRequest;arguments.length<3?c=b:b&&d.overrideMimeType&&d.overrideMimeType(b),d.open("GET",a,!0),d.onreadystatechange=function(){d.readyState===4&&c(d.status<300?d:null)},d.send(null)},d3.text=function(a,b,c){function d(a){c(a&&a.responseText)}arguments.length<3&&(c=b,b=null),d3.xhr(a,b,d)},d3.json=function(a,b){d3.text(a,"application/json",function(a){b(a?JSON.parse(a):null)})},d3.html=function(a,b){d3.text(a,"text/html",function(a){if(a!=null){var c=document.createRange();c.selectNode(document.body),a=c.createContextualFragment(a)}b(a)})},d3.xml=function(a,b,c){function d(a){c(a&&a.responseXML)}arguments.length<3&&(c=b,b=null),d3.xhr(a,b,d)},d3.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qualify:function(a){var b=a.indexOf(":");return b<0?a:{space:d3.ns.prefix[a.substring(0,b)],local:a.substring(b+1)}}},d3.dispatch=function(a){var b={},c;for(var d=0,e=arguments.length;d<e;d++)c=arguments[d],b[c]=j(c);return b},d3.format=function(a){var b=k.exec(a),c=b[1]||" ",d=b[3]||"",e=b[5],f=+b[6],g=b[7],h=b[8],i=b[9],j=!1,o=!1;h&&(h=h.substring(1)),e&&(c="0",g&&(f-=Math.floor((f-1)/4)));switch(i){case"n":g=!0,i="g";break;case"%":j=!0,i="f";break;case"p":j=!0,i="r";break;case"d":o=!0,h="0"}i=l[i]||m;return function(a){var b=j?a*100:+a,k=b<0&&(b=-b)?"−":d;if(o&&b%1)return"";a=i(b,h);if(e){var l=a.length+k.length;l<f&&(a=Array(f-l+1).join(c)+a),g&&(a=n(a)),a=k+a}else{g&&(a=n(a)),a=k+a;var l=a.length;l<f&&(a=Array(f-l+1).join(c)+a)}j&&(a+="%");return a}};var k=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,l={g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){var c=1+Math.floor(1e-15+Math.log(a)/Math.LN10);return d3.round(a,b-c).toFixed(Math.max(0,Math.min(20,b-c)))}},o=v(2),p=v(3),q={linear:function(){return u},poly:v,quad:function(){return o},cubic:function(){return p},sin:function(){return w},exp:function(){return x},circle:function(){return y},elastic:z,back:A,bounce:function(){return B}},r={"in":function(a){return a},out:s,"in-out":t,"out-in":function(a){return t(s(a))}};d3.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return r[d](q[c].apply(null,Array.prototype.slice.call(arguments,1)))},d3.event=null,d3.interpolate=function(a,b){var c=d3.interpolators.length,d;while(--c>=0&&!(d=d3.interpolators[c](a,b)));return d},d3.interpolateNumber=function(a,b){b-=a;return function(c){return a+b*c}},d3.interpolateRound=function(a,b){b-=a;return function(c){return Math.round(a+b*c)}},d3.interpolateString=function(a,b){var c,d,e,f=0,g=0,h=[],i=[],j,k;C.lastIndex=0;for(d=0;c=C.exec(b);++d)c.index&&h.push(b.substring(f,g=c.index)),i.push({i:h.length,x:c[0]}),h.push(null),f=C.lastIndex;f<b.length&&h.push(b.substring(f));for(d=0,j=i.length;(c=C.exec(a))&&d<j;++d){k=i[d];if(k.x==c[0]){if(k.i)if(h[k.i+1]==null){h[k.i-1]+=k.x,h.splice(k.i,1);for(e=d+1;e<j;++e)i[e].i--}else{h[k.i-1]+=k.x+h[k.i+1],h.splice(k.i,2);for(e=d+1;e<j;++e)i[e].i-=2}else if(h[k.i+1]==null)h[k.i]=k.x;else{h[k.i]=k.x+h[k.i+1],h.splice(k.i+1,1);for(e=d+1;e<j;++e)i[e].i--}i.splice(d,1),j--,d--}else k.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(k.x))}while(d<j)k=i.pop(),h[k.i+1]==null?h[k.i]=k.x:(h[k.i]=k.x+h[k.i+1],h.splice(k.i+1,1)),j--;if(h.length===1)return h[0]==null?i[0].x:function(){return b};return function(a){for(d=0;d<j;++d)h[(k=i[d]).i]=k.x(a);return h.join("")}},d3.interpolateRgb=function(a,b){a=d3.rgb(a),b=d3.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"rgb("+Math.round(c+f*a)+","+Math.round(d+g*a)+","+Math.round(e+h*a)+")"}},d3.interpolateHsl=function(a,b){a=d3.hsl(a),b=d3.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return function(a){return R(c+f*a,d+g*a,e+h*a).toString()}},d3.interpolateArray=function(a,b){var c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length),h;for(h=0;h<g;++h)c.push(d3.interpolate(a[h],b[h]));for(;h<e;++h)d[h]=a[h];for(;h<f;++h)d[h]=b[h];return function(a){for(h=0;h<g;++h)d[h]=c[h](a);return d}},d3.interpolateObject=function(a,b){var c={},d={},e;for(e in a)e in b?c[e]=E(e)(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}};var C=/[-+]?(?:\d+\.\d+|\d+\.|\.\d+|\d+)(?:[eE][-]?\d+)?/g,D={background:1,fill:1,stroke:1};d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return typeof b=="string"&&d3.interpolateString(String(a),b)},function(a,b){return(typeof b=="string"?b in N||/^(#|rgb\(|hsl\()/.test(b):b instanceof I||b instanceof Q)&&d3.interpolateRgb(String(a),b)},function(a,b){return typeof b=="number"&&d3.interpolateNumber(+a,b)}],d3.rgb=function(a,b,c){return arguments.length===1?K(""+a,H,R):H(~~a,~~b,~~c)},I.prototype.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;if(!b&&!c&&!d)return H(e,e,e);b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e);return H(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))},I.prototype.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return H(Math.max(0,Math.floor(a*this.r)),Math.max(0,Math.floor(a*this.g)),Math.max(0,Math.floor(a*this.b)))},I.prototype.hsl=function(){return L(this.r,this.g,this.b)},I.prototype.toString=function(){return"#"+J(this.r)+J(this.g)+J(this.b)};var N={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var O in N)N[O]=K(N[O],H,R);d3.hsl=function(a,b,c){return arguments.length===1?K(""+a,L,P):P(+a,+b,+c)},Q.prototype.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return P(this.h,this.s,this.l/a)},Q.prototype.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return P(this.h,this.s,a*this.l)},Q.prototype.rgb=function(){return R(this.h,this.s,this.l)},Q.prototype.toString=function(){return"hsl("+this.h+","+this.s*100+"%,"+this.l*100+"%)"};var S=function(a,b){return b.querySelector(a)},T=function(b,c){return a(c.querySelectorAll(b))};typeof Sizzle=="function"&&(S=function(a,b){return Sizzle(a,b)[0]},T=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))});var U=V([[document]]);U[0].parentNode=document.documentElement,d3.select=function(a){return typeof a=="string"?U.select(a):V([[a]])},d3.selectAll=function(b){return typeof b=="string"?U.selectAll(b):V([a(b)])},d3.transition=U.transition;var Z=0,$=0,bb=null,bc,bd;d3.timer=function(a,b){var c=Date.now(),d=!1,e,f=bb;if(arguments.length<2)b=0;else if(!isFinite(b))return;while(f){if(f.callback===a){f.then=c,f.delay=b,d=!0;break}e=f,f=f.next}d||(bb={callback:a,then:c,delay:b,next:bb}),bc||(bd=clearTimeout(bd),bc=1,bg(be))},d3.timer.flush=function(){var a,b=Date.now(),c=bb;while(c)a=b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;bf()};var bg=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.scale={},d3.scale.linear=function(){function h(a){return e(a)}function g(){var g=a.length==2?bq:br,i=d?G:F;e=g(a,b,i,c),f=g(b,a,i,d3.interpolate);return h}var a=[0,1],b=[0,1],c=d3.interpolate,d=!1,e,f;h.invert=function(a){return f(a)},h.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return g()},h.range=function(a){if(!arguments.length)return b;b=a;return g()},h.rangeRound=function(a){return h.range(a).interpolate(d3.interpolateRound)},h.clamp=function(a){if(!arguments.length)return d;d=a;return g()},h.interpolate=function(a){if(!arguments.length)return c;c=a;return g()},h.ticks=function(b){return bo(a,b)},h.tickFormat=function(b){return bp(a,b)},h.nice=function(){bj(a,bm);return g()};return g()},d3.scale.log=function(){function d(c){return a(b(c))}var a=d3.scale.linear(),b=bs,c=b.pow;d.invert=function(b){return c(a.invert(b))},d.domain=function(e){if(!arguments.length)return a.domain().map(c);b=e[0]<0?bt:bs,c=b.pow,a.domain(e.map(b));return d},d.nice=function(){a.domain(bj(a.domain(),bk));return d},d.ticks=function(){var d=bi(a.domain()),e=[];if(d.every(isFinite)){var f=Math.floor(d[0]),g=Math.ceil(d[1]),h=c(d[0]),i=c(d[1]);if(b===bt){e.push(c(f));for(;f++<g;)for(var j=9;j>0;j--)e.push(c(f)*j)}else{for(;f<g;f++)for(var j=1;j<10;j++)e.push(c(f)*j);e.push(c(f))}for(f=0;e[f]<h;f++);for(g=e.length;e[g-1]>i;g--);e=e.slice(f,g)}return e},d.tickFormat=function(){return bu};return bl(d,a)},bs.pow=function(a){return Math.pow(10,a)},bt.pow=function(a){return-Math.pow(10,-a)},d3.scale.pow=function(){function e(b){return a(c(b))}var a=d3.scale.linear(),b=1,c=Number,d=c;e.invert=function(b){return d(a.invert(b))},e.domain=function(f){if(!arguments.length)return a.domain().map(d);c=bv(b),d=bv(1/b),a.domain(f.map(c));return e},e.ticks=function(a){return bo(e.domain(),a)},e.tickFormat=function(a){return bp(e.domain(),a)},e.nice=function(){return e.domain(bj(e.domain(),bm))},e.exponent=function(a){if(!arguments.length)return b;var c=e.domain();b=a;return e.domain(c)};return bl(e,a)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){function f(d){var e=d in b?b[d]:b[d]=a.push(d)-1;return c[e%c.length]}var a=[],b={},c=[],d=0,e=bh;f.domain=function(c){if(!arguments.length)return a;a=c,b={};var d=-1,g=-1,h=a.length;while(++d<h)c=a[d],c in b||(b[c]=++g);e();return f},f.range=function(a){if(!arguments.length)return c;c=a,e=bh;return f},f.rangePoints=function(b,g){arguments.length<2&&(g=0),(e=function(){var e=b[0],f=b[1],h=(f-e)/(a.length-1+g);c=a.length==1?[(e+f)/2]:d3.range(e+h*g/2,f+h/2,h),d=0})();return f},f.rangeBands=function(b,g){arguments.length<2&&(g=0),(e=function(){var e=b[0],f=b[1],h=(f-e)/(a.length+g);c=d3.range(e+h*g,f,h),d=h*(1-g)})();return f},f.rangeRoundBands=function(b,g){arguments.length<2&&(g=0),(e=function(){var e=b[0],f=b[1],h=f-e,i=Math.floor(h/(a.length+g)),j=h-(a.length-g)*i;c=d3.range(e+Math.round(j/2),f,i),d=Math.round(i*(1-g))})();return f},f.rangeBand=function(){return d};return f},d3.scale.category10=function(){return d3.scale.ordinal().range(bw)},d3.scale.category20=function(){return d3.scale.ordinal().range(bx)},d3.scale.category20b=function(){return d3.scale.ordinal().range(by)},d3.scale.category20c=function(){return d3.scale.ordinal().range(bz)};var bw=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],bx=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],by=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],bz=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){function e(a){if(isNaN(a=+a))return NaN;return b[d3.bisect(c,a)]}function d(){var d=0,e=a.length,f=b.length;c.length=Math.max(0,f-1);while(++d<f)c[d-1]=d3.quantile(a,d/f)}var a=[],b=[],c=[];e.domain=function(b){if(!arguments.length)return a;a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending),d();return e},e.range=function(a){if(!arguments.length)return b;b=a,d();return e},e.quantiles=function(){return c};return e},d3.scale.quantize=function(){function f(b){return e[Math.max(0,Math.min(d,Math.floor(c*(b-a))))]}var a=0,b=1,c=2,d=1,e=[0,1];f.domain=function(d){if(!arguments.length)return[a,b];a=+d[0],b=+d[d.length-1],c=e.length/(b-a);return f},f.range=function(g){if(!arguments.length)return e;e=g,c=e.length/(b-a),d=e.length-1;return f};return f},d3.svg={},d3.svg.arc=function(){function e(){var e=a.apply(this,arguments),f=b.apply(this,arguments),g=c.apply(this,arguments)+bA,h=d.apply(this,arguments)+bA,i=(h<g&&(i=g,g=h,h=i),h-g),j=i<Math.PI?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=bB?e?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+ -e+"A"+e+","+e+" 0 1,1 0,"+e+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":e?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+e*m+","+e*n+"A"+e+","+e+" 0 "+j+",0 "+e*k+","+e*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0"+"Z"}var a=bC,b=bD,c=bE,d=bF;e.innerRadius=function(b){if(!arguments.length)return a;a=d3.functor(b);return e},e.outerRadius=function(a){if(!arguments.length)return b;b=d3.functor(a);return e},e.startAngle=function(a){if(!arguments.length)return c;c=d3.functor(a);return e},e.endAngle=function(a){if(!arguments.length)return d;d=d3.functor(a);return e},e.centroid=function(){var e=(a.apply(this,arguments)+b.apply(this,arguments))/2,f=(c.apply(this,arguments)+d.apply(this,arguments))/2+bA;return[Math.cos(f)*e,Math.sin(f)*e]};return e};var bA=-Math.PI/2,bB=2*Math.PI-1e-6;d3.svg.line=function(){return bG(Object)};var bK={linear:bL,"step-before":bM,"step-after":bN,basis:bT,"basis-open":bU,"basis-closed":bV,bundle:bW,cardinal:bQ,"cardinal-open":bO,"cardinal-closed":bP,monotone:cd},bY=[0,2/3,1/3,0],bZ=[0,1/3,2/3,0],b$=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=bG(ce);a.radius=a.x,delete a.x,a.angle=a.y,delete a.y;return a},d3.svg.area=function(){return cf(Object)},d3.svg.area.radial=function(){var a=cf(ce);a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1;return a},d3.svg.chord=function(){function j(a,b,c,d){return"Q 0,0 "+d}function i(a,b){return"A"+a+","+a+" 0 0,1 "+b}function h(a,b){return a.a0==b.a0&&a.a1==b.a1}function g(a,b,f,g){var h=b.call(a,f,g),i=c.call(a,h,g),j=d.call(a,h,g)+bA,k=e.call(a,h,g)+bA;return{r:i,a0:j,a1:k,p0:[i*Math.cos(j),i*Math.sin(j)],p1:[i*Math.cos(k),i*Math.sin(k)]}}function f(c,d){var e=g(this,a,c,d),f=g(this,b,c,d);return"M"+e.p0+i(e.r,e.p1)+(h(e,f)?j(e.r,e.p1,e.r,e.p0):j(e.r,e.p1,f.r,f.p0)+i(f.r,f.p1)+j(f.r,f.p1,e.r,e.p0))+"Z"}var a=ci,b=cj,c=ck,d=bE,e=bF;f.radius=function(a){if(!arguments.length)return c;c=d3.functor(a);return f},f.source=function(b){if(!arguments.length)return a;a=d3.functor(b);return f},f.target=function(a){if(!arguments.length)return b;b=d3.functor(a);return f},f.startAngle=function(a){if(!arguments.length)return d;d=d3.functor(a);return f},f.endAngle=function(a){if(!arguments.length)return e;e=d3.functor(a);return f};return f},d3.svg.diagonal=function(){function d(d,e){var f=a.call(this,d,e),g=b.call(this,d,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];i=i.map(c);return"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var a=ci,b=cj,c=cn;d.source=function(b){if(!arguments.length)return a;a=d3.functor(b);return d},d.target=function(a){if(!arguments.length)return b;b=d3.functor(a);return d},d.projection=function(a){if(!arguments.length)return c;c=a;return d};return d},d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=cn,c=a.projection;a.projection=function(a){return arguments.length?c(co(b=a)):b};return a},d3.svg.mouse=function(a){return cq(a,d3.event)};var cp=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(b){var c=d3.event.touches;return c?a(c).map(function(a){var c=cq(b,a);c.identifier=a.identifier;return c}):[]},d3.svg.symbol=function(){function c(c,d){return(ct[a.call(this,c,d)]||ct.circle)(b.call(this,c,d))}var a=cs,b=cr;c.type=function(b){if(!arguments.length)return a;a=d3.functor(b);return c},c.size=function(a){if(!arguments.length)return b;b=d3.functor(a);return c};return c};var ct={circle:function(a){var b=Math.sqrt(a/Math.PI);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+ -b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"},cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+ -3*b+","+ -b+"H"+ -b+"V"+ -3*b+"H"+b+"V"+ -b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+ -b+"V"+b+"H"+ -3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*cv)),c=b*cv;return"M0,"+ -b+"L"+c+",0"+" 0,"+b+" "+ -c+",0"+"Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+ -b+","+ -b+"L"+b+","+ -b+" "+b+","+b+" "+ -b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/cu),c=b*cu/2;return"M0,"+c+"L"+b+","+ -c+" "+ -b+","+ -c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/cu),c=b*cu/2;return"M0,"+ -c+"L"+b+","+c+" "+ -b+","+c+"Z"}};d3.svg.symbolTypes=d3.keys(ct);var cu=Math.sqrt(3),cv=Math.tan(30*Math.PI/180)}();if(!com){var com={};com.modestmaps||(com.modestmaps={})}(function(a){a.extend=function(a,b){for(var c in b.prototype)typeof a.prototype[c]=="undefined"&&(a.prototype[c]=b.prototype[c]);return a},a.getFrame=function(){return function(a){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(+(new Date))},10)})(a)}}(),a.transformProperty=function(a){if(!!this.document){var b=document.documentElement.style;for(var c=0;c<a.length;c++)if(a[c]in b)return a[c];return!1}}(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),a.matrixString=function(b){b.scale*b.width%1&&(b.scale+=(1-b.scale*b.width%1)/b.width);if(a._browser.webkit3d)return"matrix3d("+[b.scale||"1","0,0,0,0",b.scale||"1","0,0","0,0,1,0",(b.x+(b.width*b.scale-b.width)/2).toFixed(4),(b.y+(b.height*b.scale-b.height)/2).toFixed(4),0,1].join(",")+")";var c=a.transformProperty=="MozTransform"?"px":"";return"matrix("+[b.scale||"1",0,0,b.scale||"1",b.x+(b.width*b.scale-b.width)/2+c,b.y+(b.height*b.scale-b.height)/2+c].join(",")+")"},a._browser=function(a){return{webkit:"WebKitCSSMatrix"in a,webkit3d:"WebKitCSSMatrix"in a&&"m11"in new WebKitCSSMatrix}}(this),a.moveElement=function(b,c){if(a.transformProperty){var d=a.matrixString(c);b[a.transformProperty]!==d&&(b.style[a.transformProperty]=b[a.transformProperty]=d)}else b.style.left=c.x+"px",b.style.top=c.y+"px",b.style.width=Math.ceil(c.width*c.scale)+"px",b.style.height=Math.ceil(c.height*c.scale)+"px"},a.cancelEvent=function(a){a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault();return!1},a.addEvent=function(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):(a.addEventListener(b,c,!1),b=="mousewheel"&&a.addEventListener("DOMMouseScroll",c,!1))},a.bind=function(a,b){var c=Array.prototype.slice,d=Function.prototype.bind;if(a.bind===d&&d)return d.apply(a,c.call(arguments,1));var e=c.call(arguments,2);return function(){return a.apply(b,e.concat(c.call(arguments)))}},a.removeEvent=function(a,b,c){a.detachEvent?(a.detachEvent("on"+b,a[b+c]),a[b+c]=null):(a.removeEventListener(b,c,!1),b=="mousewheel"&&a.removeEventListener("DOMMouseScroll",c,!1))},a.getStyle=function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},a.Point=function(a,b){this.x=parseFloat(a),this.y=parseFloat(b)},a.Point.prototype={x:0,y:0,toString:function(){return"("+this.x.toFixed(3)+", "+this.y.toFixed(3)+")"}},a.Point.distance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)},a.Point.interpolate=function(b,c,d){var e=b.x+(c.x-b.x)*d,f=b.y+(c.y-b.y)*d;return new a.Point(e,f)},a.Coordinate=function(a,b,c){this.row=a,this.column=b,this.zoom=c},a.Coordinate.prototype={row:0,column:0,zoom:0,toString:function(){return"("+this.row.toFixed(3)+", "+this.column.toFixed(3)+" @"+this.zoom.toFixed(3)+")"},toKey:function(){return[this.zoom,this.row,this.column].join(",")},copy:function(){return new a.Coordinate(this.row,this.column,this.zoom)},container:function(){return new a.Coordinate(Math.floor(this.row),Math.floor(this.column),Math.floor(this.zoom))},zoomTo:function(b){var c=Math.pow(2,b-this.zoom);return new a.Coordinate(this.row*c,this.column*c,b)},zoomBy:function(b){var c=Math.pow(2,b);return new a.Coordinate(this.row*c,this.column*c,this.zoom+b)},up:function(b){b===undefined&&(b=1);return new a.Coordinate(this.row-b,this.column,this.zoom)},right:function(b){b===undefined&&(b=1);return new a.Coordinate(this.row,this.column+b,this.zoom)},down:function(b){b===undefined&&(b=1);return new a.Coordinate(this.row+b,this.column,this.zoom)},left:function(b){b===undefined&&(b=1);return new a.Coordinate(this.row,this.column-b,this.zoom)}},a.Location=function(a,b){this.lat=parseFloat(a),this.lon=parseFloat(b)},a.Location.prototype={lat:0,lon:0,toString:function(){return"("+this.lat.toFixed(3)+", "+this.lon.toFixed(3)+")"}},a.Location.distance=function(a,b,c){c||(c=6378e3);var d=Math.PI/180,e=a.lat*d,f=a.lon*d,g=b.lat*d,h=b.lon*d,i=Math.cos(e)*Math.cos(f)*Math.cos(g)*Math.cos(h),j=Math.cos(e)*Math.sin(f)*Math.cos(g)*Math.sin(h),k=Math.sin(e)*Math.sin(g);return Math.acos(i+j+k)*c},a.Location.interpolate=function(b,c,d){if(b.lat===c.lat&&b.lon===c.lon)return new a.Location(b.lat,b.lon);var e=Math.PI/180,f=b.lat*e,g=b.lon*e,h=c.lat*e,i=c.lon*e,j=2*Math.asin(Math.sqrt(Math.pow(Math.sin((f-h)/2),2)+Math.cos(f)*Math.cos(h)*Math.pow(Math.sin((g-i)/2),2))),k=Math.atan2(Math.sin(g-i)*Math.cos(h),Math.cos(f)*Math.sin(h)-Math.sin(f)*Math.cos(h)*Math.cos(g-i))/-(Math.PI/180);k=k<0?360+k:k;var l=Math.sin((1-d)*j)/Math.sin(j),m=Math.sin(d*j)/Math.sin(j),n=l*Math.cos(f)*Math.cos(g)+m*Math.cos(h)*Math.cos(i),o=l*Math.cos(f)*Math.sin(g)+m*Math.cos(h)*Math.sin(i),p=l*Math.sin(f)+m*Math.sin(h),q=Math.atan2(p,Math.sqrt(Math.pow(n,2)+Math.pow(o,2))),r=Math.atan2(o,n);return new a.Location(q/e,r/e)},a.Transformation=function(a,b,c,d,e,f){this.ax=a,this.bx=b,this.cx=c,this.ay=d,this.by=e,this.cy=f},a.Transformation.prototype={ax:0,bx:0,cx:0,ay:0,by:0,cy:0,transform:function(b){return new a.Point(this.ax*b.x+this.bx*b.y+this.cx,this.ay*b.x+this.by*b.y+this.cy)},untransform:function(b){return new a.Point((b.x*this.by-b.y*this.bx-this.cx*this.by+this.cy*this.bx)/(this.ax*this.by-this.ay*this.bx),(b.x*this.ay-b.y*this.ax-this.cx*this.ay+this.cy*this.ax)/(this.bx*this.ay-this.by*this.ax))}},a.deriveTransformation=function(b,c,d,e,f,g,h,i,j,k,l,m){var n=a.linearSolution(b,c,d,f,g,h,j,k,l),o=a.linearSolution(b,c,e,f,g,i,j,k,m);return new a.Transformation(n[0],n[1],n[2],o[0],o[1],o[2])},a.linearSolution=function(a,b,c,d,e,f,g,h,i){a=parseFloat(a),b=parseFloat(b),c=parseFloat(c),d=parseFloat(d),e=parseFloat(e),f=parseFloat(f),g=parseFloat(g),h=parseFloat(h),i=parseFloat(i);var j=((f-i)*(b-e)-(c-f)*(e-h))/((d-g)*(b-e)-(a-d)*(e-h)),k=((f-i)*(a-d)-(c-f)*(d-g))/((e-h)*(a-d)-(b-e)*(d-g)),l=c-a*j-b*k;return[j,k,l]},a.Projection=function(b,c){c||(c=new a.Transformation(1,0,0,0,1,0)),this.zoom=b,this.transformation=c},a.Projection.prototype={zoom:0,transformation:null,rawProject:function(a){throw"Abstract method not implemented by subclass."},rawUnproject:function(a){throw"Abstract method not implemented by subclass."},project:function(a){a=this.rawProject(a),this.transformation&&(a=this.transformation.transform(a));return a},unproject:function(a){this.transformation&&(a=this.transformation.untransform(a)),a=this.rawUnproject(a);return a},locationCoordinate:function(b){var c=new a.Point(Math.PI*b.lon/180,Math.PI*b.lat/180);c=this.project(c);return new a.Coordinate(c.y,c.x,this.zoom)},coordinateLocation:function(b){b=b.zoomTo(this.zoom);var c=new a.Point(b.column,b.row);c=this.unproject(c);return new a.Location(180*c.y/Math.PI,180*c.x/Math.PI)}},a.LinearProjection=function(b,c){a.Projection.call(this,b,c)},a.LinearProjection.prototype={rawProject:function(b){return new a.Point(b.x,b.y)},rawUnproject:function(b){return new a.Point(b.x,b.y)}},a.extend(a.LinearProjection,a.Projection),a.MercatorProjection=function(b,c){a.Projection.call(this,b,c)},a.MercatorProjection.prototype={rawProject:function(b){return new a.Point(b.x,Math.log(Math.tan(.25*Math.PI+.5*b.y)))},rawUnproject:function(b){return new a.Point(b.x,2*Math.atan(Math.pow(Math.E,b.y))-.5*Math.PI)}},a.extend(a.MercatorProjection,a.Projection),a.MapProvider=function(a){a&&(this.getTileUrl=a)},a.MapProvider.prototype={projection:new a.MercatorProjection(0,a.deriveTransformation(-Math.PI,Math.PI,0,0,Math.PI,Math.PI,1,0,-Math.PI,-Math.PI,0,1)),tileWidth:256,tileHeight:256,topLeftOuterLimit:new a.Coordinate(0,0,0),bottomRightInnerLimit:(new a.Coordinate(1,1,0)).zoomTo(18),getTileUrl:function(a){throw"Abstract method not implemented by subclass."},locationCoordinate:function(a){return this.projection.locationCoordinate(a)},coordinateLocation:function(a){return this.projection.coordinateLocation(a)},outerLimits:function(){return[this.topLeftOuterLimit.copy(),this.bottomRightInnerLimit.copy()]},setZoomRange:function(a,b){this.topLeftOuterLimit=this.topLeftOuterLimit.zoomTo(a),this.bottomRightInnerLimit=this.bottomRightInnerLimit.zoomTo(b)},sourceCoordinate:function(b){var c=this.topLeftOuterLimit.zoomTo(b.zoom),d=this.bottomRightInnerLimit.zoomTo(b.zoom),e=d.row-c.row;if(b.row<0|b.row>=e)return null;var f=d.column-c.column,g=b.column%f;while(g<0)g+=f;return new a.Coordinate(b.row,g,b.zoom)}},a.TemplatedMapProvider=function(b,c){a.MapProvider.call(this,function(a){a=this.sourceCoordinate(a);if(!a)return null;var d=b;if(c&&c.length&&d.indexOf("{S}")>=0){var e=parseInt(a.zoom+a.row+a.column,10)%c.length;d=d.replace("{S}",c[e])}return d.replace("{Z}",a.zoom.toFixed(0)).replace("{X}",a.column.toFixed(0)).replace("{Y}",a.row.toFixed(0))})},a.extend(a.TemplatedMapProvider,a.MapProvider),a.getMousePoint=function(b,c){var d=new a.Point(b.clientX,b.clientY);d.x+=document.body.scrollLeft+document.documentElement.scrollLeft,d.y+=document.body.scrollTop+document.documentElement.scrollTop;for(var e=c.parent;e;e=e.offsetParent)d.x-=e.offsetLeft,d.y-=e.offsetTop;return d},a.MouseWheelHandler=function(a){a!==undefined&&this.init(a)},a.MouseWheelHandler.prototype={init:function(b){this.map=b,a.addEvent(b.parent,"mousewheel",a.bind(this.mouseWheel,this))},mouseWheel:function(b){var c=0;this.prevTime=this.prevTime||(new Date).getTime(),b.wheelDelta?c=b.wheelDelta:b.detail&&(c=-b.detail);var d=(new Date).getTime()-this.prevTime;if(Math.abs(c)>0&&d>200){var e=a.getMousePoint(b,this.map);this.map.zoomByAbout(c>0?1:-1,e),this.prevTime=(new Date).getTime()}return a.cancelEvent(b)}},a.DoubleClickHandler=function(a){a!==undefined&&this.init(a)},a.DoubleClickHandler.prototype={init:function(b){this.map=b,a.addEvent(b.parent,"dblclick",this._doubleClick=a.bind(this.doubleClick,this))},doubleClick:function(b){var c=a.getMousePoint(b,this.map);this.map.zoomByAbout(b.shiftKey?-1:1,c);return a.cancelEvent(b)}},a.DragHandler=function(a){a!==undefined&&this.init(a)},a.DragHandler.prototype={init:function(b){this.map=b,a.addEvent(b.parent,"mousedown",a.bind(this.mouseDown,this))},mouseDown:function(b){a.addEvent(document,"mouseup",this._mouseUp=a.bind(this.mouseUp,this)),a.addEvent(document,"mousemove",this._mouseMove=a.bind(this.mouseMove,this)),this.prevMouse=new a.Point(b.clientX,b.clientY),this.map.parent.style.cursor="move";return a.cancelEvent(b)},mouseMove:function(b){this.prevMouse&&(this.map.panBy(b.clientX-this.prevMouse.x,b.clientY-this.prevMouse.y),this.prevMouse.x=b.clientX,this.prevMouse.y=b.clientY,this.prevMouse.t=+(new Date));return a.cancelEvent(b)},mouseUp:function(b){a.removeEvent(document,"mouseup",this._mouseUp),a.removeEvent(document,"mousemove",this._mouseMove),this.prevMouse=null,this.map.parent.style.cursor="";return a.cancelEvent(b)}},a.MouseHandler=function(a){a!==undefined&&this.init(a)},a.MouseHandler.prototype={init:function(b){this.map=b,new a.DragHandler(b),new a.DoubleClickHandler(b),new a.MouseWheelHandler(b)}},a.TouchHandler=function(){},a.TouchHandler.prototype={maxTapTime:250,maxTapDistance:30,maxDoubleTapDelay:350,locations:{},taps:[],wasPinching:!1,lastPinchCenter:null,init:function(b,c){this.map=b,c=c||{},a.addEvent(b.parent,"touchstart",a.bind(this.touchStartMachine,this)),a.addEvent(b.parent,"touchmove",a.bind(this.touchMoveMachine,this)),a.addEvent(b.parent,"touchend",a.bind(this.touchEndMachine,this)),this.options={},this.options.snapToZoom=c.snapToZoom||!0},updateTouches:function(a){for(var b=0;b<a.touches.length;b+=1){var c=a.touches[b];if(c.identifier in this.locations){var d=this.locations[c.identifier];d.x=c.screenX,d.y=c.screenY,d.scale=a.scale}else this.locations[c.identifier]={scale:a.scale,startPos:{x:c.screenX,y:c.screenY},x:c.screenX,y:c.screenY,time:(new Date).getTime()}}},sameTouch:function(a,b){return a&&a.touch&&b.identifier==a.touch.identifier},touchStartMachine:function(b){this.updateTouches(b);return a.cancelEvent(b)},touchMoveMachine:function(b){switch(b.touches.length){case 1:this.onPanning(b.touches[0]);break;case 2:this.onPinching(b)}this.updateTouches(b);return a.cancelEvent(b)},touchEndMachine:function(b){var c=(new Date).getTime();b.touches.length==0&&this.wasPinching&&this.onPinched(this.lastPinchCenter);for(var d=0;d<b.changedTouches.length;d+=1){var e=b.changedTouches[d],f=this.locations[e.identifier];if(!f||f.wasPinch)continue;var g={x:e.screenX,y:e.screenY},h=c-f.time,i=a.Point.distance(g,f.startPos);i>this.maxTapDistance||(h>this.maxTapTime?(g.end=c,g.duration=h,this.onHold(g)):(g.time=c,this.onTap(g)))}var j={};for(var k=0;k<b.touches.length;k++)j[b.touches[k].identifier]=!0;for(var l in this.locations)l in j||delete j[l];return a.cancelEvent(b)},onHold:function(a){},onTap:function(a){this.taps.length&&a.time-this.taps[0].time<this.maxDoubleTapDelay?(this.onDoubleTap(a),this.taps=[]):this.taps=[a]},onDoubleTap:function(b){var c=this.map.getZoom(),d=Math.round(c)+1,e=d-c,f=new a.Point(b.x,b.y);this.map.zoomByAbout(e,f)},onPanning:function(a){var b={x:a.screenX,y:a.screenY},c=this.locations[a.identifier];this.map.panBy(b.x-c.x,b.y-c.y)},onPinching:function(b){var c=b.touches[0],d=b.touches[1],e=new a.Point(c.screenX,c.screenY),f=new a.Point(d.screenX,d.screenY),g=this.locations[c.identifier],h=this.locations[d.identifier];g.wasPinch=!0,h.wasPinch=!0;var i=a.Point.interpolate(e,f,.5);this.map.zoomByAbout(Math.log(b.scale)/Math.LN2-Math.log(g.scale)/Math.LN2,i);var j=a.Point.interpolate(g,h,.5);this.map.panBy(i.x-j.x,i.y-j.y),this.wasPinching=!0,this.lastPinchCenter=i},onPinched:function(a){if(this.options.snapToZoom){var b=this.map.getZoom(),c=Math.round(b);this.map.zoomByAbout(c-b,a)}this.wasPinching=!1}},a.CallbackManager=function(a,b){this.owner=a,this.callbacks={};for(var c=0;c<b.length;c++)this.callbacks[b[c]]=[]},a.CallbackManager.prototype={owner:null,callbacks:null,addCallback:function(a,b){typeof b=="function"&&this.callbacks[a]&&this.callbacks[a].push(b)},removeCallback:function(a,b){if(typeof b=="function"&&this.callbacks[a]){var c=this.callbacks[a],d=c.length;for(var e=0;e<d;e++)if(c[e]===b){c.splice(e,1);break}}},dispatchCallback:function(a,b){if(this.callbacks[a])for(var c=0;c<this.callbacks[a].length;c+=1)try{this.callbacks[a][c](this.owner,b)}catch(d){}}},a.RequestManager=function(b){this.loadingBay=document.createDocumentFragment(),this.requestsById={},this.openRequestCount=0,this.maxOpenRequests=4,this.requestQueue=[],this.callbackManager=new a.CallbackManager(this,["requestcomplete"])},a.RequestManager.prototype={loadingBay:null,requestsById:null,requestQueue:null,openRequestCount:null,maxOpenRequests:null,callbackManager:null,addCallback:function(a,b){this.callbackManager.addCallback(a,b)},removeCallback:function(a,b){this.callbackManager.removeCallback(a,b)},dispatchCallback:function(a,b){this.callbackManager.dispatchCallback(a,b)},clear:function(){this.clearExcept({})},clearExcept:function(a){for(var b=0;b<this.requestQueue.length;b++){var c=this.requestQueue[b];c&&!(c.key in a)&&(this.requestQueue[b]=null)}var d=this.loadingBay.childNodes;for(var e=d.length-1;e>=0;e--){var f=d[e];f.id in a||(this.loadingBay.removeChild(f),this.openRequestCount--,f.src=f.coord=f.onload=f.onerror=null)}for(var g in this.requestsById)if(this.requestsById.hasOwnProperty(g)&&!(g in a)){var c=this.requestsById[g];delete this.requestsById[g],c!==null&&(c=c.key=c.coord=c.url=null)}},hasRequest:function(a){return a in this.requestsById},requestTile:function(a,b,c){if(!(a in this.requestsById)){var d={key:a,coord:b.copy(),url:c};this.requestsById[a]=d,c&&this.requestQueue.push(d)}},getProcessQueue:function(){if(!this._processQueue){var a=this;this._processQueue=function(){a.processQueue()}}return this._processQueue},processQueue:function(a){a&&this.requestQueue.length>8&&this.requestQueue.sort(a);while(this.openRequestCount<this.maxOpenRequests&&this.requestQueue.length>0){var b=this.requestQueue.pop();if(b){this.openRequestCount++;var c=document.createElement("img");c.id=b.key,c.style.position="absolute",c.coord=b.coord,this.loadingBay.appendChild(c),c.onload=c.onerror=this.getLoadComplete(),c.src=b.url,b=b.key=b.coord=b.url=null}}},_loadComplete:null,getLoadComplete:function(){if(!this._loadComplete){var a=this;this._loadComplete=function(c){c=c||window.event;var d=c.srcElement||c.target;d.onload=d.onerror=null,a.loadingBay.removeChild(d),a.openRequestCount--,delete a.requestsById[d.id],c.type==="load"&&(d.complete||d.readyState&&d.readyState=="complete")?a.dispatchCallback("requestcomplete",d):d.src=null,setTimeout(a.getProcessQueue(),0)}}return this._loadComplete}},a.Map=function(b,c,d,e){if(typeof b=="string"){b=document.getElementById(b);if(!b)throw"The ID provided to modest maps could not be found."}this.parent=b,this.parent.style.padding="0",this.parent.style.overflow="hidden";var f=a.getStyle(this.parent,"position");f!="relative"&&f!="absolute"&&(this.parent.style.position="relative");if(!d){var g=this.parent.offsetWidth,h=this.parent.offsetHeight;g||(g=640,this.parent.style.width=g+"px"),h||(h=480,this.parent.style.height=h+"px"),d=new a.Point(g,h);var i=this;a.addEvent(window,"resize",function(b){i.dimensions=new a.Point(i.parent.offsetWidth,i.parent.offsetHeight),i.draw(),i.dispatchCallback("resized",[i.dimensions])})}else this.parent.style.width=Math.round(d.x)+"px",this.parent.style.height=Math.round(d.y)+"px";this.dimensions=d,this.requestManager=new a.RequestManager(this.parent),this.requestManager.addCallback("requestcomplete",this.getTileComplete()),this.layers={},this.layerParent=document.createElement("div"),this.layerParent.id=this.parent.id+"-layers",this.layerParent.style.cssText="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0; padding: 0; z-index: 0",this.parent.appendChild(this.layerParent),this.coordinate=new a.Coordinate(.5,.5,0),this.setProvider(c),this.enablePyramidLoading=!1,this.callbackManager=new a.CallbackManager(this,["zoomed","panned","centered","extentset","resized","drawn"]);if(e===undefined)this.eventHandlers=[],this.eventHandlers.push(new a.MouseHandler(this));else{this.eventHandlers=e;if(e instanceof Array)for(var j=0;j<e.length;j++)e[j].init(this)}},a.Map.prototype={parent:null,provider:null,dimensions:null,coordinate:null,tiles:null,layers:null,layerParent:null,requestManager:null,tileCacheSize:null,maxTileCacheSize:null,recentTiles:null,recentTilesById:null,recentTileSize:null,callbackManager:null,eventHandlers:null,toString:function(){return"Map(#"+this.parent.id+")"},addCallback:function(a,b){this.callbackManager.addCallback(a,b)},removeCallback:function(a,b){this.callbackManager.removeCallback(a,b)},dispatchCallback:function(a,b){this.callbackManager.dispatchCallback(a,b)},zoomBy:function(b){var c=this;this.coordinate=this.enforceLimits(this.coordinate.zoomBy(b)),a.getFrame(function(){c.draw()}),this.dispatchCallback("zoomed",b);return this},zoomIn:function(){return this.zoomBy(1)},zoomOut:function(){return this.zoomBy(-1)},setZoom:function(a){return this.zoomBy(a-this.coordinate.zoom)},zoomByAbout:function(a,b){var c=this.pointLocation(b);this.coordinate=this.enforceLimits(this.coordinate.zoomBy(a));var d=this.locationPoint(c);this.dispatchCallback("zoomed",a);return this.panBy(b.x-d.x,b.y-d.y)},panBy:function(b,c){var d=this;this.coordinate.column-=b/this.provider.tileWidth,this.coordinate.row-=c/this.provider.tileHeight,this.coordinate=this.enforceLimits(this.coordinate),a.getFrame(function(){d.draw()}),this.dispatchCallback("panned",[b,c]);return this},panLeft:function(){return this.panBy(100,0)},panRight:function(){return this.panBy(-100,0)},panDown:function(){return this.panBy(0,-100)},panUp:function(){return this.panBy(0,100)},setCenter:function(a){return this.setCenterZoom(a,this.coordinate.zoom)},setCenterZoom:function(a,b){this.coordinate=this.provider.locationCoordinate(a).zoomTo(parseFloat(b)||0),this.draw(),this.dispatchCallback("centered",[a,b]);return this},setExtent:function(b){var c,d;for(var e=0;e<b.length;e++){var f=this.provider.locationCoordinate(b[e]);c?(c.row=Math.min(c.row,f.row),c.column=Math.min(c.column,f.column),c.zoom=Math.min(c.zoom,f.zoom),d.row=Math.max(d.row,f.row),d.column=Math.max(d.column,f.column),d.zoom=Math.max(d.zoom,f.zoom)):(c=f.copy(),d=f.copy())}var g=this.dimensions.x+1,h=this.dimensions.y+1,i=(d.column-c.column)/(g/this.provider.tileWidth),j=Math.log(i)/Math.log(2),k=c.zoom-Math.ceil(j),l=(d.row-c.row)/(h/this.provider.tileHeight),m=Math.log(l)/Math.log(2),n=c.zoom-Math.ceil(m),o=Math.min(k,n);o=Math.min(o,this.provider.outerLimits()[1].zoom),o=Math.max(o,this.provider.outerLimits()[0].zoom);var p=(c.row+d.row)/2,q=(c.column+d.column)/2,r=c.zoom;this.coordinate=(new a.Coordinate(p,q,r)).zoomTo(o),this.draw(),this.dispatchCallback("extentset",b);return this},setSize:function(b,c){b.hasOwnProperty("x")&&b.hasOwnProperty("y")?this.dimensions=b:c!==undefined&&!isNaN(c)&&(this.dimensions=new a.Point(b,c)),this.parent.style.width=Math.round(this.dimensions.x)+"px",this.parent.style.height=Math.round(this.dimensions.y)+"px",this.draw(),this.dispatchCallback("resized",[this.dimensions]);return this},coordinatePoint:function(b){b.zoom!=this.coordinate.zoom&&(b=b.zoomTo(this.coordinate.zoom));var c=new a.Point(this.dimensions.x/2,this.dimensions.y/2);c.x+=this.provider.tileWidth*(b.column-this.coordinate.column),c.y+=this.provider.tileHeight*(b.row-this.coordinate.row);return c},pointCoordinate:function(a){var b=this.coordinate.copy();b.column+=(a.x-this.dimensions.x/2)/this.provider.tileWidth,b.row+=(a.y-this.dimensions.y/2)/this.provider.tileHeight;return b},locationPoint:function(a){return this.coordinatePoint(this.provider.locationCoordinate(a))},pointLocation:function(a){return this.provider.coordinateLocation(this.pointCoordinate(a))},getExtent:function(){var b=[];b.push(this.pointLocation(new a.Point(0,0))),b.push(this.pointLocation(this.dimensions));return b},getCenter:function(){return this.provider.coordinateLocation(this.coordinate)},getZoom:function(){return this.coordinate.zoom},setProvider:function(a){var b=!1;this.provider===null&&(b=!0);if(!b){this.requestManager.clear();for(var c in this.layers)if(this.layers.hasOwnProperty(c)){var d=this.layers[c];while(d.firstChild)d.removeChild(d.firstChild)}}this.tiles={},this.tileCacheSize=0,this.maxTileCacheSize=64,this.recentTiles=[],this.recentTilesById={},this.provider=a,b||this.draw();return this},enforceLimits:function(a){a=a.copy();var b=this.provider.outerLimits();if(b){var c=b[0].zoom,d=b[1].zoom;a.zoom<c?a=a.zoomTo(c):a.zoom>d&&(a=a.zoomTo(d))}return a},draw:function(){this.coordinate=this.enforceLimits(this.coordinate);var b=Math.round(this.coordinate.zoom),c=this.pointCoordinate(new a.Point(0,0)).zoomTo(b).container(),d=this.pointCoordinate(this.dimensions).zoomTo(b).container().right().down(),e=0;e&&(c=c.left(e).up(e),d=d.right(e).down(e));var f={},g=this.createOrGetLayer(c.zoom),h=c.copy();for(h.column=c.column;h.column<=d.column;h.column+=1)for(h.row=c.row;h.row<=d.row;h.row+=1){var i=h.toKey();f[i]=!0;if(i in this.tiles){var j=this.tiles[i];j.parentNode!=g&&g.appendChild(j)}else{if(!this.requestManager.hasRequest(i)){var k=this.provider.getTileUrl(h);this.requestManager.requestTile(i,h,k)}var l=!1,m=h.zoom;for(var n=1;n<=m;n++){var o=h.zoomBy(-n).container(),p=o.toKey();if(this.enablePyramidLoading){f[p]=!0;var q=this.createOrGetLayer(o.zoom);if(p in this.tiles){var r=this.tiles[p];r.parentNode!=q&&q.appendChild(r)}else this.requestManager.hasRequest(p)||this.requestManager.requestTile(p,o,this.provider.getTileUrl(o))}else if(p in this.tiles){f[p]=!0,l=!0;break}}if(!l&&!this.enablePyramidLoading){var s=h.zoomBy(1);f[s.toKey()]=!0,s.column+=1,f[s.toKey()]=!0,s.row+=1,f[s.toKey()]=!0,s.column-=1,f[s.toKey()]=!0}}}for(var t in this.layers)if(this.layers.hasOwnProperty(t)){var u=parseInt(t,10);if(u>=c.zoom-5&&u<c.zoom+2)continue;var v=this.layers[t];v.style.display="none";var w=v.getElementsByTagName("img");for(var x=w.length-1;x>=0;x--)v.removeChild(w[x])}var y=(new Date).getTime(),z=c.zoom-5,A=c.zoom+2;for(var B=z;B<A;B++){var v=this.layers[B];if(!v)continue;var C=1,D=this.coordinate.copy(),w=v.getElementsByTagName("img");w.length>0?(v.style.display="block",C=Math.pow(2,this.coordinate.zoom-B),D=D.zoomTo(B)):v.style.display="none";var E=this.provider.tileWidth*C,F=this.provider.tileHeight*C,G=new a.Point(this.dimensions.x/2,this.dimensions.y/2);for(var x=w.length-1;x>=0;x--){var j=w[x];f[j.id]?(a.moveElement(j,{x:Math.round(G.x+(j.coord.column-D.column)*E),y:Math.round(G.y+(j.coord.row-D.row)*F),scale:C,width:this.provider.tileWidth,height:this.provider.tileHeight}),this.recentTilesById[j.id].lastTouchedTime=y):v.removeChild(j)}}this.requestManager.clearExcept(f),this.requestManager.processQueue(this.getCenterDistanceCompare()),this.checkCache(),this.dispatchCallback("drawn")},_tileComplete:null,getTileComplete:function(){if(!this._tileComplete){var b=this;this._tileComplete=function(c,d){b.tiles[d.id]=d,b.tileCacheSize++;var e={id:d.id,lastTouchedTime:(new Date).getTime()};b.recentTilesById[d.id]=e,b.recentTiles.push(e);var f=b.coordinate.zoomTo(d.coord.zoom),g=Math.pow(2,b.coordinate.zoom-d.coord.zoom),h=b.dimensions.x/2+(d.coord.column-f.column)*b.provider.tileWidth*g,i=b.dimensions.y/2+(d.coord.row-f.row)*b.provider.tileHeight*g;a.moveElement(d,{x:Math.round(h),y:Math.round(i),scale:g,width:b.provider.tileWidth,height:b.provider.tileHeight});var j=b.layers[d.coord.zoom];j.appendChild(d),d.className="map-tile-loaded",Math.round(b.coordinate.zoom)===d.coord.zoom&&(j.style.display="block"),b.requestRedraw()}}return this._tileComplete},_redrawTimer:undefined,requestRedraw:function(){this._redrawTimer||(this._redrawTimer=setTimeout(this.getRedraw(),1e3))},_redraw:null,getRedraw:function(){if(!this._redraw){var a=this;this._redraw=function(){a.draw(),a._redrawTimer=0}}return this._redraw},createOrGetLayer:function(a){if(a in this.layers)return this.layers[a];var b=document.createElement("div");b.id=this.parent.id+"-zoom-"+a,b.style.cssText=this.layerParent.style.cssText,b.style.zIndex=a,this.layerParent.appendChild(b),this.layers[a]=b;return b},checkCache:function(){var a=this.parent.getElementsByTagName("img").length,b=Math.max(a,this.maxTileCacheSize);this.tileCacheSize>b&&this.recentTiles.sort(function(a,b){return b.lastTouchedTime<a.lastTouchedTime?-1:b.lastTouchedTime>a.lastTouchedTime?1:0});while(this.tileCacheSize>b){var c=this.recentTiles.pop(),d=(new Date).getTime();delete this.recentTilesById[c.id];var e=this.tiles[c.id];e.parentNode?alert("Gah: trying to removing cached tile even though it's still in the DOM"):(delete this.tiles[c.id],this.tileCacheSize--)}},getCenterDistanceCompare:function(){var a=this.coordinate.zoomTo(Math.round(this.coordinate.zoom));return function(c,d){if(c&&d){var e=c.coord,f=d.coord;if(e.zoom==f.zoom){var g=Math.abs(a.row-e.row-.5)+Math.abs(a.column-e.column-.5),h=Math.abs(a.row-f.row-.5)+Math.abs(a.column-f.column-.5);return g<h?1:g>h?-1:0}return e.zoom<f.zoom?1:e.zoom>f.zoom?-1:0}return c?1:d?-1:0}}},typeof module!="undefined"&&module.exports&&(module.exports={Point:a.Point,Projection:a.Projection,MercatorProjection:a.MercatorProjection,LinearProjection:a.LinearProjection,Transformation:a.Transformation,Location:a.Location,MapProvider:a.MapProvider,TemplatedMapProvider:a.TemplatedMapProvider,Coordinate:a.Coordinate})})(com.modestmaps),!function(context,win){function handleReadyState(a,b,c){return function(){a&&a[readyState]==4&&(twoHundo.test(a.status)?b(a):c(a))}}function setHeaders(a,b){var c=b.headers||{};c.Accept=c.Accept||"text/javascript, text/html, application/xml, text/xml, */*",b.crossOrigin||(c["X-Requested-With"]=c["X-Requested-With"]||"XMLHttpRequest"),c[contentType]=c[contentType]||"application/x-www-form-urlencoded";for(var d in c)c.hasOwnProperty(d)&&a.setRequestHeader(d,c[d],!1)}function getCallbackName(a){var b=a.jsonpCallback||"callback";if(a.url.slice(-(b.length+2))==b+"=?"){var c="reqwest_"+uniqid++;a.url=a.url.substr(0,a.url.length-1)+c;return c}var d=new RegExp(b+"=([\\w]+)");return a.url.match(d)[1]}function generalCallback(a){lastValue=a}function getRequest(a,b,c){if(a.type!="jsonp"){var d=xhr();d.open(a.method||"GET",typeof a=="string"?a:a.url,!0),setHeaders(d,a),d.onreadystatechange=handleReadyState(d,b,c),a.before&&a.before(d),d.send(a.data||null);return d}var e=doc.createElement("script"),f=0;win[getCallbackName(a)]=generalCallback,e.type="text/javascript",e.src=a.url,e.async=!0,e.onload=e.onreadystatechange=function(){if(e[readyState]&&e[readyState]!=="complete"&&e[readyState]!=="loaded"||f)return!1;e.onload=e.onreadystatechange=null,a.success&&a.success(lastValue),lastValue=undefined,head.removeChild(e),f=1},head.appendChild(e)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){if(/\.json$/.test(a))return"json";if(/\.jsonp$/.test(a))return"jsonp";if(/\.js$/.test(a))return"js";if(/\.html?$/.test(a))return"html";if(/\.xml$/.test(a))return"xml";return"js"}function init(o,fn){function complete(a){o.complete&&o.complete(a)}function success(resp){o.timeout&&clearTimeout(self.timeout)&&(self.timeout=null);var r=resp.responseText;if(r)switch(type){case"json":resp=win.JSON?win.JSON.parse(r):eval("("+r+")");break;case"js":resp=eval(r);break;case"html":resp=r}fn(resp),o.success&&o.success(resp),complete(resp)}function error(a){o.error&&o.error(a),complete(a)}this.url=typeof o=="string"?o:o.url,this.timeout=null;var type=o.type||setType(this.url),self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort(),error()},o.timeout)),this.request=getRequest(o,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function enc(a){return encodeURIComponent(a)}function serial(a){var b=a.name;if(a.disabled||!b)return"";b=enc(b);switch(a.tagName.toLowerCase()){case"input":switch(a.type){case"reset":case"button":case"image":case"file":return"";case"checkbox":case"radio":return a.checked?b+"="+(a.value?enc(a.value):!0)+"&":"";default:return b+"="+(a.value?enc(a.value):"")+"&"}break;case"textarea":return b+"="+enc(a.value)+"&";case"select":return b+"="+enc(a.options[a.selectedIndex].value)+"&"}return""}var twoHundo=/^20\d$/,doc=document,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",head=doc[byTag]("head")[0],uniqid=0,lastValue,xhr="XMLHttpRequest"in win?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)}},reqwest.serialize=function(a){var b=[a[byTag]("input"),a[byTag]("select"),a[byTag]("textarea")],c=[],d,e;for(d=0,l=b.length;d<l;++d)for(e=0,l2=b[d].length;e<l2;++e)c.push(serial(b[d][e]));return c.join("").replace(/&$/,"")},reqwest.serializeArray=function(a){for(var b=this.serialize(a).split("&"),c=0,d=b.length,e=[],f;c<d;c++)b[c]&&(f=b[c].split("="))&&e.push({name:f[0],value:f[1]});return e};var old=context.reqwest;reqwest.noConflict=function(){context.reqwest=old;return this},typeof module!="undefined"?module.exports=reqwest:context.reqwest=reqwest}(this,window);var wax=wax||{};Array.prototype.reduce||(Array.prototype.reduce=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;if(c==0&&arguments.length==1)throw new TypeError;var d=0,e;if(arguments.length>=2)e=arguments[1];else do{if(d in b){e=b[d++];break}if(++d>=c)throw new TypeError}while(!0);while(d<c)d in b&&(e=a.call(undefined,e,b[d],d,b)),d++;return e}),wax.Record=function(a,b){var c=function(a,b){var c=a.split(".").reduce(function(a,b){return[a[1]||a[0],a[1]?a[1][b]:a[0][b]]},[b||window,null]);if(c[0]&&c[1])return c;throw a+" not found."},d=function(a,b){var d=c(a),e;b=b.length?wax.Record(b):[];if(Object.create)e=Object.create(d[1].prototype),d[1].apply(e,b);else switch(b.length){case 0:e=new d[1];break;case 1:e=new d[1](b[0]);break;case 2:e=new d[1](b[0],b[1]);break;case 3:e=new d[1](b[0],b[1],b[2]);break;case 4:e=new d[1](b[0],b[1],b[2],b[3]);break;case 5:e=new d[1](b[0],b[1],b[2],b[3],b[4]);break;default:}return e},e=function(a,b,d){var e=c(a,d),f=b.length?wax.Record(b):[];return d&&a.indexOf(".")===-1?e[1].apply(d,f):e[1].apply(e[0],f)},f=function(a){return wax.util.isString(a)&&wax.util.indexOf(["@new","@call","@literal","@chain","@inject","@group"],a.split(" ")[0])!==-1},g=function(a){return wax.util.isString(a)&&wax.util.indexOf(["@new","@call","@chain"],a.split(" ")[0])!==-1},h=function(a){if(wax.util.isArray(a)&&a[0]&&f(a[0]))return{verb:a[0].split(" ")[0],subject:a[0].split(" ")[1],object:a.slice(1)};return!1},i,j=!1,k=null,l=null,m=h(a);if(!m){if(a!==null&&typeof a=="object"){var n=wax.util.keys(a);for(i=0;i<n.length;i++){var o=n[i];a[o]=wax.Record(a[o],b)}return a}return a}switch(m.verb){case"@group":for(i=0;i<m.object.length;i++)k=wax.Record(m.object[i],b),l=h(m.object[i]),l&&g(l.verb)&&(b=k);return b;case"@new":return d(m.subject,m.object);case"@literal":j=c(m.subject);return j?j[1]:null;case"@inject":return e(m.subject,m.object,b);case"@chain":return e(m.subject,m.object,b);case"@call":return e(m.subject,m.object,null)}},wax=wax||{},wax.attribution=function(){var a,b={};b.set=function(b){if(typeof b!="undefined"){a.innerHTML=b;return this}},b.element=function(){return a},b.init=function(){a=document.createElement("div"),a.className="wax-attribution";return this};return b.init()},wax=wax||{},wax.bwdetect=function(a,b){function h(){wax.bw=-1;var a=new Image;a.src=e;var b=!0,f=setTimeout(function(){b&&wax.bw==-1&&(c.bw(0),b=!1)},d);a.onload=function(){b&&wax.bw==-1&&(clearTimeout(f),c.bw(1),b=!1)}}var c={},d=a.threshold||400,e="http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache="+ +(new Date),f=1,g=a.auto===undefined?!0:a.auto;c.bw=function(a){if(!arguments.length)return f;var c=f;wax.bwlisteners&&wax.bwlisteners.length&&function(){listeners=wax.bwlisteners,wax.bwlisteners=[];for(i=0;i<listeners;i++)listeners[i](a)}(),wax.bw=a,f!=(f=a)&&b(a)},c.add=function(){g&&h();return this},wax.bw==-1?(wax.bwlisteners=wax.bwlisteners||[],wax.bwlisteners.push(c.bw)):wax.bw!==undefined?c.bw(wax.bw):c.add();return c},wax.formatter=function(x){var formatter={},f;if(x&&typeof x=="string")try{eval("f = "+x)}catch(e){console&&console.log(e)}else x&&typeof x=="function"?f=x:f=function(){};formatter.format=function(a,b){try{return f(a,b)}catch(c){console&&console.log(c)}};return formatter},wax.GridInstance=function(a,b,c){function f(a){a>=93&&a--,a>=35&&a--,a-=32;return a}c=c||{};var d={},e=c.resolution||4;tileSize=c.tileSize||256,d.gridFeature=function(b,c){if(!!a&&!!a.grid){if(c<0||b<0)return;if(Math.floor(c)>tileSize||Math.floor(b)>tileSize)return;var d=f(a.grid[Math.floor(c/e)].charCodeAt(Math.floor(b/e)));if(a.keys[d]&&a.data[a.keys[d]])return a.data[a.keys[d]]}},d.tileFeature=function(a,c,d,e){var f=wax.util.offset(d);feature=this.gridFeature(a-f.left,c-f.top);if(feature)return b.format(e,feature)};return d},wax.GridManager=function(a){function i(a){typeof a=="string"&&(a=[a]);return function(c){if(!!c){var d=/(\d+)\/(\d+)\/(\d+)\.[\w\._]+/g.exec(c);if(!d)return;return a[parseInt(d[2],10)%a.length].replace("{z}",d[1]).replace("{x}",d[2]).replace("{y}",d[3])}}}function h(a,b){if(typeof e!="undefined")return b(null,e);wax.request.get(f(a),function(a,c){c&&c.formatter?e=wax.formatter(c.formatter):e=!1;return b(a,e)})}a=a||{};var b=a.resolution||4,c={},d={},e,f=function(a){return a.replace(/\d+\/\d+\/\d+\.\w+/,"layer.json")},g=function(a){return a.replace(/(\.png|\.jpg|\.jpeg)(\d*)/,".grid.json")};d.formatter=function(a){if(!arguments.length)return e;e=wax.formatter(a);return d},d.formatterUrl=function(a){if(!arguments.length)return f;f=typeof a=="string"?function(){return a}:a;return d},d.gridUrl=function(a){if(!arguments.length)return g;g=typeof a=="function"?a:i(a);return d},d.getGrid=function(a,c){h(a,function(d,e){var f=g(a);if(d||!e||!f)return c(d,null);wax.request.get(f,function(a,d){if(a)return c(a,null);c(null,wax.GridInstance(d,e,{resolution:b||4}))})});return d},a.formatter&&d.formatter(a.formatter),a.grids&&d.gridUrl(a.grids);return d};var wax=wax||{};wax.legend=function(){var a,b={},c;b.element=function(){return c},b.content=function(b){if(!arguments.length)return a.innerHTML;b?(a.innerHTML=b,a.style.display="block"):(a.innerHTML="",a.style.display="none");return this},b.add=function(){c=document.createElement("div"),c.className="wax-legends",a=document.createElement("div"),a.className="wax-legend",a.style.display="none",c.appendChild(a);return this};return b.add()};var w=function(a){a.melt=function(b,c){return b.apply(c,[a,c])};return a},wax=wax||{};wax.request={cache:{},locks:{},promises:{},get:function(a,b){if(this.cache[a])return b(this.cache[a][0],this.cache[a][1]);this.promises[a]=this.promises[a]||[],this.promises[a].push(b);if(!this.locks[a]){var c=this;this.locks[a]=!0,reqwest({url:a+"?callback=grid",type:"jsonp",jsonpCallback:"callback",success:function(b){c.locks[a]=!1,c.cache[a]=[null,b];for(var d=0;d<c.promises[a].length;d++)c.promises[a][d](c.cache[a][0],c.cache[a][1])},error:function(b){c.locks[a]=!1,c.cache[a]=[b,null];for(var d=0;d<c.promises[a].length;d++)c.promises[a][d](c.cache[a][0],c.cache[a][1])}})}}};if(!wax)var wax={};wax.tilejson=function(a,b){reqwest({url:a+"?callback=grid",type:"jsonp",jsonpCallback:"callback",success:b,error:b})};var wax=wax||{};wax.tooltip={},wax.tooltip=function(a){this._currentTooltip=undefined,a=a||{},a.animationOut&&(this.animationOut=a.animationOut),a.animationIn&&(this.animationIn=a.animationIn)},wax.tooltip.prototype.isPopup=function(a){return a&&a.className.indexOf("wax-popup")!==-1},wax.tooltip.prototype.getTooltip=function(a,b,c,d){tooltip=document.createElement("div"),tooltip.className="wax-tooltip wax-tooltip-"+c,tooltip.innerHTML=a,b.appendChild(tooltip);return tooltip},wax.tooltip.prototype.hideTooltip=function(a){if(!!a){var b,c=function(){this.parentNode&&this.parentNode.removeChild(this)};a.style["-webkit-transition"]!==undefined&&this.animationOut?b="webkitTransitionEnd":a.style.MozTransition!==undefined&&this.animationOut&&(b="transitionend"),b?(a.addEventListener(b,c,!1),a.addEventListener("transitionend",c,!1),a.className+=" "+this.animationOut):a.parentNode&&a.parentNode.removeChild(a)}},wax.tooltip.prototype.click=function(a,b,c){this.unselect(b);var d=this.getTooltip(a,b,c),e=document.createElement("a");e.href="#close",e.className="close",e.innerHTML="Close";var f=wax.util.bind(function(a){this.hideTooltip(d),this._currentTooltip=undefined,a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault();return!1},this);e.addEventListener?e.addEventListener("click",f,!1):e.attachEvent&&e.attachEvent("onclick",f),d.className+=" wax-popup",d.innerHTML=a,d.appendChild(e),this._currentTooltip=d},wax.tooltip.prototype.select=function(a,b,c,d){if(!!a){if(this.isPopup(this._currentTooltip))return;this._currentTooltip=this.getTooltip(a,b,c,d),b.style.cursor="pointer"}},wax.tooltip.prototype.unselect=function(a){this.isPopup(this._currentTooltip)||(a.style.cursor="default",this._currentTooltip&&(this.hideTooltip(this._currentTooltip),this._currentTooltip=undefined))},wax.tooltip.prototype.out=wax.tooltip.prototype.unselect,wax.tooltip.prototype.over=wax.tooltip.prototype.select,wax.tooltip.prototype.click=wax.tooltip.prototype.click;var wax=wax||{};wax.util=wax.util||{},wax.util={offset:function(a){var b=a.offsetWidth||parseInt(a.style.width,10),c=a.offsetHeight||parseInt(a.style.height,10),d=0,e=0,f=function(a){if(a!==document.body&&a!==document.documentElement){d+=a.offsetTop,e+=a.offsetLeft;var b=a.style.transform||a.style.WebkitTransform||a.style.OTransform||a.style.MozTransform||a.style.msTransform;if(b)if(match=b.match(/translate\((.+)px, (.+)px\)/))d+=parseInt(match[2],10),e+=parseInt(match[1],10);else if(match=b.match(/translate3d\((.+)px, (.+)px, (.+)px\)/))d+=parseInt(match[2],10),e+=parseInt(match[1],10);else if(match=b.match(/matrix3d\(([\-\d,\s]+)\)/)){var c=match[1].split(",");d+=parseInt(c[13],10),e+=parseInt(c[12],10)}else if(match=b.match(/matrix\(.+, .+, .+, .+, (.+), (.+)\)/))d+=parseInt(match[2],10),e+=parseInt(match[1],10)}};f(a);try{while(a=a.offsetParent)f(a)}catch(g){}d+=document.body.offsetTop,e+=document.body.offsetLeft,d+=document.body.parentNode.offsetTop,e+=document.body.parentNode.offsetLeft;var h=document.defaultView?window.getComputedStyle(document.body.parentNode,null):document.body.parentNode.currentStyle;document.body.parentNode.offsetTop!==parseInt(h.marginTop,10)&&!isNaN(parseInt(h.marginTop,10))&&(d+=parseInt(h.marginTop,10),e+=parseInt(h.marginLeft,10));return{top:d,left:e,height:c,width:b}},$:function(a){return typeof a=="string"?document.getElementById(a):a},bind:function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,c.concat(Array.prototype.slice.call(arguments)))}},isString:function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)},indexOf:function(a,b){var c=Array.prototype.indexOf;if(a===null)return-1;var d,e;if(c&&a.indexOf===c)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1},isArray:Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},keys:Object.keys||function(a){var b=Object.prototype.hasOwnProperty;if(a!==Object(a))throw new TypeError("Invalid object");var c=[];for(var d in a)b.call(a,d)&&(c[c.length]=d);return c},eventoffset:function(a){var b=0,c=0;if(!a)var a=window.event;if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};if(a.clientX||a.clientY){var d=document.documentElement,e=document.body,f=document.body.parentNode.currentStyle,g=parseInt(f.marginTop,10)||0,h=parseInt(f.marginLeft,10)||0;return{x:a.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0)+h,y:a.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)+g}}if(a.touches&&a.touches.length===1)return{x:a.touches[0].pageX,y:a.touches[0].pageY}}},wax=wax||{},wax.mm=wax.mm||{},wax.mm.attribution=function(a,b){b=b||{};var c,d={};d.element=function(){return c.element()},d.appendTo=function(a){wax.util.$(a).appendChild(c.element());return this},d.init=function(){c=wax.attribution(),c.set(b.attribution),c.element().className="wax-attribution wax-mm";return this};return d.init()},wax=wax||{},wax.mm=wax.mm||{},wax.mm.boxselector=function(a,b,c){function n(a,b){if(!!g&&!!h){var c=a.locationPoint(h[0]),d=a.locationPoint(h[1]);g.style.display="block",g.style.height="auto",g.style.width="auto",g.style.left=Math.max(0,d.x)+"px",g.style.top=Math.max(0,d.y)+"px",g.style.right=Math.max(0,a.dimensions.x-c.x)+"px",g.style.bottom=Math.max(0,a.dimensions.y-c.y)+"px"}}function m(b){var c=j(b),g=a.pointLocation(c),i=a.pointLocation(d),k=[new e.Location(Math.max(g.lat,i.lat),Math.min(g.lon,i.lon)),new e.Location(Math.min(g.lat,i.lat),Math.max(g.lon,i.lon))];h=[g,i],f(k),e.removeEvent(a.parent,"mousemove",l),e.removeEvent(a.parent,"mouseup",m),a.parent.style.cursor="auto"}function l(a){var b=j(a);g.style.display="block",b.x<d.x?g.style.left=b.x+"px":g.style.left=d.x+"px",b.y<d.y?g.style.top=b.y+"px":g.style.top=d.y+"px",g.style.width=Math.abs(b.x-d.x)+"px",g.style.height=Math.abs(b.y-d.y)+"px";return e.cancelEvent(a)}function k(b){if(!!b.shiftKey){d=j(b),g.style.left=d.x+"px",g.style.top=d.y+"px",e.addEvent(a.parent,"mousemove",l),e.addEvent(a.parent,"mouseup",m),a.parent.style.cursor="crosshair";return e.cancelEvent(b)}}function j(b){var c=new e.Point(b.clientX,b.clientY);c.x+=document.body.scrollLeft+document.documentElement.scrollLeft,c.y+=document.body.scrollTop+document.documentElement.scrollTop;for(var d=a.parent;d;d=d.offsetParent)c.x-=d.offsetLeft,c.y-=d.offsetTop;return c}var d=null,e=com.modestmaps,f=typeof c=="function"?c:c.callback,g,h,i={};i.add=function(a){g=g||document.createElement("div"),g.id=a.parent.id+"-boxselector-box",g.className="boxselector-box",a.parent.appendChild(g),e.addEvent(a.parent,"mousedown",k),a.addCallback("drawn",n);return this},i.remove=function(){a.parent.removeChild(g),e.removeEvent(a.parent,"mousedown",k),a.removeCallback("drawn",n)};return i.add(a)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.bwdetect=function(a,b){function g(b){(!b.options||!b.options.scheme)&&e.Map.prototype.setProvider.call(a,b);var g=[[".png",".jpg"],[c,d]];f&&g.reverse();for(var h=0;h<b.options.tiles.length;h++)b.options.tiles[h]=b.options.tiles[h].replace(g[0][0],g[1][0]).replace(g[0][1],g[1][1]);e.Map.prototype.setProvider.call(a,b)}b=b||{};var c=b.png||".png128",d=b.jpg||".jpg70",e=com.modestmaps,f=1;a.setProvider=g;return wax.bwdetect(b,function(b){f=b,g(a.provider)})},wax=wax||{},wax.mm=wax.mm||{},wax.mm.fullscreen=function(a){function f(a){a&&com.modestmaps.cancelEvent(a),b?c.original():c.full()}var b=!1,c={},d,e;c.add=function(a){d=document.createElement("a"),d.className="wax-fullscreen",d.href="#fullscreen",d.innerHTML="fullscreen",com.modestmaps.addEvent(d,"click",f);return this},c.full=function(){b||(b=!0,e=[a.parent.offsetWidth,a.parent.offsetHeight],a.parent.className+=" wax-fullscreen-map",a.setSize(a.parent.offsetWidth,a.parent.offsetHeight))},c.original=function(){!b||(b=!1,a.parent.className=a.parent.className.replace("wax-fullscreen-map",""),a.setSize(e[0],e[1]))},c.appendTo=function(a){wax.util.$(a).appendChild(d);return this};return c.add(a)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.locationHash={stateChange:function(a){com.modestmaps.addEvent(window,"hashchange",function(){a(location.hash.substring(1))},!1)},getState:function(){return location.hash.substring(1)},pushState:function(a){location.hash="#"+a}},wax.mm.pushState={stateChange:function(a){com.modestmaps.addEvent(window,"popstate",function(b){b.state&&b.state.map_location&&a(b.state.map_location)},!1)},getState:function(){if(!!window.history&&!!window.history.state)return history.state&&history.state.map_location},pushState:function(a){!!window.history&&!!window.history.pushState&&window.history.pushState({map_location:a},document.title,window.location.href)}},wax.mm.hash=function(a,b,c){function l(a){a!==d&&i(d=a)&&k()}function k(){var a=j();d!==a&&(d=a,c.manager.pushState(d))}function h(a,b){return g(a,b,!1)}function g(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,b)}}c=c||{};var d,e={},f=90-1e-8;c.manager=c.manager||wax.mm.pushState;var i=function(b){var c=b.split("/");for(var d=0;d<c.length;d++){c[d]=Number(c[d]);if(isNaN(c[d]))return!0}if(c.length<3)return!0;c.length==3&&a.setCenterZoom(new com.modestmaps.Location(c[1],c[2]),c[0])},j=function(){var b=a.getCenter(),c=a.getZoom(),d=Math.max(0,Math.ceil(Math.log(c)/Math.LN2));return[c.toFixed(2),b.lat.toFixed(d),b.lon.toFixed(d)].join("/")},m=function(){c.defaultCenter&&a.setCenter(c.defaultCenter),c.defaultZoom&&a.setZoom(c.defaultZoom)};e.add=function(a){c.manager.getState()?l(c.manager.getState()):(m(),k()),a.addCallback("drawn",h(k,500)),c.manager.stateChange(l);return this};return e.add(a)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.interaction=function(a,b,c){function y(b,c){var d=s(c),i;d&&e.getGrid(d.src,function(e,j){for(var k=0;j&&k<g.length;k++)if(i=j.tileFeature(c.x,c.y,d,{format:g[k]}))switch(g[k]){case"full":case"teaser":return f.click(i,a.parent,0,b);case"location":return h(i)}})}function x(b){var c=wax.util.eventoffset(b);d.removeEvent(document.body,"mouseup",x),a.parent.ontouchend&&(d.removeEvent(a.parent,"touchend",x),d.removeEvent(a.parent,"touchmove",_touchCancel)),j=!1,b.type==="touchend"?y(b,n):Math.round(c.y/o)===Math.round(n.y/o)&&Math.round(c.x/o)===Math.round(n.x/o)&&(k=window.setTimeout(function(a){return function(b){k=null,y(b,a)}}(c),300));return x}function w(){d.removeEvent(a.parent,"touchend",x),d.removeEvent(a.parent,"touchmove",x),j=!1}function v(b){t()||(j=!0,n=wax.util.eventoffset(b),b.type==="mousedown"?d.addEvent(document.body,"mouseup",x):b.type==="touchstart"&&b.touches.length===1&&(g=["full","teaser"],f._currentTooltip&&f.hideTooltip(f._currentTooltip),d.addEvent(a.parent,"touchend",x),d.addEvent(a.parent,"touchmove",w)))}function u(b){if(!j){var c=wax.util.eventoffset(b),d=s(c),g;d&&e.getGrid(d.src,function(e,h){!e&&!!h&&((g=h.tileFeature(c.x,c.y,d,{format:"teaser"}))?g&&m!==g?(m=g,f.out(a.parent),f.over(g,a.parent,0,b)):g||(m=null,f.out(a.parent)):(m=null,f.out(a.parent)))})}}function t(){if(k){window.clearTimeout(k),k=null;return!0}return!1}function s(a){for(var b=0,c=q();b<c.length;b++)if(c[b][0]<a.y&&c[b][0]+256>a.y&&c[b][1]<a.x&&c[b][1]+256>a.x)return c[b][2];return!1}function r(a,b){p=null}function q(){var b=a.createOrGetLayer(Math.round(a.getZoom()));return p||(p=function(a){var c=[];for(var d in a)if(a[d].parentNode===b){var e=wax.util.offset(a[d]);c.push([e.top,e.left,a[d]])}return c}(a.tiles))}c=c||{},b=b||{};var d=com.modestmaps,e=wax.GridManager(b),f=c.callbacks||new wax.tooltip(c),g=c.clickAction||["full","location"],h=c.clickHandler||function(a){window.location=a},i={},j=!1,k=!1,l="ontouchstart"in document.documentElement,m,n,o=4,p;i.add=function(){var b=["zoomed","panned","centered","extentset","resized","drawn"];for(var c=0;c<b.length;c++)a.addCallback(b[c],r);d.addEvent(a.parent,"mousemove",u),d.addEvent(a.parent,"mousedown",v),l&&d.addEvent(a.parent,"touchstart",v);return this},i.remove=function(){var b=["zoomed","panned","centered","extentset","resized","drawn"];for(var c=0;c<b.length;c++)a.removeCallback(b[c],r);d.removeEvent(a.parent,"mousemove",u),d.removeEvent(a.parent,"mousedown",v),l&&d.removeEvent(a.parent,"touchstart",v),f._currentTooltip&&f.hideTooltip(f._currentTooltip);return this};return i.add(a)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.legend=function(a,b){b=b||{};var c,d={};d.add=function(){c=wax.legend().content(b.legend||"");return this},d.content=function(a){a&&c.content(a.legend||"")},d.element=function(){return c.element()},d.appendTo=function(a){wax.util.$(a).appendChild(c.element());return this};return d.add()},wax=wax||{},wax.mm=wax.mm||{},wax.mm.mobile=function(a,b,c){c=c||{};var d=com.modestmaps,e=navigator.userAgent.toLowerCase(),f=e.indexOf("webkit")!=-1,g=e.indexOf("mobile")!=-1,h=g&&f,i=function(a){var b=document.createElement("canvas"),c=parseInt(a.style.width,10),d=parseInt(a.style.height,10),e=c/2,f=d/2,g=Math.min(c,d)/4,h=b.getContext("2d");b.setAttribute("width",c),b.setAttribute("height",d),h.globalAlpha=.5;var i=h.createLinearGradient(0,0,300,225);i.addColorStop(0,"black"),i.addColorStop(1,"rgb(200, 200, 200)"),h.fillStyle=i,h.fillRect(0,0,c,d),h.fillStyle="rgb(255, 255, 255)",h.beginPath(),h.moveTo(e-g*.6,f-g),h.lineTo(e-g*.6,f+g),h.lineTo(e+g*.6,f),h.fill(),a.appendChild(b)},j=function(a){a.style.position="absolute",a.style.height="50px",a.style.left=a.style.right="0";var b=document.createElement("canvas");b.setAttribute("width",a.offsetWidth),b.setAttribute("height",a.offsetHeight);var c=b.getContext("2d");c.globalAlpha=1,c.fillStyle="rgba(255, 255, 255, 0.5)",c.fillRect(0,0,a.offsetWidth,a.offsetHeight),c.fillStyle="rgb(0, 0, 0)",c.font="bold 20px sans-serif",c.fillText("back",20,30),a.appendChild(b)},k=function(a){a.style.position="absolute",a.style.width=a.style.height="auto",a.style.top=window.pageYOffset+"px",a.style.left=a.style.right="0px"},l=function(a){a.style.position="relative",a.style.width=a.style.height=a.style.top=a.style.left=a.style.right="auto"},m,n,o,p,q=c.overlayDraw||i,r=c.backDraw||j;bodyDraw=c.bodyDraw||function(){};var s={add:function(a){h&&(p=document.createElement("meta"),p.id="wax-touch",p.setAttribute("name","viewport"),m=document.createElement("div"),m.id=a.parent.id+"-mobileoverlay",m.className="wax-mobileoverlay",m.style.position="absolute",m.style.width=a.dimensions.x+"px",m.style.height=a.dimensions.y+"px",a.parent.appendChild(m),q(m),o=document.createElement("div"),backDiv=document.createElement("div"),n=document.body,newBody=document.createElement("body"),newBody.className="wax-mobile-body",newBody.appendChild(backDiv),d.addEvent(m,"touchstart",this.toTouch),d.addEvent(backDiv,"touchstart",this.toPage));return this},toTouch:function(){a.parent.parentNode.replaceChild(o,a.parent),newBody.insertBefore(a.parent,backDiv),document.body=newBody,bodyDraw(newBody),r(backDiv),p.setAttribute("content","initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0"),document.head.appendChild(p),a._smallSize=[a.parent.clientWidth,a.parent.clientHeight],k(a.parent),a.setSize(a.parent.offsetWidth,window.innerHeight),backDiv.style.display="block",m.style.display="none"},toPage:function(){document.body=n,o.parentNode.replaceChild(a.parent,o),l(a.parent),a.setSize(a._smallSize[0],a._smallSize[1]),backDiv.style.display="none",m.style.display="block"}};return s.add(a)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.pointselector=function(a,b,c){function p(b){!d||(e=l(b),h.Point.distance(d,e)<f&&(i.addLocation(a.pointLocation(d)),k(m(j))),d=null)}function o(b){d=l(b),h.addEvent(a.parent,"mouseup",p)}function n(){var b=new h.Point(0,0);for(var c=0;c<j.length;c++){var d=a.locationPoint(j[c]);j[c].pointDiv||(j[c].pointDiv=document.createElement("div"),j[c].pointDiv.className="wax-point-div",j[c].pointDiv.style.position="absolute",j[c].pointDiv.style.display="block",j[c].pointDiv.location=j[c],h.addEvent(j[c].pointDiv,"mouseup",function(d){var e=j[c];return function(b){h.removeEvent(a.parent,"mouseup",p),i.deletePoint(e,b)}}()),a.parent.appendChild(j[c].pointDiv)),j[c].pointDiv.style.left=d.x+"px",j[c].pointDiv.style.top=d.y+"px"}}function m(a){var b=[];for(var c=0;c<a.length;c++)b.push(new h.Location(a[c].lat,a[c].lon));return b}function l(b){var c=wax.util.eventoffset(b),d=new h.Point(c.x,c.y),e={x:parseFloat(h.getStyle(document.documentElement,"margin-left")),y:parseFloat(h.getStyle(document.documentElement,"margin-top"))};isNaN(e.x)||(d.x-=e.x),isNaN(e.y)||(d.y-=e.y);for(var f=a.parent;f;f=f.offsetParent)d.x-=f.offsetLeft,d.y-=f.offsetTop;return d}var d=null,e=null,f=5,g,h=com.modestmaps,i={},j=[],k=typeof c=="function"?c:c.callback;i.addLocation=function(a){j.push(a),n(),k(m(j))},i.add=function(a){h.addEvent(a.parent,"mousedown",o),a.addCallback("drawn",n());return this},i.deletePoint=function(a,b){confirm("Delete this point?")&&(a.pointDiv.parentNode.removeChild(a.pointDiv),j.splice(wax.util.indexOf(j,a),1),k(m(j)))};return i.add(a)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.zoombox=function(a){function j(a){if(!!d){var b=g(a);e.style.display="block",b.x<f.x?e.style.left=b.x+"px":e.style.left=f.x+"px",e.style.width=Math.abs(b.x-f.x)+"px",b.y<f.y?e.style.top=b.y+"px":e.style.top=f.y+"px",e.style.height=Math.abs(b.y-f.y)+"px";return c.cancelEvent(a)}}function i(b){if(!!b.shiftKey&&!this.drawing){d=!0,f=g(b),e.style.left=f.x+"px",e.style.top=f.y+"px",c.addEvent(a.parent,"mousemove",j),c.addEvent(a.parent,"mouseup",h),a.parent.style.cursor="crosshair";return c.cancelEvent(b)}}function h(b){if(!!d){d=!1;var i=g(b),k=a.pointLocation(i),l=a.pointLocation(f);a.setExtent([k,l]),e.style.display="none",c.removeEvent(a.parent,"mousemove",j),c.removeEvent(a.parent,"mouseup",h),a.parent.style.cursor="auto"}}function g(b){var d=new c.Point(b.clientX,b.clientY);d.x+=document.body.scrollLeft+document.documentElement.scrollLeft,d.y+=document.body.scrollTop+document.documentElement.scrollTop;for(var e=a.parent;e;e=e.offsetParent)d.x-=e.offsetLeft,d.y-=e.offsetTop;return d}var b={},c=com.modestmaps,d=!1,e,f=null;b.add=function(a){e=e||document.createElement("div"),e.id=a.parent.id+"-zoombox-box",e.className="zoombox-box",a.parent.appendChild(e),c.addEvent(a.parent,"mousedown",i);return this},b.remove=function(){a.parent.removeChild(e),c.removeEvent(a.parent,"mousedown",i)};return b.add(a)},wax=wax||{},wax.mm=wax.mm||{},wax.mm.zoomer=function(a){var b=com.modestmaps,c=document.createElement("a");c.innerHTML="+",c.href="#",c.className="zoomer zoomin",b.addEvent(c,"mousedown",function(a){b.cancelEvent(a)}),b.addEvent(c,"dblclick",function(a){b.cancelEvent(a)}),b.addEvent(c,"click",function(c){b.cancelEvent(c),a.zoomIn()},!1);var d=document.createElement("a");d.innerHTML="-",d.href="#",d.className="zoomer zoomout",b.addEvent(d,"mousedown",function(a){b.cancelEvent(a)}),b.addEvent(d,"dblclick",function(a){b.cancelEvent(a)}),b.addEvent(d,"click",function(c){b.cancelEvent(c),a.zoomOut()},!1);var e={add:function(a){a.addCallback("drawn",function(a,b){a.coordinate.zoom===a.provider.outerLimits()[0].zoom?d.className="zoomer zoomout zoomdisabled":a.coordinate.zoom===a.provider.outerLimits()[1].zoom?c.className="zoomer zoomin zoomdisabled":(c.className="zoomer zoomin",d.className="zoomer zoomout")});return this},appendTo:function(a){wax.util.$(a).appendChild(c),wax.util.$(a).appendChild(d);return this}};return e.add(a)};var wax=wax||{};wax.mm=wax.mm||{},wax.mm.connector=function(a){this.options={tiles:a.tiles,scheme:a.scheme||"xyz",minzoom:a.minzoom||0,maxzoom:a.maxzoom||22}},wax.mm.connector.prototype={outerLimits:function(){return[(new com.modestmaps.Coordinate(0,0,0)).zoomTo(this.options.minzoom),(new com.modestmaps.Coordinate(1,1,0)).zoomTo(this.options.maxzoom)]},getTileUrl:function(a){if(!(coord=this.sourceCoordinate(a)))return null;coord.row=this.options.scheme==="tms"?Math.pow(2,coord.zoom)-coord.row-1:coord.row;return this.options.tiles[parseInt(Math.pow(2,coord.zoom)*coord.row+coord.column,10)%this.options.tiles.length].replace("{z}",coord.zoom.toFixed(0)).replace("{x}",coord.column.toFixed(0)).replace("{y}",coord.row.toFixed(0))}},com&&com.modestmaps&&com.modestmaps.extend(wax.mm.connector,com.modestmaps.MapProvider);var Bones=Bones||{};Bones.utils=Bones.utils||{},typeof process!="undefined"&&process.versions&&process.versions.node&&(module.exports=Bones.utils),Bones.utils.callback=function(a){return{success:function(b,c){a(null,c)},error:function(b,c){a(c)}}},Bones.utils.fetch=function(a,b){var c=_(a).size(),d=null;_(a).each(function(e){e.fetch({success:function(){--c===0&&b(d,a)},error:function(f,g){d||(d=g),e.error=g,--c===0&&b(d,a)}})})},Bones.utils.uncountable=["advice","enegery","excretion","digestion","cooperation","health","justice","jeans","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","bison","proceedings","shears","pincers","breeches","hijinks","clippers","chassis","innings","elk","rhinoceros","swine","you","news"],Bones.utils.singularize=function(a){if(Bones.utils.uncountable.indexOf(a.toLowerCase())>=0)return a;for(var b=Bones.utils.singularize.rules.length-1;b>=0;b--){var c=Bones.utils.singularize.rules[b];if(c[0].test(a))return a.replace(c[0],c[1])}return a},Bones.utils.singularize.rules=[[/s$/i,""],[/(bu|mis|kis)s$/i,"$1s"],[/([ti])a$/i,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/(^analy)ses$/i,"$1sis"],[/([^f])ves$/i,"$1fe"],[/([lr])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/ies$/i,"ie"],[/(x|ch|ss|sh)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(bus)es$/i,"$1"],[/(o)es$/i,"$1"],[/(shoe)s$/i,"$1"],[/(cris|ax|test)es$/i,"$1is"],[/(octop|vir)i$/i,"$1us"],[/(alias|status)es$/i,"$1"],[/^(ox)en/i,"$1"],[/(vert|ind)ices$/i,"$1ex"],[/(matr)ices$/i,"$1ix"],[/(quiz)zes$/i,"$1"],[/^(p)eople$/i,"$erson"],[/^(m)en$/i,"$1an"],[/^(child)ren$/i,"$1"],[/^(move)s$/i,"$1"],[/^(sex)$es/i,"$1"]],Bones.utils.pluralize=function(a){if(Bones.utils.uncountable.indexOf(a.toLowerCase())>=0)return a;for(var b=Bones.utils.pluralize.rules.length-1;b>=0;b--){var c=Bones.utils.pluralize.rules[b];if(c[0].test(a))return a.replace(c[0],c[1])}return a},Bones.utils.pluralize.rules=[[/$/,"s"],[/(s|ss|sh|ch|x|o)$/i,"$1es"],[/y$/i,"ies"],[/(o|e)y$/i,"$1ys"],[/(octop|vir)us$/i,"$1i"],[/(alias|status)$/i,"$1es"],[/(bu)s$/i,"$1ses"],[/([ti])um$/i,"$1a"],[/sis$/i,"ses"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/([m|l])ouse$/i,"$1ice"],[/^(ox)$/i,"$1en"],[/(quiz)$/i,"$1zes"],[/^(p)erson$/i,"$1eople"],[/^(m)an$/i,"$1en"],[/^(child)$/i,"$1ren"],[/^(move)$/i,"$1s"],[/^(sex)$/i,"$1es"]],$(function(){$.browser.msie&&$.ajaxSetup({cache:!1})}),function(){var a={},b={},c={},d={};Bones.server=!1,Bones.initialize=function(e,f){if(e==="model"){var g=f(a);g&&(a[g.title]=g)}else if(e==="view"){var h=f(a,b,d);h&&(b[h.title]=h)}else if(e==="router"){var i=f(a,b,c);i&&(c[i.title]=i)}else if(e==="template"){var j=f(d);j&&(d[j.title]=j)}else _.isFunction(e)&&e(a,b,c,d)},Bones.start=function(a){for(var b in c)new c[b];Backbone.history.start(a)},Bones.DEBUG={models:a,views:b,routers:c,templates:d}}(),typeof process!="undefined"&&process.versions&&process.versions.node&&(module.exports=Backbone=require("backbone"),_=require("underscore"),$=require("jquery")),Backbone.Model.augment=Backbone.Collection.augment=Backbone.Router.augment=Backbone.View.augment=function(a){var b=this.prototype;for(var c in a)typeof a[c]=="function"?b[c]=_.wrap(b[c],a[c]):_.isArray(a[c])?b[c]=_.isArray(b[c])?b[c].concat(a[c]):a[c]:typeof a[c]=="object"?b[c]=_.extend({},b[c],a[c]):b[c]=a[c];return this};var extend=Backbone.Router.extend;Backbone.Model.extend=Backbone.Collection.extend=Backbone.Router.extend=Backbone.View.extend=function(){var a=extend.apply(this,arguments);delete a.title;return a},Backbone.View.prototype.html=function(){return $(this.el).html()},Backbone.Router.prototype.route=function(a,b,c){Backbone.history||(Backbone.history=new Backbone.History),_.isRegExp(a)||(a=this._routeToRegExp(a)),Backbone.history.route(a,_.bind(function(d){var e=this._extractParameters(a,d);c.apply(this,e),this.trigger.apply(this,["route:"+b].concat(e))},this))},Backbone.csrf=function(a,b){var c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY0123456789",d="";while(d.length<32)d+=c.charAt(Math.floor(Math.random()*c.length));a=a||"/",a=a.split("#")[0].split("?")[0];var e=(new Date(+(new Date)+(b||2e3))).toGMTString();document.cookie="bones.token="+d+";expires="+e+";path="+a+";";return d},Backbone.sync=function(a,b,c){function d(a){if(!a||!a.url)throw new Error("A 'url' property or function must be specified");return _.isFunction(a.url)?a.url():a.url}var e={create:"POST",update:"PUT","delete":"DELETE",read:"GET"}[a];if(a!=="read"){var f=b.toJSON?b.toJSON():b;f["bones.token"]=Backbone.csrf(d(b)),f=JSON.stringify(f)}var g={url:d(b),type:e,contentType:"application/json",data:f||null,dataType:"json",processData:!1,success:c.success,error:c.error};return $.ajax(g)};var exports=exports||this,require=require||function(){return exports};(function(){var a,b,c,d,e=function(){var a=arguments[0],b=1,c=arguments[b];while(c)a=a.slice(0,-1)+c.slice(1),c=arguments[++b];return a},f=function(a){return"(?:"+a+")"},g="[A-Za-z]",h="[\\x0D]",i="[0-9]",j="[\\x22]",k=e(i,"[A-Fa-f]"),l="[\\x0A]",m="[\\x20]",n=f("%"+k+k),o="[\\:\\/\\?\\#\\[\\]\\@]",p="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",q=e(o,p),r=e(g,i,"[\\-\\.\\_\\~]"),s=f(g+e(g,i,"[\\+\\-\\.]")+"*"),t=f(f(n+"|"+e(r,p,"[\\:]"))+"*"),u=f(i+"|"+f("[1-9]"+i)+"|"+f("1"+i+i)+"|"+f("2[0-4]"+i)+"|"+f("25[0-5]")),v=f(u+"."+u+"."+u+"."+u),w=f(k+"{1,4}"),x=f(f(w+"\\:"+w)+"|"+v),y=f(e(r,p,"[\\:]")+"+"),z=f("v"+k+"+\\."+e(r,p,"[\\:]")+"+"),A=f("\\["+f(y+"|"+z)+"\\]"),B=f(f(n+"|"+e(r,p))+"*"),C=f(A+"|"+v+"|"+B),D=f(i+"*"),E=f(f(t+"@")+"?"+C+f("\\:"+D)+"?"),F=f(n+"|"+e(r,p,"[\\:\\@]")),G=f(F+"*"),H=f(F+"+"),I=f(f(n+"|"+e(r,p,"[\\@]"))+"+"),J=f(f("\\/"+G)+"*"),K=f("\\/"+f(H+J)+"?"),L=f(I+J),M=f(H+J),N=f(""),O=f(J+"|"+K+"|"+L+"|"+M+"|"+N),P=f(f(F+"|[\\/\\?]")+"*"),Q=f(f(F+"|[\\/\\?]")+"*"),R=f(f("\\/\\/"+E+J)+"|"+K+"|"+M+"|"+N),S=f(s+"\\:"+R+f("\\?"+P)+"?"+f("\\#"+Q)+"?"),T=f(f("\\/\\/"+E+J)+"|"+K+"|"+L+"|"+N),U=f(T+f("\\?"+P)+"?"+f("\\#"+Q)+"?"),V=f(S+"|"+U),W=f(s+"\\:"+R+f("\\?"+P)+"?"),X=new RegExp("^"+f("("+S+")|("+U+")")+"$"),Y=new RegExp("^("+s+")\\:"+f(f("\\/\\/("+f("("+t+")@")+"?("+C+")"+f("\\:("+D+")")+"?)")+"?("+J+"|"+K+"|"+M+"|"+N+")")+f("\\?("+P+")")+"?"+f("\\#("+Q+")")+"?$"),Z=new RegExp("^(){0}"+f(f("\\/\\/("+f("("+t+")@")+"?("+C+")"+f("\\:("+D+")")+"?)")+"?("+J+"|"+K+"|"+L+"|"+N+")")+f("\\?("+P+")")+"?"+f("\\#("+Q+")")+"?$"),$=new RegExp("^("+s+")\\:"+f(f("\\/\\/("+f("("+t+")@")+"?("+C+")"+f("\\:("+D+")")+"?)")+"?("+J+"|"+K+"|"+M+"|"+N+")")+f("\\?("+P+")")+"?$"),_=new RegExp("^"+f("\\#("+Q+")")+"?$"),ba=new RegExp("^"+f("("+t+")@")+"?("+C+")"+f("\\:("+D+")")+"?$"),bb=new RegExp(e("[^]",g,i,"[\\+\\-\\.]"),"g"),bc=new RegExp(e("[^\\%\\:]",r,p),"g"),bd=new RegExp(e("[^\\%]",r,p),"g"),be=new RegExp(e("[^\\%\\/\\:\\@]",r,p),"g"),bf=new RegExp(e("[^\\%\\/\\@]",r,p),"g"),bg=new RegExp(e("[^\\%]",r,p,"[\\:\\@\\/\\?]"),"g"),bh=bg,bi=new RegExp(e("[^]",r,p),"g"),bj=new RegExp(r,"g"),bk=new RegExp(e("[^\\%]",r,q),"g"),bl=new RegExp(n+"+","g"),bm=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,bn=/^\.\.?\//,bo=/^\/\.(\/|$)/,bp=/^\/\.\.(\/|$)/,bq=/^\.\.?$/,br=/^\/?.*?(?=\/|$)/,bs="".match(/(){0}/)[1]===undefined,bt=function(a){var b=a.charCodeAt(0);return b<128?"%"+b.toString(16).toUpperCase():b>127&&b<2048?"%"+(b>>6|192).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase():"%"+(b>>12|224).toString(16).toUpperCase()+"%"+(b>>6&63|128).toString(16).toUpperCase()+"%"+(b&63|128).toString(16).toUpperCase()},bu=function(a){var b="",c=0,d,e;while(c<a.length)d=parseInt(a.substr(c+1,2),16),d<128?(e=String.fromCharCode(d),e.match(bj)?b+=e:b+=a.substr(c,3),c+=3):d>191&&d<224?(b+=a.substr(c,6),c+=6):(b+=a.substr(c,9),c+=9);return b},bv=function(a){var b="",c=0,d,e,f;while(c<a.length)d=parseInt(a.substr(c+1,2),16),d<128?(b+=String.fromCharCode(d),c+=3):d>191&&d<224?(e=parseInt(a.substr(c+4,2),16),b+=String.fromCharCode((d&31)<<6|e&63),c+=6):(e=parseInt(a.substr(c+4,2),16),f=parseInt(a.substr(c+7,2),16),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=9);return b},bw=function(a){return a===undefined?"undefined":a===null?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()};a=function(){},a.prototype={tolerant:undefined,scheme:undefined,reference:undefined},b=function(){this.errors=[]},b.prototype={scheme:undefined,authority:undefined,userinfo:undefined,host:undefined,port:undefined,path:undefined,query:undefined,fragment:undefined,reference:undefined,errors:undefined},c=function(){},c.prototype.parse=function(a,b){},c.prototype.serialize=function(a,b){},d={},d.SCHEMES={},d.parse=function(a,c){var e,f=new b,g;a=a?a.toString():"",c=c||{},c.reference==="suffix"&&(a=(c.scheme?c.scheme+":":"")+"//"+a),e=a.match(X),e?e[1]?e=a.match(Y):e=a.match(Z):(c.tolerant||f.errors.push("URI is not strictly valid."),e=a.match(bm)),e?(bs?(f.scheme=e[1],f.authority=e[2],f.userinfo=e[3],f.host=e[4],f.port=parseInt(e[5],10),f.path=e[6]||"",f.query=e[7],f.fragment=e[8],isNaN(f.port)&&(f.port=e[5])):(f.scheme=e[1]||undefined,f.authority=a.indexOf("//")!==-1?e[2]:undefined,f.userinfo=a.indexOf("@")!==-1?e[3]:undefined,f.host=a.indexOf("//")!==-1?e[4]:undefined,f.port=parseInt(e[5],10),f.path=e[6]||"",f.query=a.indexOf("?")!==-1?e[7]:undefined,f.fragment=a.indexOf("#")!==-1?e[8]:undefined,isNaN(f.port)&&(f.port=a.match(/\/\/.*\:(?:\/|\?|\#|$)/)?e[4]:undefined)),!f.scheme&&!f.authority&&!f.path&&!f.query?f.reference="same-document":f.scheme?f.fragment?f.reference="uri":f.reference="absolute":f.reference="relative",c.reference&&c.reference!=="suffix"&&c.reference!==f.reference&&f.errors.push("URI is not a "+c.reference+" reference."),g=d.SCHEMES[f.scheme||c.scheme],g&&g.parse&&g.parse(f,c)):f.errors.push("URI can not be parsed.");return f},d._recomposeAuthority=function(a){var b=[];if(a.userinfo!==undefined||a.host!==undefined||typeof a.port=="number")a.userinfo!==undefined&&(b.push(a.userinfo.toString().replace(bc,bt)),b.push("@")),a.host!==undefined&&b.push(a.host.toString().toLowerCase().replace(bd,bt)),typeof a.port=="number"&&(b.push(":"),b.push(a.port.toString(10)));return b.length?b.join(""):undefined},d.removeDotSegments=function(a){var b=[],c;while(a.length)a.match(bn)?a=a.replace(bn,""):a.match(bo)?a=a.replace(bo,"/"):a.match(bp)?(a=a.replace(bp,"/"),b.pop()):a==="."||a===".."?a="":(c=a.match(br)[0],a=a.slice(c.length),b.push(c));return b.join("")},d.serialize=function(a,b){var c=[],e,f;b=b||{},e=d.SCHEMES[a.scheme||b.scheme],e&&e.serialize&&e.serialize(a,b),b.reference!=="suffix"&&a.scheme&&(c.push(a.scheme.toString().toLowerCase().replace(bb,"")),c.push(":")),a.authority=d._recomposeAuthority(a),a.authority!==undefined&&(b.reference!=="suffix"&&c.push("//"),c.push(a.authority),a.path&&a.path.charAt(0)!=="/"&&c.push("/")),a.path&&(f=d.removeDotSegments(a.path.toString().replace(/%2E/ig,".")),a.scheme?f=f.replace(be,bt):f=f.replace(bf,bt),a.authority===undefined&&(f=f.replace(/^\/\//,"/%2F")),c.push(f)),a.query&&(c.push("?"),c.push(a.query.toString().replace(bg,bt))),a.fragment&&(c.push("#"),c.push(a.fragment.toString().replace(bh,bt)));return c.join("").replace(bl,bu).replace(/%[0-9A-Fa-f]{2}/g,function(a){return a.toUpperCase()})},d.resolveComponents=function(a,c,e,f){var g=new b;f||(a=d.parse(d.serialize(a,e),e),c=d.parse(d.serialize(c,e),e)),e=e||{},!e.tolerant&&c.scheme?(g.scheme=c.scheme,g.authority=c.authority,g.userinfo=c.userinfo,g.host=c.host,g.port=c.port,g.path=d.removeDotSegments(c.path),g.query=c.query):(c.authority!==undefined?(g.authority=c.authority,g.userinfo=c.userinfo,g.host=c.host,g.port=c.port,g.path=d.removeDotSegments(c.path),g.query=c.query):(c.path?(c.path.charAt(0)==="/"?g.path=d.removeDotSegments(c.path):(a.authority!==undefined&&!a.path?g.path="/"+c.path:a.path?g.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+c.path:g.path=c.path,g.path=d.removeDotSegments(g.path)),g.query=c.query):(g.path=a.path,c.query!==undefined?g.query=c.query:g.query=a.query),g.authority=a.authority,g.userinfo=a.userinfo,g.host=a.host,g.port=a.port),g.scheme=a.scheme),g.fragment=c.fragment;return g},d.resolve=function(a,b,c){return d.serialize(d.resolveComponents(d.parse(a,c),d.parse(b,c),c,!0),c)},d.normalize=function(a,b){if(typeof a=="string")return d.serialize(d.parse(a,b),b);if(bw(a)==="object")return d.parse(d.serialize(a,b),b);return a},d.equal=function(a,b,c){typeof a=="string"?a=d.serialize(d.parse(a,c),c):bw(a)==="object"&&(a=d.serialize(a,c)),typeof b=="string"?b=d.serialize(d.parse(b,c),c):bw(b)==="object"&&(b=d.serialize(b,c));return a===b},d.escapeComponent=function(a){return a&&a.toString().replace(bi,bt)},d.unescapeComponent=function(a){return a&&a.toString().replace(bl,bv)},exports.Options=a,exports.URIComponents=b,exports.SchemeHandler=c,exports.URI=d})();var exports=exports||this,require=require||function(){return exports};(function(){function x(){this._id=p(),this._schemas={},this._options={}}function w(a,c,d){var e=h(a),f=h(c),g,i;if(f==="undefined")return u(a,!0);if(e==="undefined"||f!==e)return u(c,!0);if(f==="object"){a instanceof v&&(a=a.getAttributes()),c instanceof v&&(c=c.getAttributes(),c["extends"]&&d&&c["extends"]instanceof v&&(c["extends"]=[c["extends"]])),g=u(a,!0);for(i in c)c[i]!==b[i]&&(g[i]=w(a[i],c[i],d));return g}return u(c,!0)}function v(a,b,c,d){var e;t.call(this,a,b,c),d===!0?this._schema=this:b instanceof v&&!(d instanceof v)?this._schema=b._schema:this._schema=d instanceof v?d:this._env.getDefaultSchema()||v.createEmptySchema(this._env),e=this._schema.getValueOfProperty("fragmentResolution"),e==="dot-delimited"?this._fd=".":e==="slash-delimited"&&(this._fd="/")}function u(a,c){var d,e;a instanceof t&&(a=a.getValue());switch(h(a)){case"object":if(c){d={};for(e in a)a[e]!==b[e]&&(d[e]=u(a[e],c));return d}return j(a);case"array":if(c){d=Array(a.length),e=a.length;while(--e>=0)d[e]=u(a[e],c);return d}return Array.pototype.slice.call(a);default:return a}}function t(b,c,d,e){c instanceof t&&(typeof e!="string"&&(e=c._fd),typeof d!="string"&&(d=c._uri),c=c._value),typeof d!="string"?d="urn:uuid:"+p()+"#":d.indexOf(":")===-1&&(d=r(a.resolve("urn:uuid:"+p()+"#",d))),this._env=b,this._value=c,this._uri=d,this._fd=e||this._env._options.defaultFragmentDelimiter}function s(){this.errors=[],this.validated={}}function r(a){typeof a=="string"&&a.indexOf("#")===-1&&(a+="#");return a}function q(a){return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function p(){return[c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],"-",c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],"-4",c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],"-",c[Math.floor(Math.random()*16)&3|8],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],"-",c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)],c[Math.floor(Math.random()*16)]].join("")}function o(a,b){var c=f(a,b);c>-1&&a.splice(c,1);return a}function n(a,b){f(a,b)===-1&&a.push(b);return a}function m(a){var c=[],d;switch(h(a)){case"object":for(d in a)a[d]!==b[d]&&(c[c.length]=d);break;case"array":for(d=a.length-1;d>=0;--d)c[d]=d}return c}function l(a){return a!==undefined&&a!==null?a instanceof Array&&!a.callee?a:typeof a.length!="number"||a.split||a.setInterval||a.call?[a]:Array.prototype.slice.call(a):[]}function k(a,c,d){var e={},f;for(f in a)a[f]!==b[f]&&(e[f]=c.call(d,a[f],f,a));return e}function j(a){i.prototype=a||{};return new i}function i(){}function h(a){return a===undefined?"undefined":a===null?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}var a=require("./uri/uri").URI,b={},c="0123456789abcdef".split(""),d,e,f,g;d=function(a,b,c){var d=0,e=a.length,f=Array(e);for(;d<e;++d)f[d]=b.call(c,a[d],d,a);return f},Array.prototype.map&&(d=function(a,b,c){return Array.prototype.map.call(a,b,c)}),e=function(a,b,c){var d=0,e=a.length,f=[];for(;d<e;++d)b.call(c,a[d],d,a)&&(f[f.length]=a[d]);return f},Array.prototype.filter&&(e=function(a,b,c){return Array.prototype.filter.call(a,b,c)}),f=function(a,b){var c=0,d=a.length;for(;c<d;++c)if(a[c]===b)return c;return-1},Array.prototype.indexOf&&(f=function(a,b){return Array.prototype.indexOf.call(a,b)}),s.prototype.addError=function(a,b,c,d,e){this.errors.push({uri:a instanceof t?a.getURI():a,schemaUri:a instanceof t?b.getURI():b,attribute:c,message:d,details:e})},s.prototype.registerValidation=function(a,b){this.validated[a]?this.validated[a].push(b):this.validated[a]=[b]},s.prototype.isValidatedBy=function(a,b){return!!this.validated[a]&&f(this.validated[a],b)!==-1},t.prototype.getEnvironment=function(){return this._env},t.prototype.getType=function(){return h(this._value)},t.prototype.getValue=function(){return this._value},t.prototype.getURI=function(){return this._uri},t.prototype.resolveURI=function(b){return r(a.resolve(this._uri,b))},t.prototype.getPropertyNames=function(){return m(this._value)},t.prototype.getProperty=function(a){var b=this._value?this._value[a]:undefined;if(b instanceof t)return b;return new t(this._env,b,this._uri+this._fd+q(a),this._fd)},t.prototype.getProperties=function(){var a=h(this._value),b=this;if(a==="object")return k(this._value,function(a,c){if(a instanceof t)return a;return new t(b._env,a,b._uri+b._fd+q(c),b._fd)});if(a==="array")return d(this._value,function(a,c){if(a instanceof t)return a;return new t(b._env,a,b._uri+b._fd+q(c),b._fd)})},t.prototype.getValueOfProperty=function(a){if(this._value){if(this._value[a]instanceof t)return this._value[a]._value;return this._value[a]}},t.prototype.equals=function(a){if(a instanceof t)return this._value===a._value;return this._value===a},v.prototype=j(t.prototype),v.createEmptySchema=function(a){var b=j(v.prototype);t.call(b,a,{},undefined,undefined),b._schema=b;return b},v.prototype.getSchema=function(){return this._schema},v.prototype.getAttribute=function(a,b){var c,d,e,f;if(!b&&this._attributes&&this._attributes.hasOwnProperty(a))return this._attributes[a];c=this._schema.getProperty("properties").getProperty(a),d=c.getValueOfProperty("parser"),e=this.getProperty(a);if(typeof d=="function"){f=d(e,c,b),!b&&this._attributes&&(this._attributes[a]=f);return f}return e.getValue()},v.prototype.getAttributes=function(){var a,c,d,e,f;if(!this._attributes&&this.getType()==="object"){a=this.getProperties(),c=this._schema.getProperty("properties"),this._attributes={};for(d in a)a[d]!==b[d]&&(e=c&&c.getProperty(d),f=e&&e.getValueOfProperty("parser"),typeof f=="function"?this._attributes[d]=f(a[d],e):this._attributes[d]=a[d].getValue())}return u(this._attributes,!1)},v.prototype.getLink=function(a,b){var c=this.getAttribute("links",[a,b]);if(c&&c.length&&c[c.length-1])return c[c.length-1]},v.prototype.validate=function(a,b,c,d,e){var f=this._schema.getValueOfProperty("validator");a instanceof t||(a=this.getEnvironment().createInstance(a)),b instanceof s||(b=new s),typeof f=="function"&&!b.isValidatedBy(a.getURI(),this.getURI())&&(b.registerValidation(a.getURI(),this.getURI()),f(a,this,this._schema,b,c,d,e));return b},x.prototype.clone=function(){var a=new x;a._schemas=j(this._schemas),a._options=j(this._options);return a},x.prototype.createInstance=function(a,b){var c;b=r(b);if(a instanceof t&&(!b||a.getURI()===b))return a;c=new t(this,a,b);return c},x.prototype.createSchema=function(a,b,c){var d,e;c=r(c);if(a instanceof v&&(!c||a._uri===c)&&(!b||a._schema.equals(b)))return a;d=new v(this,a,c,b),e=d.getSchema().getValueOfProperty("initializer"),typeof e=="function"&&(d=e(d)),this._schemas[d._uri]=d,this._schemas[c]=d,d.getAttributes();return d},x.prototype.createEmptySchema=function(){var a=v.createEmptySchema(this);this._schemas[a._uri]=a;return a},x.prototype.findSchema=function(a){return this._schemas[r(a)]},x.prototype.setOption=function(a,b){this._options[a]=b},x.prototype.getOption=function(a){return this._options[a]},x.prototype.setDefaultFragmentDelimiter=function(a){typeof a=="string"&&a.length>0&&(this._options.defaultFragmentDelimiter=a)},x.prototype.getDefaultFragmentDelimiter=function(){return this._options.defaultFragmentDelimiter},x.prototype.setDefaultSchemaURI=function(a){typeof a=="string"&&(this._options.defaultSchemaURI=r(a))},x.prototype.getDefaultSchema=function(){return this.findSchema(this._options.defaultSchemaURI)},x.prototype.validate=function(a,b){var c,d,e,f=new s;try{c=this.createInstance(a),f.instance=c}catch(g){f.addError(g.uri,g.schemaUri,g.attribute,g.message,g.details)}try{d=this.createSchema(b),f.schema=d,e=d.getSchema(),f.schemaSchema=e}catch(g){f.addError(g.uri,g.schemaUri,g.attribute,g.message,g.details)}e&&e.validate(d,f);if(f.errors.length)return f;return d.validate(c,f)},x.prototype._checkForInvalidInstances=function(a,c){var d=[],e=[[c,this._schemas[c]]],f=0,g,i,j,k,l,m;while(f++<a&&e.length){g=e.shift(),i=g[0],j=g[1];if(j instanceof v)if(this._schemas[j._uri]!==j)d.push("Instance "+i+" does not match "+j._uri);else{l=j.getAttributes();for(m in l)l[m]!==b[m]&&e.push([i+"/"+q(m),l[m]])}else if(h(j)==="object"){l=j;for(m in l)l.hasOwnProperty(m)&&e.push([i+"/"+q(m),l[m]])}else if(h(j)==="array"){l=j;for(m=0;m<l.length;++m)e.push([i+"/"+q(m),l[m]])}}return d.length?d:f},g={_environments:{},_defaultEnvironmentID:"",isJSONInstance:function(a){return a instanceof t},isJSONSchema:function(a){return a instanceof v},createEnvironment:function(a){a=a||this._defaultEnvironmentID;if(!this._environments[a])throw new Error("Unknown Environment ID");return this._environments[a].clone()},Environment:x,registerEnvironment:function(a,b){a=a||(b||0)._id,a&&!this._environments[a]&&b instanceof x&&(b._id=a,this._environments[a]=b)},setDefaultEnvironmentID:function(a){if(typeof a=="string"){if(!this._environments[a])throw new Error("Unknown Environment ID");this._defaultEnvironmentID=a}},getDefaultEnvironmentID:function(){return this._defaultEnvironmentID},typeOf:h,createObject:j,mapObject:k,mapArray:d,filterArray:e,searchArray:f,toArray:l,keys:m,pushUnique:n,popFirst:o,clone:u,randomUUID:p,escapeURIComponent:q,formatURI:r,inherits:w},this.JSV=g,exports.JSV=g,require("./environments")})(),function(){function D(c,d,e,f){var g={},h,i,j,k,l;if(c.getType()==="object"){h=d.getAttribute("patternProperties"),k=c.getProperties();for(i in h)if(h[i]!==a[i]){j=null;try{j=new RegExp(i)}catch(m){e&&e.addError(d,f,"patternProperties","Invalid pattern",i)}if(j)for(l in k)k[l]!==a[l]&&j.test(l)&&(g[l]=g[l]?b.pushUnique(g[l],h[i]):[h[i]])}}return g}var a={},b=require("./jsv").JSV,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;c=function(b,c,d,e,f){Error.call(this,e),this.uri=b.getURI(),this.schemaUri=c.getURI(),this.attribute=d,this.message=e,this.description=e,this.details=f},c.prototype=new Error,c.prototype.constructor=c,c.prototype.name="InitializationError",d={string:function(a,b){return a.getType()==="string"},number:function(a,b){return a.getType()==="number"},integer:function(a,b){return a.getType()==="number"&&a.getValue()%1===0},"boolean":function(a,b){return a.getType()==="boolean"},object:function(a,b){return a.getType()==="object"},array:function(a,b){return a.getType()==="array"},"null":function(a,b){return a.getType()==="null"},any:function(a,b){return!0}},e=new b.Environment,e.setOption("strict",!1),e.setOption("validateReferences",!1),f={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,c){var d;if(a.getType()==="string")return a.getValue();if(a.getType()==="object")return a.getEnvironment().createSchema(a,c.getEnvironment().findSchema(c.resolveURI("#")));if(a.getType()==="array"){d=c.getValueOfProperty("parser");return b.mapArray(a.getProperties(),function(a){return d(a,c)})}return"any"},validator:function(c,d,e,f,g,h,i){var j=b.toArray(d.getAttribute("type")),k,l,m,n,o;if(c.getType()!=="undefined"&&j&&j.length){o=e.getValueOfProperty("typeValidators")||{};for(k=0,l=j.length;k<l;++k){m=j[k];if(b.isJSONSchema(m)){n=b.createObject(f),n.errors=[],n.validated=b.clone(f.validated);if(m.validate(c,n,g,h,i).errors.length===0)return!0}else{if(o[m]===a[m]||typeof o[m]!="function")return!0;if(o[m](c,f))return!0}}f.addError(c,d,"type","Instance is not a required type",j);return!1}return!0},typeValidators:d},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,c,d){var e=a.getEnvironment(),f=c.getEnvironment();if(a.getType()==="object")return d?e.createSchema(a.getProperty(d),f.findSchema(c.resolveURI("#"))):b.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(c.resolveURI("#")))});return{}},validator:function(b,c,d,e,f,g,h){var i,j;if(b.getType()==="object"){i=c.getAttribute("properties");for(j in i)i[j]!==a[j]&&i[j]&&i[j].validate(b.getProperty(j),e,b,c,j)}}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,c){if(a.getType()==="object")return a.getEnvironment().createSchema(a,c.getEnvironment().findSchema(c.resolveURI("#")));if(a.getType()==="array")return b.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,c.getEnvironment().findSchema(c.resolveURI("#")))});return a.getEnvironment().createEmptySchema()},validator:function(a,c,d,e,f,g,h){var i,j,k,l,m,n;if(a.getType()==="array"){i=a.getProperties(),j=c.getAttribute("items"),n=c.getAttribute("additionalProperties");if(b.typeOf(j)==="array")for(k=0,l=i.length;k<l;++k)m=j[k]||n,m!==!1?m.validate(i[k],e,a,c,k):e.addError(a,c,"additionalProperties","Additional items are not allowed",m);else{m=j||n;for(k=0,l=i.length;k<l;++k)m.validate(i[k],e,a,c,k)}}}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){a.getType()==="undefined"&&!b.getAttribute("optional")&&d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){if(a.getType()==="object")return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")));if(a.getType()==="boolean"&&a.getValue()===!1)return!1;return a.getEnvironment().createEmptySchema()},validator:function(c,d,e,f,g,h,i){var j,k,l,m;if(c.getType()==="object"){j=d.getAttribute("additionalProperties"),k=d.getAttribute("properties")||{},l=c.getProperties();for(m in l)l[m]!==a[m]&&l[m]&&k[m]===a[m]&&(b.isJSONSchema(j)?j.validate(l[m],f,c,d,m):j===!1&&f.addError(c,d,"additionalProperties","Additional properties are not allowed",j))}}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){if(a.getType()==="string")return a.getValue();if(a.getType()==="object")return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))},validator:function(a,c,d,e,f,g,h){var i;a.getType()!=="undefined"&&f&&f.getType()!=="undefined"&&(i=c.getAttribute("requires"),typeof i=="string"?f.getProperty(i).getType()==="undefined"&&e.addError(a,c,"requires",'Property requires sibling property "'+i+'"',i):b.isJSONSchema(i)&&i.validate(f,e))}},minimum:{type:"number",optional:!0,parser:function(a,b){if(a.getType()==="number")return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;a.getType()==="number"&&(h=b.getAttribute("minimum"),i=b.getAttribute("minimumCanEqual"),typeof h=="number"&&(a.getValue()<h||i===!1&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less then the required minimum value",h))}},maximum:{type:"number",optional:!0,parser:function(a,b){if(a.getType()==="number")return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;a.getType()==="number"&&(h=b.getAttribute("maximum"),i=b.getAttribute("maximumCanEqual"),typeof h=="number"&&(a.getValue()>h||i===!1&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater then the required maximum value",h))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum","default":!0,parser:function(a,b){if(a.getType()==="boolean")return a.getValue();return!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a,b){if(a.getType()==="boolean")return a.getValue();return!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a,b){if(a.getType()==="number")return a.getValue();return 0},validator:function(a,b,c,d,e,f,g){var h;a.getType()==="array"&&(h=b.getAttribute("minItems"),typeof h=="number"&&a.getProperties().length<h&&d.addError(a,b,"minItems","The number of items is less then the required minimum",h))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a,b){if(a.getType()==="number")return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;a.getType()==="array"&&(h=b.getAttribute("maxItems"),typeof h=="number"&&a.getProperties().length>h&&d.addError(a,b,"maxItems","The number of items is greater then the required maximum",h))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a,b){if(a.getType()==="string")try{return new RegExp(a.getValue())}catch(c){return c}},validator:function(a,b,c,d,e,f,g){var h;try{h=b.getAttribute("pattern"),h instanceof Error?d.addError(b,c,"pattern","Invalid pattern",b.getValueOfProperty("pattern")):a.getType()==="string"&&h&&!h.test(a.getValue())&&d.addError(a,b,"pattern","String does not match pattern",h.toString())}catch(i){d.addError(b,c,"pattern","Invalid pattern",b.getValueOfProperty("pattern"))}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a,b){if(a.getType()==="number")return a.getValue();return 0},validator:function(a,b,c,d,e,f,g){var h;a.getType()==="string"&&(h=b.getAttribute("minLength"),typeof h=="number"&&a.getValue().length<h&&d.addError(a,b,"minLength","String is less then the required minimum length",h))}},maxLength:{type:"integer",optional:!0,parser:function(a,b){if(a.getType()==="number")return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;a.getType()==="string"&&(h=b.getAttribute("maxLength"),typeof h=="number"&&a.getValue().length>h&&d.addError(a,b,"maxLength","String is greater then the required maximum length",h))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a,b){if(a.getType()==="array")return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j;if(a.getType()!=="undefined"){h=b.getAttribute("enum");if(h){for(i=0,j=h.length;i<j;++i)if(a.equals(h[i]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",h)}}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a,b){if(a.getType()==="string")return a.getValue()},validator:function(b,c,d,e,f,g,h){var i,j;b.getType()==="string"&&(i=c.getAttribute("format"),j=d.getValueOfProperty("formatValidators"),typeof i=="string"&&j[i]!==a[i]&&typeof j[i]=="function"&&!j[i].call(this,b,e)&&e.addError(b,c,"format","String is not in the required format",i))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a,b){if(a.getType()==="number")return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;a.getType()==="number"&&(h=b.getAttribute("maxDecimal"),typeof h=="number"&&(i=a.getValue().toString(10).split(".")[1],i&&i.length>h&&d.addError(a,b,"maxDecimal","The number of decimal places is greater then the allowed maximum",h)))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a,b){if(a.getType()==="string"||a.getType()==="array")return a.getValue()},validator:function(c,d,e,f,g,h,i){var j=b.toArray(d.getAttribute("disallow")),k,l,m,n,o;if(c.getType()!=="undefined"&&j&&j.length){n=e.getValueOfProperty("typeValidators")||{};for(k=0,l=j.length;k<l;++k){m=j[k];if(b.isJSONSchema(m)){o=b.createObject(f),o.errors=[],o.validated=b.clone(f.validated);if(m.validate(c,o,g,h,i).errors.length===0){f.addError(c,d,"disallow","Instance is a disallowed type",j);return!1}}else if(n[m]!==a[m]&&typeof n[m]=="function"&&n[m](c,f)){f.addError(c,d,"disallow","Instance is a disallowed type",j);return!1}}return!0}return!0},typeValidators:d},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,c){if(a.getType()==="object")return a.getEnvironment().createSchema(a,c.getEnvironment().findSchema(c.resolveURI("#")));if(a.getType()==="array")return b.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,c.getEnvironment().findSchema(c.resolveURI("#")))})},validator:function(a,c,d,e,f,g,h){var i=c.getAttribute("extends"),j,k;if(i)if(b.isJSONSchema(i))i.validate(a,e,f,g,h);else if(b.typeOf(i)==="array")for(j=0,k=i.length;j<k;++j)i[j].validate(a,e,f,g,h)}}},optional:!0,"default":{},fragmentResolution:"dot-delimited",parser:function(a,b){if(a.getType()==="object")return a.getEnvironment().createSchema(a,b)},validator:function(c,d,e,f,g,h,i){var j=d.getPropertyNames(),k,l,m=e.getAttribute("properties"),n=c.getEnvironment().getOption("strict"),o;for(k in m)m[k]!==a[k]&&(m[k].getValueOfProperty("validationRequired")&&b.pushUnique(j,k),n&&m[k].getValueOfProperty("deprecated")&&b.popFirst(j,k));for(k=0,l=j.length;k<l;++k)m[j[k]]!==a[j[k]]&&(o=m[j[k]].getValueOfProperty("validator"),typeof o=="function"&&o(c,d,m[j[k]],f,g,h,i))}},g={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,c,d){var e,f=c.getValueOfProperty("items").$ref,g=c.getEnvironment().findSchema(f),h=g&&g.getValueOfProperty("parser"),i;d=b.toArray(d),typeof h=="function"?e=b.mapArray(a.getProperties(),function(a){return h(a,g)}):e=b.toArray(a.getValue()),d[0]&&(e=b.filterArray(e,function(a){return a.rel===d[0]})),d[1]&&(i=c.getValueOfProperty("selfReferenceVariable"),e=b.mapArray(e,function(a){var c=d[1],e=a.href;e=e.replace(/\{(.+)\}/g,function(a,b,d,e){var f;b===i?f=c.getValue():f=c.getValueOfProperty(b);return f!==undefined?String(f):""});return e?b.formatURI(c.resolveURI(e)):e}));return e},selfReferenceVariable:"-this"},fragmentResolution:{type:"string",optional:!0,"default":"dot-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d,e,f,g){var h;a.getType()!=="undefined"&&(h=b.getAttribute("pathStart"),typeof h=="string"&&a.getURI().indexOf(h)!==0&&d.addError(a,b,"pathStart","Instance's URI does not start with "+h,h))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}],initializer:function(a){var d,e,f;d=a._schema.getLink("describedby",a);if(d&&a._schema._uri!==d){if(a._env._schemas[d]){a._schema=a._env._schemas[d],initializer=a._schema.getValueOfProperty("initializer");return typeof initializer=="function"?initializer(a):a}if(a._env._options.validateReferences)throw new c(a,a._schema,"{link:describedby}","Unknown schema reference",d)}d=a._schema.getLink("full",a);if(d&&a._uri!==d){if(a._env._schemas[d]){a=a._env._schemas[d];return a}if(a._env._options.validateReferences)throw new c(a,a._schema,"{link:full}","Unknown schema reference",d)}e=a.getAttribute("extends"),b.isJSONSchema(e)&&(f=b.inherits(e,a,!0),a=a._env.createSchema(f,a._schema,a._uri)),d=a._schema.getLink("self",a),b.typeOf(d)==="string"&&(a._uri=b.formatURI(d));return a}},h={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,c,d){var e=a.getEnvironment(),f=c.getEnvironment(),g=c.getValueOfProperty("additionalProperties").$ref;if(a.getType()==="object")return d?e.createSchema(a.getProperty(d),f.findSchema(c.resolveURI(g))):b.mapObject(a.getProperties(),function(a){return e.createSchema(a,f.findSchema(c.resolveURI(g)))})}}},parser:function(a,c){var d=c.getProperty("properties");if(a.getType()==="object")return b.mapObject(a.getProperties(),function(a,b){var c=d.getProperty(b),e=c&&c.getValueOfProperty("parser");if(typeof e=="function")return e(a,c);return a.getValue()});return a.getValue()}},e.setOption("defaultFragmentDelimiter","."),e.setOption("defaultSchemaURI","http://json-schema.org/draft-00/schema#"),i=e.createSchema(f,!0,"http://json-schema.org/draft-00/schema#"),j=e.createSchema(b.inherits(i,e.createSchema(g,!0,"http://json-schema.org/draft-00/hyper-schema#"),!0),!0,"http://json-schema.org/draft-00/hyper-schema#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-00/hyper-schema#"),k=e.createSchema(h,j,"http://json-schema.org/draft-00/links#"),i=e.createSchema(i.getValue(),j,"http://json-schema.org/draft-00/schema#"),j=e.createSchema(j.getValue(),j,"http://json-schema.org/draft-00/hyper-schema#"),k=e.createSchema(k.getValue(),j,"http://json-schema.org/draft-00/links#"),l=b.inherits(f,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/schema#"}),m=b.inherits(g,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/hyper-schema#"}),n=b.inherits(h,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/links#"}),e.setOption("defaultSchemaURI","http://json-schema.org/draft-01/schema#"),o=e.createSchema(l,!0,"http://json-schema.org/draft-01/schema#"),p=e.createSchema(b.inherits(o,e.createSchema(m,!0,"http://json-schema.org/draft-01/hyper-schema#"),!0),!0,"http://json-schema.org/draft-01/hyper-schema#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-01/hyper-schema#"),q=e.createSchema(n,p,"http://json-schema.org/draft-01/links#"),o=e.createSchema(o.getValue(),p,"http://json-schema.org/draft-01/schema#"),p=e.createSchema(p.getValue(),p,"http://json-schema.org/draft-01/hyper-schema#"),q=e.createSchema(q.getValue(),p,"http://json-schema.org/draft-01/links#"),r=b.inherits(l,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/schema#",properties:{uniqueItems:{type:"boolean",optional:!0,"default":!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j,k,l;if(a.getType()==="array"&&b.getAttribute("uniqueItems")){h=a.getProperties();for(i=0,j=h.length-1;i<j;++i)for(k=i+1,l=h.length;k<l;++k)h[i].equals(h[k])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:i,y:k})}}},maxDecimal:{deprecated:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a,b){if(a.getType()==="number")return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;a.getType()==="number"&&(h=b.getAttribute("divisibleBy"),h===0?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",h):h!==1&&a.getValue()/h%1!==0&&d.addError(a,b,"divisibleBy","Number is not divisible by "+h,h))}}},fragmentResolution:"slash-delimited"}),s=b.inherits(m,{id:"http://json-schema.org/draft-02/hyper-schema#",properties:{fragmentResolution:{"default":"slash-delimited"}}}),t=b.inherits(n,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/links#",properties:{targetSchema:{$ref:"hyper-schema#",parser:p.getAttribute("parser")}}}),e.setOption("defaultFragmentDelimiter","/"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-02/schema#"),u=e.createSchema(r,!0,"http://json-schema.org/draft-02/schema#"),v=e.createSchema(b.inherits(u,e.createSchema(s,!0,"http://json-schema.org/draft-02/hyper-schema#"),!0),!0,"http://json-schema.org/draft-02/hyper-schema#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-02/hyper-schema#"),w=e.createSchema(t,v,"http://json-schema.org/draft-02/links#"),u=e.createSchema(u.getValue(),v,"http://json-schema.org/draft-02/schema#"),v=e.createSchema(v.getValue(),v,"http://json-schema.org/draft-02/hyper-schema#"),w=e.createSchema(w.getValue(),v,"http://json-schema.org/draft-02/links#"),x=b.inherits(r,{$schema:"http://json-schema.org/draft-03/schema#",id:"http://json-schema.org/draft-03/schema#",properties:{patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{},parser:u.getValueOfProperty("properties").properties.parser,validator:function(b,c,d,e,f,g,h){var i,j,k;if(b.getType()==="object"){i=D(b,c,e,d);for(j in i)if(i[j]!==a[j]){k=i[j].length;while(k--)i[j][k].validate(b.getProperty(j),e,b,c,j)}}}},additionalProperties:{validator:function(c,d,e,f,g,h,i){var j,k,l,m,n;if(c.getType()==="object"){j=d.getAttribute("additionalProperties"),k=d.getAttribute("properties")||{},l=c.getProperties(),m=D(c,d);for(n in l)l[n]!==a[n]&&l[n]&&k[n]===a[n]&&m[n]===a[n]&&(b.isJSONSchema(j)?j.validate(l[n],f,c,d,n):j===!1&&f.addError(c,d,"additionalProperties","Additional properties are not allowed",j))}}},items:{validator:function(a,c,d,e,f,g,h){var i,j,k,l,m,n;if(a.getType()==="array"){i=a.getProperties(),j=c.getAttribute("items"),n=c.getAttribute("additionalItems");if(b.typeOf(j)==="array")for(k=0,l=i.length;k<l;++k)m=j[k]||n,m!==!1?m.validate(i[k],e,a,c,k):e.addError(a,c,"additionalItems","Additional items are not allowed",m);else{m=j||n;for(k=0,l=i.length;k<l;++k)m.validate(i[k],e,a,c,k)}}}},additionalItems:{type:[{$ref:"#"},"boolean"],"default":{},parser:u.getValueOfProperty("properties").additionalProperties.parser,validator:function(a,b,c,d,e,f,g){var h,i,j,k;if(a.getType()==="array"&&b.getProperty("items").getType()==="undefined"){h=b.getAttribute("additionalItems"),i=a.getProperties();if(h!==!1)for(j=0,k=i.length;j<k;++j)h.validate(i[j],d,a,b,j);else i.length&&d.addError(a,b,"additionalItems","Additional items are not allowed",h)}}},optional:{validationRequired:!1,deprecated:!0},required:{type:"boolean","default":!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){a.getType()==="undefined"&&b.getAttribute("required")&&d.addError(a,b,"required","Property is required",!0)}},requires:{deprecated:!0},dependencies:{type:"object",additionalProperties:{type:["string","array",{$ref:"#"}],items:{type:"string"}},"default":{},parser:function(a,c,d){function e(a){var b=a.getType();if(b==="string"||b==="array")return a.getValue();if(b==="object")return a.getEnvironment().createSchema(a,c.getEnvironment().findSchema(c.resolveURI("#")))}if(a.getType()==="object")return d?e(a.getProperty(d)):b.mapObject(a.getProperties(),e);return{}},validator:function(c,d,e,f,g,h,i){var j,k,l,m,n,o;if(c.getType()==="object"){j=d.getAttribute("dependencies");for(k in j)if(j[k]!==a[k]&&c.getProperty(k).getType()!=="undefined"){l=j[k],m=b.typeOf(l);if(m==="string")c.getProperty(l).getType()==="undefined"&&f.addError(c,d,"dependencies",'Property "'+k+'" requires sibling property "'+l+'"',j);else if(m==="array")for(n=0,o=l.length;n<o;++n)c.getProperty(l[n]).getType()==="undefined"&&f.addError(c,d,"dependencies",'Property "'+k+'" requires sibling property "'+l[n]+'"',j);else b.isJSONSchema(l)&&l.validate(c,f)}}}},minimumCanEqual:{deprecated:!0},maximumCanEqual:{deprecated:!0},exclusiveMinimum:{type:"boolean","default":!1,parser:function(a,b){return!!a.getValue()}},exclusiveMaximum:{type:"boolean","default":!1,parser:function(a,b){return!!a.getValue()}},minimum:{validator:function(a,b,c,d,e,f,g){var h,i;a.getType()==="number"&&(h=b.getAttribute("minimum"),i=b.getAttribute("exclusiveMinimum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("minimumCanEqual"),typeof h=="number"&&(a.getValue()<h||i===!0&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less then the required minimum value",h))}},maximum:{validator:function(a,b,c,d,e,f,g){var h,i;a.getType()==="number"&&(h=b.getAttribute("maximum"),i=b.getAttribute("exclusiveMaximum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("maximumCanEqual"),typeof h=="number"&&(a.getValue()>h||i===!0&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater then the required maximum value",h))}},contentEncoding:{deprecated:!0},divisibleBy:{exclusiveMinimum:!0},disallow:{items:{type:["string",{$ref:"#"}]},parser:r.properties.type.parser},id:{type:"string",format:"uri"},$ref:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"}},dependencies:{exclusiveMinimum:"minimum",exclusiveMaximum:"maximum"},initializer:function(a){var d,e,f,g=a.getValueOfProperty("$schema"),h=a.getValueOfProperty("$ref"),i=a.getValueOfProperty("id");if(g){d=a.resolveURI(g);if(d&&a._schema._uri!==d){if(a._env._schemas[d]){a._schema=a._env._schemas[d],initializer=a._schema.getValueOfProperty("initializer");return typeof initializer=="function"?initializer(a):a}if(a._env._options.validateReferences)throw new c(a,a._schema,"$schema","Unknown schema reference",d)}}if(h){d=a.resolveURI(h);if(d&&a._uri!==d){if(a._env._schemas[d]){a=a._env._schemas[d];return a}if(a._env._options.validateReferences)throw new c(a,a._schema,"$ref","Unknown schema reference",d)}}e=a.getAttribute("extends"),b.isJSONSchema(e)&&(f=b.inherits(e,a,!0),a=a._env.createSchema(f,a._schema,a._uri)),i&&(d=a.resolveURI(i),b.typeOf(d)==="string"&&(a._uri=b.formatURI(d)));return a}}),y=b.inherits(s,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/hyper-schema#",properties:{links:{selfReferenceVariable:"@"},root:{deprecated:!0},contentEncoding:{deprecated:!1},alternate:{deprecated:!0}}}),z=b.inherits(t,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/links#",properties:{href:{required:!0,format:"link-description-object-template"},rel:{required:!0},properties:{deprecated:!0},schema:{$ref:"http://json-schema.org/draft-03/hyper-schema#"}}}),e.setOption("validateReferences",!0),e.setOption("defaultSchemaURI","http://json-schema.org/draft-03/schema#"),e.createSchema({},!0,"http://json-schema.org/draft-03/schema#"),e.createSchema({},!0,"http://json-schema.org/draft-03/hyper-schema#"),e.createSchema({},!0,"http://json-schema.org/draft-03/links#"),A=e.createSchema(x,!0,"http://json-schema.org/draft-03/schema#"),B=e.createSchema(b.inherits(A,e.createSchema(y,!0,"http://json-schema.org/draft-03/hyper-schema#"),!0),!0,"http://json-schema.org/draft-03/hyper-schema#"),C=e.createSchema(z,!0,"http://json-schema.org/draft-03/links#"),e.setOption("defaultSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),B=e.createSchema(B.getValue(),B,"http://json-schema.org/draft-03/hyper-schema#"),e.setOption("latestJSONSchemaSchemaURI","http://json-schema.org/draft-03/schema#"),e.setOption("latestJSONSchemaHyperSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),e.setOption("latestJSONSchemaLinksURI","http://json-schema.org/draft-03/links#"),e._schemas["http://json-schema.org/schema#"]=A,e._schemas["http://json-schema.org/hyper-schema#"]=B,e._schemas["http://json-schema.org/links#"]=C,b.registerEnvironment("json-schema-draft-03",e),(!b.getDefaultEnvironmentID()||b.getDefaultEnvironmentID()==="json-schema-draft-01"||b.getDefaultEnvironmentID()==="json-schema-draft-02")&&b.setDefaultEnvironmentID("json-schema-draft-03")}();var Showdown={};Showdown.converter=function(){var a,b,c,d=0;this.makeHtml=function(d){a=[],b=[],c=[],d=d.replace(/~/g,"~T"),d=d.replace(/\$/g,"~D"),d=d.replace(/\r\n/g,"\n"),d=d.replace(/\r/g,"\n"),d="\n\n"+d+"\n\n",d=E(d),d=d.replace(/^[ \t]+$/mg,""),d=f(d),d=e(d),d=h(d),d=C(d),d=d.replace(/~D/g,"$$"),d=d.replace(/~T/g,"~");return d};var e=function(c){var c=c.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(c,d,e,f,g){d=d.toLowerCase(),a[d]=y(e);if(f)return f+g;g&&(b[d]=g.replace(/"/g,"&quot;"));return""});return c},f=function(a){a=a.replace(/\n/g,"\n\n");var b="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del",c="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,g),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,g),a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,g),a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,g),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,g),a=a.replace(/\n\n/g,"\n");return a},g=function(a,b){var d=b;d=d.replace(/\n\n/g,"\n"),d=d.replace(/^\n/,""),d=d.replace(/\n+$/g,""),d="\n\n~K"+(c.push(d)-1)+"K\n\n";return d},h=function(a){a=o(a);var b=s("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=q(a),a=r(a),a=w(a),a=f(a),a=x(a);return a},i=function(a){a=t(a),a=j(a),a=z(a),a=m(a),a=k(a),a=A(a),a=y(a),a=v(a),a=a.replace(/  +\n/g," <br />\n");return a},j=function(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");b=F(b,"\\`*_");return b});return a},k=function(a){a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,l),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,l),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,l);return a},l=function(c,d,e,f,g,h,i,j){j==undefined&&(j="");var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(n==""){m==""&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m;if(a[m]!=undefined)n=a[m],b[m]!=undefined&&(o=b[m]);else if(k.search(/\(\s*\)$/m)>-1)n="";else return k}n=F(n,"*_");var p='<a href="'+n+'"';o!=""&&(o=o.replace(/"/g,"&quot;"),o=F(o,"*_"),p+=' title="'+o+'"'),p+=">"+l+"</a>";return p},m=function(a){a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,n),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n);return a},n=function(c,d,e,f,g,h,i,j){var k=d,l=e,m=f.toLowerCase(),n=g,o=j;o||(o="");if(n==""){m==""&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m;if(a[m]!=undefined)n=a[m],b[m]!=undefined&&(o=b[m]);else return k}l=l.replace(/"/g,"&quot;"),n=F(n,"*_");var p='<img src="'+n+'" alt="'+l+'"';o=o.replace(/"/g,"&quot;"),o=F(o,"*_"),p+=' title="'+o+'"',p+=" />";return p},o=function(a){function b(a){return a.replace(/[^\w]/g,"").toLowerCase()}a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return s('<h1 id="'+b(c)+'">'+i(c)+"</h1>")}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return s('<h2 id="'+b(c)+'">'+i(c)+"</h2>")}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){var e=c.length;return s("<h"+e+' id="'+b(d)+'">'+i(d)+"</h"+e+">")});return a},p,q=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;d?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol";d=d.replace(/\n{2,}/g,"\n\n\n");var f=p(d);f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n";return f}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",f=f.replace(/\n{2,}/g,"\n\n\n"),h=p(f);h=e+"<"+g+">\n"+h+"</"+g+">\n";return h})),a=a.replace(/~0/,"");return a};p=function(a){d++,a=a.replace(/\n{2,}$/,"\n"),a+="~0",a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){var f=e,g=b,j=c;g||f.search(/\n{2,}/)>-1?f=h(D(f)):(f=q(D(f)),f=f.replace(/\n$/,""),f=i(f));return"<li>"+f+"</li>\n"}),a=a.replace(/~0/g,""),d--;return a};var r=function(a){a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;d=u(D(d)),d=E(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>";return s(d)+e}),a=a.replace(/~0/,"");return a},s=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(c.push(a)-1)+"K\n\n"},t=function(a){a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){var f=d;f=f.replace(/^([ \t]*)/g,""),f=f.replace(/[ \t]*$/g,""),f=u(f);return b+"<code>"+f+"</code>"});return a},u=function(a){a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=F(a,"*_{}[]\\",!1);return a},v=function(a){a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a},w=function(a){a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=h(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;c=c.replace(/^  /mg,"~0"),c=c.replace(/~0/g,"");return c});return s("<blockquote>\n"+c+"\n</blockquote>")});return a},x=function(a){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");var b=a.split(/\n{2,}/g),d=[],e=b.length;for(var f=0;f<e;f++){var g=b[f];g.search(/~K(\d+)K/g)>=0?d.push(g):g.search(/\S/)>=0&&(g=i(g),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",d.push(g))}e=d.length;for(var f=0;f<e;f++)while(d[f].search(/~K(\d+)K/)>=0){var h=c[RegExp.$1];h=h.replace(/\$/g,"$$$$"),d[f]=d[f].replace(/~K\d+K/,h)}return d.join("\n\n")},y=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;");return a},z=function(a){a=a.replace(/\\(\\)/g,G),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,G);return a},A=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return B(C(b))});return a},B=function(a){function b(a){var b="0123456789ABCDEF",c=a.charCodeAt(0);return b.charAt(c>>4)+b.charAt(c&15)}var c=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+b(a)+";"},function(a){return a}];a="mailto:"+a,a=a.replace(/./g,function(a){if(a=="@")a=c[Math.floor(Math.random()*2)](a);else if(a!=":"){var b=Math.random();a=b>.9?c[2](a):b>.45?c[1](a):c[0](a)}return a}),a='<a href="'+a+'">'+a+"</a>",a=a.replace(/">.+:/g,'">');return a},C=function(a){a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)});return a},D=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"");return a},E=function(a){a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"~A~B"),a=a.replace(/~B(.+?)~A/g,function(a,b,c){var d=b,e=4-d.length%4;for(var f=0;f<e;f++)d+=" ";return d}),a=a.replace(/~A/g,"    "),a=a.replace(/~B/g,"");return a},F=function(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");a=a.replace(e,G);return a},G=function(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}},typeof exports!="undefined"&&(exports.Showdown=Showdown),Bones.initialize("router",function(a,b,c){var d;d=Backbone.Router.extend({routes:{"/reset-password":"resetPassword","/reset-password/:token":"authToken"},send:function(a){this.res&&this.res.send(a)},resetPassword:function(){var c=new b.ResetPassword({title:"Reset password",model:new a.User});this.send((new b.App({view:c})).el)},authToken:function(b){b&&!Bones.server&&(Bones.user=Bones.user||new a.User,Bones.user.tokenLogin({token:b}),Bones.user.bind("auth:status",function(a){$.ajaxSetup({cache:!a.authenticated})}),location.hash="!/"),this.res&&this.res.redirect("/#!"+this.req.url)}}),d&&!d.title&&(d.title="AuthResetPassword");return d}),Bones.initialize("router",function(a,b,c){var d;d=Backbone.Router.extend({routes:{"/":"front","/country/:id":"country","/ranking":"rankingDefault","/ranking/delta/:id":"rankingDelta","/ranking/:id":"ranking","/ranking/readiness/:id":"ranking","/ranking/vulnerability/:id":"ranking","/matrix":"matrix","/about":"overview","/about/:id":"page","/.*":"error"},front:function(){var c=this,d=this.fetcher(),e=new a.Front({id:"front"}),f=new a.IndicatorSummary({id:"gain",years:[b.App.endYear]});d.push(e),d.push(f),d.fetch(function(){var d=new a.Country({id:e.get("featuredFirst")}),g=new a.Country({id:e.get("featuredSecond")}),h=c.fetcher();h.push(d),h.push(g),h.fetch(function(){var e=new a.Countries([d,g]);h.fetch(function(){c.send(b.Front,{model:f,collection:e})})})})},country:function(c){var d=this,e=this.fetcher();if(c.length==3&&_.detect(a.Country.meta,function(a){return c==a.ISO3}))return d.error();var f=new a.Country({id:c});e.push(f),e.fetch(function(a){if(a)return d.error(a);d.send(b.Country,{model:f})})},rankingDelta:function(a){return this.ranking((a||"gain")+"_delta")},rankingDefault:function(a){return this.ranking("gain")},ranking:function(c){var d=this,e=this.fetcher(),f=new a.Ranking({id:c});e.push(f);var g=new a.Ranking({id:"trend"});e.push(g),e.fetch(function(a){if(a)return d.error(a);d.send(b.Ranking,{model:f,trends:g})})},overview:function(){return this.page("overview")},page:function(c){var c=c.split("#").shift(),d=this,e=this.fetcher(),f=new a.Page({id:c});e.push(f);if(c==="download"){var g=new a.Download({id:"data"});e.push(g)}e.fetch(function(a){if(a)return d.error(a);var c={model:f};g&&(c.download=g),d.send(b.Page,c)})},matrix:function(){var c=this,d=this.fetcher(),e=new a.Ranking({id:"vulnerability"});d.push(e);var f=new a.Ranking({id:"readiness"});d.push(f),d.fetch(function(a){if(a)return c.error(a);c.send(b.Matrix,{readiness:f,vulnerability:e})})},error:function(a){this.send(b.Error,_.isArray(a)?a.shift():a)},send:function(a){var b=arguments.length>1?arguments[1]:{},c=new a(b);$("#page").empty().append(c.el),c.render().attach().activeLinks().scrollTop(),_gaq&&_gaq.push(["_trackPageview"]),document.title=c.pageTitle?c.pageTitle+" | GAIN Index":"GAIN Index"},fetcher:function(){var a=[];return{push:function(b){a.push(b)},fetch:function(b){if(!a.length)return b();var c=[],d=_.after(a.length,function(){b(c.length?c:null)});_.each(a,function(a){a.fetch({success:d,error:function(a){c.push(a),d()}})})}}}}),d&&!d.title&&(d.title="App");return d}),Bones.initialize("model",function(a){var b;Bones.server&&(JSV=require("JSV").JSV,Showdown=require("showdown").Showdown);var c;b=Backbone.Model.extend({env:function(){c||(c=JSV.createEnvironment("json-schema-draft-03"),c.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#"),c.setOption("latestJSONSchemaSchemaURI","http://json-schema.org/schema#"),c.setOption("latestJSONSchemaHyperSchemaURI","http://json-schema.org/hyper-schema#"),c.setOption("latestJSONSchemaLinksURI","http://json-schema.org/links#"));return c},schema:{type:"object",properties:{}},validate:function(a){var b=this.validateAttributes(a);return b},getSchema:function(){var a;this.schema.id?a=this.env().findSchema(this.schema.id)||this.env().createSchema(this.schema,undefined,this.schema.id):a=this.env().createSchema(this.schema);return a},validateAttributes:function(a){var b=[],c=this.getSchema().getAttribute("properties");_(a).each(function(a,d){!c[d]||(b=b.concat(c[d].validate(a).errors))});if(b.length)return this.formatErrors(b)},formatErrors:function(a){var b=a.pop(),c=this.env().findSchema(b.schemaUri).getValue();return c.description?c.description:(c.title||b.schemaUri.replace(/.*\//,""))+": "+b.message},renderer:function(a){a=a||{};var b=this,c=function(b,c){var d=function(c){var d=b.schema.properties&&b.schema.properties[c]&&b.schema.properties[c].format;a.formatters&&a.formatters[c]&&(d=a.formatters[c]);if(d&&b.renderers[d])return renderer=b.renderers[d].apply(b,[b.get(c)]);return b.escape(c)},e=function(a){var c=b.schema&&b.schema.properties&&b.schema.properties[a]&&b.schema.properties[a].title;c=c||"";return c.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};return _.extend({render:d,title:e},c)},d={};a.editable?_(this.schema.properties||{}).chain().keys().each(function(a){d[a]=a}):_(this.toJSON()).chain().keys().filter(function(a){return b.get(a)}).each(function(a){d[a]=a});return a.keys?d:new c(this,d)},renderers:{raw:function(a){return a},markdown:function(a){a=this.stripTags(a||"");return(new Showdown.converter).makeHtml(a)}},edit:function(a,b,c){var d=this.schema.properties&&this.schema.properties[c]&&this.schema.properties[c].format,e=this.editors[d]||this.editors["default"];return e[a].call(this,b,c)},editors:{"default":{form:function(a,b){a.attr("contentEditable",!0)},value:function(a,b){return a.text()}},select:{form:function(a,b){var c=$("<select></select>").attr("class",a.attr("class"));_.each(this.schema.properties[b]["enum"],function(a){var b=$("<option></option>").val(a).text(a);c.append(b)}),c.val(this.get(b)),a.replaceWith(c)},value:function(a,b){return a.val()}},markdown:{form:function(a,b){var c=$("<textarea></textarea>").val(this.get(b)).attr("class",a.attr("class"));a.replaceWith(c);var d=function(){return c.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999,height:0,minHeight:0,width:c.css("width"),paddingTop:$.browser.msie?0:c.css("paddingTop"),paddingRight:$.browser.msie?0:c.css("paddingRight"),paddingBottom:$.browser.msie?0:c.css("paddingBottom"),paddingLeft:$.browser.msie?0:c.css("paddingLeft"),lineHeight:c.css("lineHeight"),textDecoration:c.css("textDecoration"),letterSpacing:c.css("letterSpacing")}).attr("tabIndex","-1").insertBefore(c)}(),e=function(){d.val($(this).val()).scrollTop(1e4);var a=d.scrollTop();$.browser.msie||_.each(["top","bottom"],function(b){b=c.css("padding-"+b),a+=b?parseInt(b.replace(/px$/,"")):0}),a+=parseInt(d.css("line-height").replace(/px$/,"")),$(this).height(a)};c.bind("keyup",e).bind("keydown",e).bind("change",e),e.call(c)},value:function(a,b){return a.val()}}},stripTags:function(a){var b=arguments[1]||"a|b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|img|li|ol|p|pre|sup|sub|strong|strike|ul|br|hr|table|thead|th|tbody|tr|td|div|span",c=arguments[2]||{img:"src|width|height|alt",a:"href",td:"rowspan|colspan",table:"cellspacing","*":"title|id|class"};testAllowed=new RegExp("^("+b.toLowerCase()+")$"),findTags=/<(\/?)\s*([\w:\-]+)([^>]*)>/g,findAttribs=/(\s*)([\w:-]+)\s*=\s*(["'])([^\3]+?)(?:\3)/g;for(var d in c)c.hasOwnProperty(d)&&(c[d]=new RegExp("^("+c[d].toLowerCase()+")$"));return a.replace(findTags,function(a,b,d,e){var f,g,h=e.substr(-1)=="/"&&"/"||"";d=d.toLowerCase();if(!d.match(testAllowed))return"";f=d in c&&c[d],g="*"in c&&c["*"];if(!f&&!g)return"<"+b+d+h+">";e=e.trim(),h&&(e=e.substr(0,e.length-1)),e=e.replace(findAttribs,function(a,b,c,d,e){c=c.toLowerCase(),c=="href"&&e.trim().substr(0,"javascript:".length)=="javascript:"&&(e="#");return g&&c.match(g)||f&&c.match(f)?b+c+"="+d+e+d:""});return"<"+b+d+(e?" "+e:"")+h+">"})}}),b&&!b.title&&(b.title="Document");return b}),Bones.initialize("model",function(a){var b,c={schema:{type:"object",id:"User",properties:{id:{type:"string",title:"Username",pattern:"^[A-Za-z0-9-_ ]+$",required:!0,minLength:1},password:{type:"string",title:"Password"},email:{type:"string",title:"Email address",format:"email"}}},url:function(){return"/api/User/"+encodeURIComponent(this.id)},authUrl:"/api/Auth",authenticated:!1,initialize:function(){_.bindAll(this,"success","error")},success:function(a){a.id!==null?(this.set(a),this.authenticated=!0):(this.clear(),this.authenticated=!1),this.trigger("auth:status",this)},error:function(a){try{var b=$.parseJSON(a.responseText);b=b.message||b}catch(c){var b=a.responseText}this.trigger("auth:error",this,{error:b})},request:function(a,b){b||(b={});var c;if(a==="POST"&&this.validate&&(c=this.validate(b))){this.trigger("auth:error",this,c);return!1}var d=_.isFunction(this.authUrl)?this.authUrl():this.authUrl;d=b.url||d,d+=(/\?/.test(d)?"&":"?")+"_="+$.now(),a!=="GET"&&(b["bones.token"]=Backbone.csrf(d)),$.ajax({url:d,type:a,contentType:"application/json",processData:a==="GET",data:a==="GET"?b:JSON.stringify(b),dataType:"json",success:b.success||this.success,error:b.error||this.error});return this},status:function(a){return this.request("GET",a)},login:function(a){return this.request("POST",a)},logout:function(a){return this.request("DELETE",a)},resetPassword:function(a){_.defaults(a,{url:"/api/reset-password/"+a.id});return this.request("POST",a)},tokenLogin:function(a){a.token&&(a.url="/api/reset-password/"+a.token,delete a.token);return this.request("GET",a)}};a.Document?b=a.Document.extend(c):b=Backbone.Model.extend(c),b.augment({validate:function(a,b){if(!_.isUndefined(b.id)&&!_.isUndefined(b.password)){if(!b.id)return new Error("Username is required.");if(!b.password)return new Error("Password is required.")}if(!_.isUndefined(b.email)&&!b.email)return new Error("Email is required.");if(!_.isUndefined(b.password)&&!_.isUndefined(b.passwordConfirm)){if(!b.password)return new Error("Password is required.");if(!b.passwordConfirm)return new Error("Password confirmation is required.");if(b.password!==b.passwordConfirm)return new Error("Passwords do not match.")}a&&a.call(this,b)}}),b&&!b.title&&(b.title="User");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Collection.extend({model:a.User,url:"/api/User",comparator:function(a){return a.id.toLowerCase()}}),b&&!b.title&&(b.title="Users");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Collection.extend({model:a.Country}),b&&!b.title&&(b.title="Countries");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Model.extend({url:function(){return"/api/Country/"+encodeURIComponent(this.get("id"))},parse:function(b){b.indicators=new a.Indicators(b.indicators);return b},initialize:function(c,d){c.id&&!b.meta.hasOwnProperty(c.id)&&c.id.length>3?this.set({id:this.pathToId(c.id)}):b.meta[this.id]&&this.set(b.meta[this.id],{silent:!0});var e=new a.Indicators(c.indicators);this.set({indicators:e},{silent:!0})},meta:function(a){return b.meta[this.id][a]||""},pathToId:function(a){return b.pathToId(a)},path:function(){return b.path(b.meta[this.get("id")].name)}}),Backbone.Model.escapeHTML=function(a){return a.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27").replace(/\//g,"&#x2F;")},b.pathToId=function(a){return _.detect(b.meta,function(c){return b.path(c.name)==a}).ISO3},b.path=function(a){return a.toLowerCase().replace(/[^a-zA-Z0-9]+/gi,"-")},b.pathSafe=function(a){a.length==3&&_.detect(b.meta,function(b){return a==b.ISO3})&&(a=_.detect(b.meta,function(b){return b.ISO3==a}).name);return a.toLowerCase().replace(/[^a-zA-Z0-9]+/gi,"-")},b.meta={AFG:{ISO3:"AFG",name:"Afghanistan",oecd_value:"1",oecd_income:"Low",coords:[60.4867744445801,29.386604309082,74.8923110961914,38.4736747741699]},ALB:{ISO3:"ALB",name:"Albania",oecd_value:"2",oecd_income:"Lower middle",coords:[19.2720317840576,39.6370124816895,21.0366802215576,42.6548156738281]},DZA:{ISO3:"DZA",name:"Algeria",oecd_value:"3",oecd_income:"Upper middle",coords:[-8.68238544464111,18.9755611419678,11.968861579895,37.0937614440918]},AND:{ISO3:"AND",name:"Andorra",oecd_value:"4",oecd_income:"Upper",coords:[1.40645623207092,42.4286766052246,1.76509082317352,42.6493644714355]},AGO:{ISO3:"AGO",name:"Angola",oecd_value:"3",oecd_income:"Upper middle",coords:[11.6636590957642,-18.0314064025879,24.0617160797119,-4.3912034034729]},ATG:{ISO3:"ATG",name:"Antigua and Barbuda",oecd_value:"3",oecd_income:"Upper middle",coords:[-61.8934020996094,16.9890918731689,-61.6668510437012,17.7274990081787]},ARG:{ISO3:"ARG",name:"Argentina",oecd_value:"3",oecd_income:"Upper middle",coords:[-73.5880432128906,-55.0520935058594,-53.661548614502,-21.786937713623]},ARM:{ISO3:"ARM",name:"Armenia",oecd_value:"2",oecd_income:"Lower middle",coords:[43.4362907409668,38.8637008666992,46.6026153564453,41.290454864502]},AUS:{ISO3:"AUS",name:"Australia",oecd_value:"4",oecd_income:"Upper",coords:[112.907241821289,-54.7504043579102,159.106658935547,-9.2401065826416]},AUT:{ISO3:"AUT",name:"Austria",oecd_value:"4",oecd_income:"Upper",coords:[9.52115440368652,46.3786430358887,17.1483383178711,49.0097770690918]},AZE:{ISO3:"AZE",name:"Azerbaijan",oecd_value:"3",oecd_income:"Upper middle",coords:[44.7745552062988,38.3926429748535,50.626091003418,41.8904418945312]},BHS:{ISO3:"BHS",name:"Bahamas",oecd_value:"4",oecd_income:"Upper",coords:[-79.5943374633789,20.9175338745117,-72.7453994750977,26.9282817840576]},BHR:{ISO3:"BHR",name:"Bahrain",oecd_value:"4",oecd_income:"Upper",coords:[50.4492988586426,25.7892780303955,50.6210250854492,26.2423801422119]},BGD:{ISO3:"BGD",name:"Bangladesh",oecd_value:"1",oecd_income:"Low",coords:[88.0217895507812,20.7384757995605,92.6428527832031,26.6235446929932]},BRB:{ISO3:"BRB",name:"Barbados",oecd_value:"4",oecd_income:"Upper",coords:[-59.6534881591797,13.0509357452393,-59.4261856079102,13.3443813323975]},BLR:{ISO3:"BLR",name:"Belarus",oecd_value:"3",oecd_income:"Upper middle",coords:[23.1656436920166,51.235164642334,32.7195358276367,56.1568069458008]},BEL:{ISO3:"BEL",name:"Belgium",oecd_value:"4",oecd_income:"Upper",coords:[2.52216100692749,49.4951019287109,6.37448406219482,51.4964294433594]},BLZ:{ISO3:"BLZ",name:"Belize",oecd_value:"2",oecd_income:"Lower middle",coords:[-89.2365188598633,15.8796510696411,-87.7822570800781,18.490758895874]},BEN:{ISO3:"BEN",name:"Benin",oecd_value:"1",oecd_income:"Low",coords:[.759880781173706,6.21362686157227,3.83741927146912,12.3992443084717]},BTN:{ISO3:"BTN",name:"Bhutan",oecd_value:"2",oecd_income:"Lower middle",coords:[88.7300643920898,26.6961479187012,92.0887832641602,28.3206253051758]},BOL:{ISO3:"BOL",name:"Bolivia",oecd_value:"2",oecd_income:"Lower middle",coords:[-69.6664962768555,-22.8972587585449,-57.4656600952148,-9.6798210144043]},BIH:{ISO3:"BIH",name:"Bosnia & Herzegovina",oecd_value:"3",oecd_income:"Upper middle",coords:[15.715877532959,42.5593223571777,19.6189994812012,45.2845344543457]},BWA:{ISO3:"BWA",name:"Botswana",oecd_value:"3",oecd_income:"Upper middle",coords:[19.9783458709717,-26.8917942047119,29.3500747680664,-17.7818069458008]},BRA:{ISO3:"BRA",name:"Brazil",oecd_value:"3",oecd_income:"Upper middle",coords:[-74.0184783935547,-33.7422828674316,-28.8763446807861,5.26722526550293]},BRN:{ISO3:"BRN",name:"Brunei Darussalam",oecd_value:"4",oecd_income:"Upper",coords:[113.999168395996,4.01668071746826,115.360748291016,5.05705690383911]},BGR:{ISO3:"BGR",name:"Bulgaria",oecd_value:"3",oecd_income:"Upper middle",coords:[22.3450222015381,41.2381019592285,28.6040210723877,44.2284126281738]},BFA:{ISO3:"BFA",name:"Burkina Faso",oecd_value:"1",oecd_income:"Low",coords:[-5.52257823944092,9.39188194274902,2.39016890525818,15.0799083709717]},BDI:{ISO3:"BDI",name:"Burundi",oecd_value:"1",oecd_income:"Low",coords:[28.9868907928467,-4.46334409713745,30.833963394165,-2.30306220054626]},KHM:{ISO3:"KHM",name:"Cambodia",oecd_value:"1",oecd_income:"Low",coords:[102.313423156738,10.4157733917236,107.61051940918,14.7045822143555]},CMR:{ISO3:"CMR",name:"Cameroon",oecd_value:"2",oecd_income:"Lower middle",coords:[8.5056095123291,1.6545512676239,16.2077236175537,13.0811414718628]},CAN:{ISO3:"CAN",name:"Canada",oecd_value:"4",oecd_income:"Upper",coords:[-141.005554199219,41.6690826416016,-52.6159286499023,83.1161193847656]},CPV:{ISO3:"CPV",name:"Cape Verde",oecd_value:"2",oecd_income:"Lower middle",coords:[-25.3597145080566,14.8037738800049,-22.6658458709717,17.1963691711426]},CAF:{ISO3:"CAF",name:"Central African Rep.",articleName:"The Central African Rep.",oecd_value:"1",oecd_income:"Low",coords:[14.3872652053833,2.23645353317261,27.4413013458252,11.000828742981]},TCD:{ISO3:"TCD",name:"Chad",oecd_value:"1",oecd_income:"Low",coords:[13.4491834640503,7.45556640625,23.9844074249268,23.4447212219238]},CHL:{ISO3:"CHL",name:"Chile",oecd_value:"3",oecd_income:"Upper middle",coords:[-128.0146408081056,-14.143504962421762,-8.483390808105616,-57.4487944678912]},CHN:{ISO3:"CHN",name:"China",oecd_value:"3",oecd_income:"Upper middle",coords:[73.6022491455078,18.1691493988037,134.772583007812,53.5694465637207]},COL:{ISO3:"COL",name:"Colombia",oecd_value:"3",oecd_income:"Upper middle",coords:[-81.7228927612305,-4.23648452758789,-66.8750534057617,13.3737592697144]},COM:{ISO3:"COM",name:"Comoros",oecd_value:"1",oecd_income:"Low",coords:[43.2137718200684,-12.3805360794067,44.5295639038086,-11.3613719940186]},COG:{ISO3:"COG",name:"Congo",oecd_value:"2",oecd_income:"Lower middle",coords:[11.1275682449341,-5.01343965530396,18.6424083709717,3.70827627182007]},COD:{ISO3:"COD",name:"Dem. Rep. of the Congo",articleName:"The Dem. Rep. of the Congo",oecd_value:"1",oecd_income:"Low",coords:[12.2109127044678,-13.4583511352539,31.2804470062256,5.37528038024902]},CRI:{ISO3:"CRI",name:"Costa Rica",oecd_value:"3",oecd_income:"Upper middle",coords:[-87.1168518066406,5.51488399505615,-82.5628356933594,11.2099370956421]},CIV:{ISO3:"CIV",name:"Côte d'Ivoire",oecd_value:"2",oecd_income:"Lower middle",coords:[-8.61872005462646,4.34392166137695,-2.50632786750793,10.7264785766602]},HRV:{ISO3:"HRV",name:"Croatia",oecd_value:"4",oecd_income:"Upper",coords:[13.5018930435181,42.4160423278809,19.4078388214111,46.5469818115234]},CUB:{ISO3:"CUB",name:"Cuba",oecd_value:"3",oecd_income:"Upper middle",coords:[-84.948844909668,19.8276271820068,-74.1321334838867,23.2655582427979]},CYP:{ISO3:"CYP",name:"Cyprus",oecd_value:"4",oecd_income:"Upper",coords:[32.2723236083984,34.6250190734863,34.099552154541,35.1868476867676]},CZE:{ISO3:"CZE",name:"Czech Republic",articleName:"The Czech Republic",oecd_value:"4",oecd_income:"Upper",coords:[12.0761404037476,48.5579147338867,18.8374347686768,51.0400123596191]},DNK:{ISO3:"DNK",name:"Denmark",oecd_value:"4",oecd_income:"Upper",coords:[8.09457492828369,54.5682945251465,15.1518707275391,57.7508964538574]},DJI:{ISO3:"DJI",name:"Djibouti",oecd_value:"2",oecd_income:"Lower middle",coords:[41.7491073608398,10.9298248291016,43.4192428588867,12.7077531814575]},DMA:{ISO3:"DMA",name:"Dominica",oecd_value:"3",oecd_income:"Upper middle",coords:[-61.4882583618164,15.2016563415527,-61.2485542297363,15.6336727142334]},DOM:{ISO3:"DOM",name:"Dominican Republic",articleName:"The Dominican Republic",oecd_value:"3",oecd_income:"Upper middle",coords:[-72.0098419189453,17.545337677002,-68.3278884887695,19.9374923706055]},ECU:{ISO3:"ECU",name:"Ecuador",oecd_value:"3",oecd_income:"Upper middle",coords:[-92.0116195678711,-5.0113730430603,-75.2272567749023,1.66436982154846]},EGY:{ISO3:"EGY",name:"Egypt",oecd_value:"2",oecd_income:"Lower middle",coords:[24.6883411407471,21.9943675994873,36.8995895385742,31.6563129425049]},SLV:{ISO3:"SLV",name:"El Salvador",oecd_value:"2",oecd_income:"Lower middle",coords:[-90.1147842407227,13.1584482192993,-87.7036056518555,14.4453735351562]},GNQ:{ISO3:"GNQ",name:"Equatorial Guinea",oecd_value:"4",oecd_income:"Upper",coords:[2.8933684825897257,4.878952623262264,17.834774732589732,-2.1458884610306055]},ERI:{ISO3:"ERI",name:"Eritrea",oecd_value:"1",oecd_income:"Low",coords:[36.4236450195312,12.3600215911865,43.124324798584,18.0046920776367]},EST:{ISO3:"EST",name:"Estonia",oecd_value:"4",oecd_income:"Upper",coords:[21.8329086303711,57.5158157348633,28.1864757537842,59.6706237792969]},ETH:{ISO3:"ETH",name:"Ethiopia",oecd_value:"1",oecd_income:"Low",coords:[32.9897994995117,3.40333342552185,47.9791717529297,14.8795328140259]},FJI:{ISO3:"FJI",name:"Fiji",oecd_value:"2",oecd_income:"Lower middle",coords:[171.6721649169924,-14.082745030178442,186.61357116699244,-20.78639440187599]},FIN:{ISO3:"FIN",name:"Finland",oecd_value:"4",oecd_income:"Upper",coords:[20.6231632232666,59.8109741210938,31.5695266723633,70.0753173828125]},FRA:{ISO3:"FRA",name:"France",oecd_value:"4",oecd_income:"Upper",coords:[-10.705402374267624,51.38093373479068,19.17741012573238,41.749469749321136]},GAB:{ISO3:"GAB",name:"Gabon",oecd_value:"3",oecd_income:"Upper middle",coords:[8.69608879089355,-3.91340351104736,14.4989910125732,2.32249522209167]},GMB:{ISO3:"GMB",name:"Gambia",oecd_value:"1",oecd_income:"Low",coords:[-16.8290729522705,13.0648365020752,-13.8187122344971,13.8199844360352]},GEO:{ISO3:"GEO",name:"Georgia",oecd_value:"2",oecd_income:"Lower middle",coords:[39.9859085083008,41.0441093444824,46.6948051452637,43.5758438110352]},DEU:{ISO3:"DEU",name:"Germany",oecd_value:"4",oecd_income:"Upper",coords:[5.85248947143555,47.2711181640625,15.0220594406128,55.0650672912598]},GHA:{ISO3:"GHA",name:"Ghana",oecd_value:"2",oecd_income:"Lower middle",coords:[-3.2625093460083,4.73692083358765,1.18796849250793,11.162938117981]},GRC:{ISO3:"GRC",name:"Greece",oecd_value:"4",oecd_income:"Upper",coords:[19.6269454956055,34.8147201538086,28.2403240203857,41.7504768371582]},GRD:{ISO3:"GRD",name:"Grenada",oecd_value:"3",oecd_income:"Upper middle",coords:[-61.7897415161133,12.0026273727417,-61.4208946228027,12.5296239852905]},GTM:{ISO3:"GTM",name:"Guatemala",oecd_value:"2",oecd_income:"Lower middle",coords:[-92.2454528808594,13.7492389678955,-88.2207336425781,17.8160209655762]},GIN:{ISO3:"GIN",name:"Guinea",oecd_value:"1",oecd_income:"Low",coords:[-15.0804443359375,7.19020795822144,-7.66244745254517,12.6733884811401]},GNB:{ISO3:"GNB",name:"Guinea-Bissau",oecd_value:"1",oecd_income:"Low",coords:[-16.7277870178223,10.9274473190308,-13.6607112884521,12.6794347763062]},GUY:{ISO3:"GUY",name:"Guyana",oecd_value:"2",oecd_income:"Lower middle",coords:[-61.3967132568359,1.18582010269165,-56.4818153381348,8.55779933929443]},HTI:{ISO3:"HTI",name:"Haiti",oecd_value:"1",oecd_income:"Low",coords:[-74.4884262084961,18.0257740020752,-71.6391067504883,20.0895767211914]},HND:{ISO3:"HND",name:"Honduras",oecd_value:"2",oecd_income:"Lower middle",coords:[-89.3637924194336,12.9797763824463,-83.1295928955078,17.4184226989746]},HUN:{ISO3:"HUN",name:"Hungary",oecd_value:"4",oecd_income:"Upper",coords:[16.0940341949463,45.741340637207,22.8776016235352,48.5692329406738]},ISL:{ISO3:"ISL",name:"Iceland",oecd_value:"4",oecd_income:"Upper",coords:[-24.5392475128174,63.3964385986328,-13.5023231506348,66.5637969970703]},IND:{ISO3:"IND",name:"India",oecd_value:"2",oecd_income:"Lower middle",coords:[68.1438293457031,6.74540328979492,97.3622589111328,35.4953079223633]},IDN:{ISO3:"IDN",name:"Indonesia",oecd_value:"2",oecd_income:"Lower middle",coords:[95.0129318237305,-10.9227437973022,140.977630615234,5.90995073318481]},IRN:{ISO3:"IRN",name:"Iran",oecd_value:"3",oecd_income:"Upper middle",coords:[44.0148620605469,25.0767631530762,63.3196296691895,39.7715301513672]},IRQ:{ISO3:"IRQ",name:"Iraq",oecd_value:"2",oecd_income:"Lower middle",coords:[38.7745094299316,29.0631351470947,48.5597038269043,37.3754997253418]},IRL:{ISO3:"IRL",name:"Ireland",oecd_value:"4",oecd_income:"Upper",coords:[-10.4775733947754,51.4454116821289,-5.99288511276245,55.3860778808594]},ISR:{ISO3:"ISR",name:"Israel",oecd_value:"4",oecd_income:"Upper",coords:[34.2482757568359,29.4894409179688,35.8880729675293,33.4067230224609]},ITA:{ISO3:"ITA",name:"Italy",oecd_value:"4",oecd_income:"Upper",coords:[-0.2716817855834601,47.66987226323962,29.611130714416547,37.34051938010092]},JAM:{ISO3:"JAM",name:"Jamaica",oecd_value:"3",oecd_income:"Upper middle",coords:[-78.3739242553711,17.7030029296875,-76.187255859375,18.5249176025391]},JPN:{ISO3:"JPN",name:"Japan",oecd_value:"4",oecd_income:"Upper",coords:[122.938415527344,24.2120876312256,153.985626220703,45.5201187133789]},JOR:{ISO3:"JOR",name:"Jordan",oecd_value:"3",oecd_income:"Upper middle",coords:[34.9498329162598,29.1899490356445,39.2919998168945,33.3716888427734]},KAZ:{ISO3:"KAZ",name:"Kazakhstan",oecd_value:"3",oecd_income:"Upper middle",coords:[46.4782752990723,40.5846519470215,87.3237991333008,55.4345512390137]},KEN:{ISO3:"KEN",name:"Kenya",oecd_value:"1",oecd_income:"Low",coords:[33.8904647827148,-4.67780160903931,41.8850212097168,5.49173355102539]},KIR:{ISO3:"KIR",name:"Kiribati",oecd_value:"2",oecd_income:"Lower middle",coords:[186.17839813232447,9.558083490031526,216.06121063232447,-4.455277103043589]},PRK:{ISO3:"PRK",name:"Dem. People's Rep. of Korea",articleName:"The Dem. People's Rep. of Korea",oecd_value:"1",oecd_income:"Low",coords:[124.322105407715,37.6754264831543,130.700485229492,43.0102729797363]},KOR:{ISO3:"KOR",name:"Republic of Korea",articleName:"The Republic of Korea",oecd_value:"4",oecd_income:"Upper",coords:[124.613967895508,33.1972999572754,130.920928955078,38.5783462524414]},KWT:{ISO3:"KWT",name:"Kuwait",oecd_value:"4",oecd_income:"Upper",coords:[46.5324325561523,28.533504486084,48.4329948425293,30.098217010498]},KGZ:{ISO3:"KGZ",name:"Kyrgyzstan",oecd_value:"1",oecd_income:"Low",coords:[69.2262954711914,39.1892356872559,80.2575607299805,43.2617034912109]},LAO:{ISO3:"LAO",name:"Laos",oecd_value:"2",oecd_income:"Lower middle",coords:[100.097068786621,13.9154558181763,107.664367675781,22.4960441589355]},LVA:{ISO3:"LVA",name:"Latvia",oecd_value:"3",oecd_income:"Upper middle",coords:[20.9691886901855,55.6669883728027,28.2172756195068,58.0751419067383]},LBN:{ISO3:"LBN",name:"Lebanon",oecd_value:"3",oecd_income:"Upper middle",coords:[35.1001091003418,33.0555801391602,36.6041030883789,34.6875495910645]},LSO:{ISO3:"LSO",name:"Lesotho",oecd_value:"2",oecd_income:"Lower middle",coords:[27.0021533966064,-30.6588001251221,29.4359092712402,-28.5707607269287]},LBR:{ISO3:"LBR",name:"Liberia",oecd_value:"1",oecd_income:"Low",coords:[-11.4755487442017,4.34707403182983,-7.38411808013916,8.56539630889893]},LBY:{ISO3:"LBY",name:"Libya",oecd_value:"3",oecd_income:"Upper middle",coords:[9.28654289245605,19.4961223602295,25.1568412780762,33.181079864502]},LIE:{ISO3:"LIE",name:"Liechtenstein",oecd_value:"4",oecd_income:"Upper",coords:[9.47588539123535,47.0523986816406,9.61572360992432,47.2628021240234]},LTU:{ISO3:"LTU",name:"Lithuania",oecd_value:"3",oecd_income:"Upper middle",coords:[20.9253673553467,53.8868408203125,26.8007221221924,56.4426040649414]},LUX:{ISO3:"LUX",name:"Luxembourg",oecd_value:"4",oecd_income:"Upper",coords:[5.71492719650269,49.4413223266602,6.50257968902588,50.174976348877]},MDG:{ISO3:"MDG",name:"Madagascar",oecd_value:"1",oecd_income:"Low",coords:[43.2232818603516,-25.5985412597656,50.5042877197266,-11.9437656402588]},MWI:{ISO3:"MWI",name:"Malawi",oecd_value:"1",oecd_income:"Low",coords:[32.6633071899414,-17.1353359222412,35.9043006896973,-9.38123416900635]},MYS:{ISO3:"MYS",name:"Malaysia",oecd_value:"3",oecd_income:"Upper middle",coords:[99.6454162597656,.851370334625244,119.278388977051,7.35562467575073]},MDV:{ISO3:"MDV",name:"Maldives",oecd_value:"3",oecd_income:"Upper middle",coords:[72.6852035522461,-0.688690721988678,73.7535705566406,7.10706090927124]},MLI:{ISO3:"MLI",name:"Mali",oecd_value:"1",oecd_income:"Low",coords:[-12.2641305923462,10.1400537490845,4.23563766479492,24.9950656890869]},MLT:{ISO3:"MLT",name:"Malta",oecd_value:"4",oecd_income:"Upper",coords:[14.183970451355,35.8010177612305,14.567720413208,36.0753211975098]},MHL:{ISO3:"MHL",name:"Marshall Islands",articleName:"The Marshall Islands",oecd_value:"2",oecd_income:"Lower middle",coords:[165.282440185547,4.57359790802002,172.02995300293,14.6102209091187]},MRT:{ISO3:"MRT",name:"Mauritania",oecd_value:"1",oecd_income:"Low",coords:[-17.0811767578125,14.7343988418579,-4.82161283493042,27.2854175567627]},MUS:{ISO3:"MUS",name:"Mauritius",oecd_value:"3",oecd_income:"Upper middle",coords:[50.86155700683597,-17.166826214014687,65.80296325683595,-23.74995445221894]},MEX:{ISO3:"MEX",name:"Mexico",oecd_value:"3",oecd_income:"Upper middle",coords:[-118.406364440918,14.5460634231567,-86.6998443603516,32.7128372192383]},FSM:{ISO3:"FSM",name:"Micronesia",articleName:"The Federated States of Micronesia",oecd_value:"2",oecd_income:"Lower middle",coords:[138.064056396484,5.26970529556274,163.046783447266,9.5886926651001]},MDA:{ISO3:"MDA",name:"Moldova",oecd_value:"2",oecd_income:"Lower middle",coords:[26.6178874969482,45.4617729187012,30.1315765380859,48.4860343933105]},MCO:{ISO3:"MCO",name:"Monaco",oecd_value:"4",oecd_income:"Upper",coords:[7.37007141113281,43.7306098937988,7.42949962615967,43.7635078430176]},MKD:{ISO3:"MKD",name:"Macedonia",oecd_value:"3",oecd_income:"Upper middle",coords:[20.4441566467285,40.8493919372559,23.0095825195312,42.3703384399414]},MNG:{ISO3:"MNG",name:"Mongolia",oecd_value:"2",oecd_income:"Lower middle",coords:[87.7357025146484,41.5861434936523,119.907028198242,52.1295852661133]},MNE:{ISO3:"MNE",name:"Montenegro",oecd_value:"3",oecd_income:"Upper middle",coords:[18.4335289001465,41.8520698547363,20.3551712036133,43.5478858947754]},MAR:{ISO3:"MAR",name:"Morocco",oecd_value:"2",oecd_income:"Lower middle",coords:[-17.0130920410156,21.4200630187988,-1.03199946880341,35.9241676330566]},MOZ:{ISO3:"MOZ",name:"Mozambique",oecd_value:"1",oecd_income:"Low",coords:[30.2138442993164,-26.8602733612061,40.8485984802246,-10.4692296981812]},MMR:{ISO3:"MMR",name:"Myanmar",oecd_value:"1",oecd_income:"Low",coords:[92.1749725341797,9.79053974151611,101.173858642578,28.5384674072266]},NAM:{ISO3:"NAM",name:"Namibia",oecd_value:"3",oecd_income:"Upper middle",coords:[11.7182292938232,-28.9593696594238,25.2597808837891,-16.9510555267334]},NRU:{ISO3:"NRU",name:"Nauru",oecd_value:"1",oecd_income:"Low",coords:[166.907150268555,-0.552058219909668,166.958526611328,-0.490563243627548]},NPL:{ISO3:"NPL",name:"Nepal",oecd_value:"1",oecd_income:"Low",coords:[80.0302810668945,26.3437671661377,88.169075012207,30.4169044494629]},NLD:{ISO3:"NLD",name:"Netherlands",articleName:"The Netherlands",oecd_value:"4",oecd_income:"Upper",coords:[-1.8688254356383949,54.31993614360549,13.072580814361578,50.011499339843866]},NZL:{ISO3:"NZL",name:"New Zealand",oecd_value:"4",oecd_income:"Upper",coords:[144.14471435546852,-29.89150189051426,203.91033935546844,-50.99535270744034]},NIC:{ISO3:"NIC",name:"Nicaragua",oecd_value:"2",oecd_income:"Lower middle",coords:[-87.6850357055664,10.7134809494019,-82.7249145507812,15.0309705734253]},NER:{ISO3:"NER",name:"Niger",oecd_value:"1",oecd_income:"Low",coords:[.152941107749939,11.6957721710205,15.9703226089478,23.5173530578613]},NGA:{ISO3:"NGA",name:"Nigeria",oecd_value:"2",oecd_income:"Lower middle",coords:[2.67108178138733,4.27193641662598,14.6699361801147,13.8802909851074]},NOR:{ISO3:"NOR",name:"Norway",oecd_value:"4",oecd_income:"Upper",coords:[-42.75743150711057,74.34057839711801,76.77381849288943,49.69032369242939]},OMN:{ISO3:"OMN",name:"Oman",oecd_value:"4",oecd_income:"Upper",coords:[51.9786148071289,16.642032623291,59.8450622558594,26.3857822418213]},PAK:{ISO3:"PAK",name:"Pakistan",oecd_value:"2",oecd_income:"Lower middle",coords:[60.8443756103516,23.6943168640137,77.0489730834961,37.0544853210449]},PLW:{ISO3:"PLW",name:"Palau",oecd_value:"3",oecd_income:"Upper middle",coords:[131.131134033203,2.94901990890503,134.663543701172,7.73389625549316]},PAN:{ISO3:"PAN",name:"Panama",oecd_value:"3",oecd_income:"Upper middle",coords:[-83.0532531738281,7.20555591583252,-77.1632690429688,9.62416839599609]},PNG:{ISO3:"PNG",name:"Papua New Guinea",oecd_value:"2",oecd_income:"Lower middle",coords:[140.849197387695,-11.6363954544067,155.967880249023,-1.34653162956238]},PRY:{ISO3:"PRY",name:"Paraguay",oecd_value:"2",oecd_income:"Lower middle",coords:[-62.6503601074219,-27.5868434906006,-54.245288848877,-19.2867279052734]},PER:{ISO3:"PER",name:"Peru",oecd_value:"3",oecd_income:"Upper middle",coords:[-81.3544387817383,-18.3445644378662,-68.6842498779297,-0.0290927104651928]},PHL:{ISO3:"PHL",name:"Philippines",oecd_value:"2",oecd_income:"Lower middle",coords:[116.955368041992,4.65555667877197,126.618095397949,21.1223812103271]},POL:{ISO3:"POL",name:"Poland",oecd_value:"4",oecd_income:"Upper",coords:[14.1239223480225,48.994010925293,24.1431579589844,54.8381042480469]},PRT:{ISO3:"PRT",name:"Portugal",oecd_value:"4",oecd_income:"Upper",coords:[-15.44921922683717,42.30416050607434,-0.5078129768371671,36.891079267458814]},QAT:{ISO3:"QAT",name:"Qatar",oecd_value:"4",oecd_income:"Upper",coords:[50.7513999938965,24.5598697662354,51.6170883178711,26.1598529815674]},ROU:{ISO3:"ROU",name:"Romania",oecd_value:"3",oecd_income:"Upper middle",coords:[20.2428245544434,43.6500473022461,29.7001819610596,48.2748336791992]},RUS:{ISO3:"RUS",name:"Russian Federation",articleName:"The Russian Federation",oecd_value:"3",oecd_income:"Upper middle",coords:[225.70361328125,38.20309773621,-13.358886718754,82.20220529964]},RWA:{ISO3:"RWA",name:"Rwanda",oecd_value:"1",oecd_income:"Low",coords:[28.857234954834,-2.82685494422913,30.887809753418,-1.05869388580322]},KNA:{ISO3:"KNA",name:"Saint Kitts and Nevis",oecd_value:"4",oecd_income:"Upper",coords:[-62.8603210449219,17.1002998352051,-62.5360984802246,17.4156322479248]},LCA:{ISO3:"LCA",name:"Saint Lucia",oecd_value:"3",oecd_income:"Upper middle",coords:[-61.0778465270996,13.7144603729248,-60.8822479248047,14.1116981506348]},VCT:{ISO3:"VCT",name:"St Vincent & Grenadines",oecd_value:"3",oecd_income:"Upper middle",coords:[-61.4598121643066,12.5851755142212,-61.1232147216797,13.3805284500122]},WSM:{ISO3:"WSM",name:"Samoa",oecd_value:"2",oecd_income:"Lower middle",coords:[-172.781600952148,-14.0528364181519,-171.436660766602,-13.4628973007202]},SMR:{ISO3:"SMR",name:"San Marino",oecd_value:"4",oecd_income:"Upper",coords:[12.3855514526367,43.8923606872559,12.4923162460327,43.9828758239746]},STP:{ISO3:"STP",name:"Sao Tome & Principe",oecd_value:"1",oecd_income:"Low",coords:[6.46227169036865,.0239273067563772,7.4633994102478,1.69963908195496]},SAU:{ISO3:"SAU",name:"Saudi Arabia",oecd_value:"4",oecd_income:"Upper",coords:[34.4899139404297,16.3712482452393,55.637565612793,32.1213493347168]},SEN:{ISO3:"SEN",name:"Senegal",oecd_value:"2",oecd_income:"Lower middle",coords:[-17.5353851318359,12.3056058883667,-11.3777761459351,16.6913871765137]},SRB:{ISO3:"SRB",name:"Serbia",oecd_value:"3",oecd_income:"Upper middle",coords:[18.8448333740234,42.2349510192871,22.9844779968262,46.1740684509277]},SYC:{ISO3:"SYC",name:"Seychelles",oecd_value:"3",oecd_income:"Upper middle",coords:[46.2079048156738,-9.75568294525146,56.2879676818848,-3.79113698005676]},SLE:{ISO3:"SLE",name:"Sierra Leone",oecd_value:"1",oecd_income:"Low",coords:[-13.3004245758057,6.91926860809326,-10.2822351455688,9.99600601196289]},SGP:{ISO3:"SGP",name:"Singapore",oecd_value:"4",oecd_income:"Upper",coords:[103.640777587891,1.26416158676147,104.003868103027,1.44846570491791]},SVK:{ISO3:"SVK",name:"Slovakia",oecd_value:"4",oecd_income:"Upper",coords:[16.8444786071777,47.7500038146973,22.5396385192871,49.6017799377441]},SVN:{ISO3:"SVN",name:"Slovenia",oecd_value:"4",oecd_income:"Upper",coords:[13.3652610778809,45.4236335754395,16.5153026580811,46.8639640808105]},SLB:{ISO3:"SLB",name:"Solomon Islands",oecd_value:"2",oecd_income:"Lower middle",coords:[155.508255004883,-12.2905673980713,168.825805664062,-6.6001124382019]},SOM:{ISO3:"SOM",name:"Somalia",oecd_value:"1",oecd_income:"Low",coords:[40.9653816223145,-1.69700133800507,51.4167900085449,11.9887790679932]},ZAF:{ISO3:"ZAF",name:"South Africa",oecd_value:"3",oecd_income:"Upper middle",coords:[-4.240427970886301,-14.392564013623009,55.52519702911372,-39.19856212472235]},ESP:{ISO3:"ESP",name:"Spain",oecd_value:"4",oecd_income:"Upper",coords:[-18.59680461883543,45.675592266657375,11.286007881164542,34.994132833234325]},LKA:{ISO3:"LKA",name:"Sri Lanka",oecd_value:"2",oecd_income:"Lower middle",coords:[79.6561431884766,5.9235668182373,81.8906936645508,9.82942771911621]},SDN:{ISO3:"SDN",name:"Sudan",oecd_value:"2",oecd_income:"Lower middle",coords:[21.8094482421875,3.49020147323608,38.6156616210938,22.2269649505615]},SUR:{ISO3:"SUR",name:"Suriname",oecd_value:"3",oecd_income:"Upper middle",coords:[-58.0676918029785,1.83350670337677,-53.9888153076172,6.00601720809937]},SWZ:{ISO3:"SWZ",name:"Swaziland",oecd_value:"2",oecd_income:"Lower middle",coords:[30.7829055786133,-27.3162651062012,32.1174011230469,-25.7359981536865]},SWE:{ISO3:"SWE",name:"Sweden",oecd_value:"4",oecd_income:"Upper",coords:[11.1087579727173,55.3424110412598,24.163724899292,69.0363616943359]},CHE:{ISO3:"CHE",name:"Switzerland",oecd_value:"4",oecd_income:"Upper",coords:[5.95480918884277,45.8207168579102,10.4666271209717,47.8011665344238]},SYR:{ISO3:"SYR",name:"Syria",oecd_value:"2",oecd_income:"Lower middle",coords:[35.7239456176758,32.3130416870117,42.3771858215332,37.3249092102051]},TJK:{ISO3:"TJK",name:"Tajikistan",oecd_value:"1",oecd_income:"Low",coords:[67.3426895141602,36.678638458252,75.1641311645508,41.0399780273438]},TZA:{ISO3:"TZA",name:"Tanzania",oecd_value:"1",oecd_income:"Low",coords:[29.3210296630859,-11.7312726974487,40.4497604370117,-0.985830128192902]},THA:{ISO3:"THA",name:"Thailand",oecd_value:"3",oecd_income:"Upper middle",coords:[97.3513946533203,5.62988996505737,105.651000976562,20.4450073242188]},TLS:{ISO3:"TLS",name:"Timor-Leste",oecd_value:"2",oecd_income:"Lower middle",coords:[124.030235290527,-9.50122833251953,127.313552856445,-8.13531589508057]},TGO:{ISO3:"TGO",name:"Togo",oecd_value:"1",oecd_income:"Low",coords:[-0.166109174489975,6.10014533996582,1.78235077857971,11.1349811553955]},TON:{ISO3:"TON",name:"Tonga",oecd_value:"2",oecd_income:"Lower middle",coords:[-176.219299316406,-22.3388423919678,-173.714263916016,-15.5596170425415]},TTO:{ISO3:"TTO",name:"Trinidad & Tobago",oecd_value:"4",oecd_income:"Upper",coords:[-61.9279747009277,10.0418682098389,-60.5213394165039,11.3509368896484]},TUN:{ISO3:"TUN",name:"Tunisia",oecd_value:"3",oecd_income:"Upper middle",coords:[7.4798321723938,30.2289047241211,11.5641317367554,37.3449592590332]},TUR:{ISO3:"TUR",name:"Turkey",oecd_value:"3",oecd_income:"Upper middle",coords:[25.6638374328613,35.8197784423828,44.8068580627441,42.0984916687012]},TKM:{ISO3:"TKM",name:"Turkmenistan",oecd_value:"3",oecd_income:"Upper middle",coords:[52.438117980957,35.1406440734863,66.6457824707031,42.7911911010742]},TUV:{ISO3:"TUV",name:"Tuvalu",oecd_value:"3",oecd_income:"Upper middle",coords:[176.125442504883,-9.42071628570557,179.906677246094,-5.67768812179565]},UGA:{ISO3:"UGA",name:"Uganda",oecd_value:"1",oecd_income:"Low",coords:[29.5484580993652,-1.4752060174942,35.0064735412598,4.21969223022461]},UKR:{ISO3:"UKR",name:"Ukraine",oecd_value:"2",oecd_income:"Lower middle",coords:[22.1328392028809,44.3807525634766,40.1595458984375,52.3689498901367]},ARE:{ISO3:"ARE",name:"United Arab Emirates",oecd_value:"4",oecd_income:"Upper",coords:[51.5695419311523,22.6209449768066,56.3840827941895,26.0747928619385]},GBR:{ISO3:"GBR",name:"United Kingdom",articleName:"The United Kingdom",oecd_value:"4",oecd_income:"Upper",coords:[-13.6913566589355,49.9096145629883,1.77170538902283,60.8475532531738]},USA:{ISO3:"USA",name:"United States",articleName:"The United States",oecd_value:"4",oecd_income:"Upper",coords:[-216.94628906249,74.10854563412,22.1162109375,.3241593883002]},URY:{ISO3:"URY",name:"Uruguay",oecd_value:"3",oecd_income:"Upper middle",coords:[-58.4386787414551,-34.9734230041504,-53.1108360290527,-30.0968685150146]},UZB:{ISO3:"UZB",name:"Uzbekistan",oecd_value:"2",oecd_income:"Lower middle",coords:[55.9758377075195,37.1851463317871,73.1486434936523,45.5587196350098]},VUT:{ISO3:"VUT",name:"Vanuatu",oecd_value:"2",oecd_income:"Lower middle",coords:[166.520706176758,-20.2532863616943,169.899230957031,-13.0650405883789]},VEN:{ISO3:"VEN",name:"Venezuela",oecd_value:"3",oecd_income:"Upper middle",coords:[-73.3911514282227,.649315476417542,-59.8155937194824,12.1987400054932]},VNM:{ISO3:"VNM",name:"Viet Nam",oecd_value:"2",oecd_income:"Lower middle",coords:[102.11865234375,8.56539535522461,109.472831726074,23.3662757873535]},YEM:{ISO3:"YEM",name:"Yemen",oecd_value:"2",oecd_income:"Lower middle",coords:[42.5457534790039,12.1111993789673,54.5406837463379,18.9956378936768]},ZMB:{ISO3:"ZMB",name:"Zambia",oecd_value:"2",oecd_income:"Lower middle",coords:[21.9798774719238,-18.0692329406738,33.6742057800293,-8.19412326812744]},ZWE:{ISO3:"ZWE",name:"Zimbabwe",oecd_value:"1",oecd_income:"Low",coords:[25.219367980957,-22.3973407745361,33.0427703857422,-15.6148071289062]}},b&&!b.title&&(b.title="Country");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Collection.extend({model:a.Country,initialize:function(b,c){this.models=_(a.Country.meta).map(function(b,c){return new a.Country({id:c})})},comparator:function(a){return a.name},sync:function(a,b,c){return c.error("Unsupported method")}}),b&&!b.title&&(b.title="CountrySearch");return b}),Bones.initialize("model",function(a){var b;require("chrono"),b=Backbone.Model.extend({initialize:function(){_.bind(this,"getFileSize","getDate")},url:function(){return"/api/Download/"+encodeURIComponent(this.get("id"))},getDate:function(){var a=new Date(this.get("timestamp"));return a.format("d F Y","CET")},getFileSize:function(){var a=this.get("size"),b=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,b)).toFixed(2).replace(/00$/,"").replace(/\.$/,"")+["b","Kb","Mb","Gb"][b]}}),b&&!b.title&&(b.title="Download");return b}),Bones.initialize("model",function(a){var b;b=a.Document.extend({schema:{id:"Front",type:"object",properties:{id:{type:"string",title:"Path",required:!0,minlength:1,pattern:"^[a-z0-9-_]+$"},featuredFirst:{type:"string",title:"Featured",required:!0,minlength:1},featuredSecond:{type:"string",title:"Featured",required:!0,minlength:1}}},url:function(){return"/api/Front/"+encodeURIComponent(this.id)}}),b&&!b.title&&(b.title="Front");return b}),Bones.initialize("model",function(a){function n(a){return l(i(a))}function m(a){return j(k(a))}function l(a){var b=function(a){a=parseInt(a,10);if(isNaN(a))return"00";a=Math.max(0,Math.min(a,255));return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)};return b(a.r)+b(a.g)+b(a.b)}function k(a){var b=function(a){return a.charAt(0)=="#"?a.substring(1,7):a};return{r:parseInt(b(a).substring(0,2),16),g:parseInt(b(a).substring(2,4),16),b:parseInt(b(a).substring(4,6),16)}}function j(a){var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h,i=(e+f)/2;if(e==f)g=h=0;else{var j=e-f;h=i>.5?j/(2-e-f):j/(e+f);switch(e){case b:g=(c-d)/j+(c<d?6:0);break;case c:g=(d-b)/j+2;break;case d:g=(b-c)/j+4}g/=6}return{h:g,s:h,l:i}}function i(a){var b=a.h,c=a.s,d=a.l,e,f,g;if(c==0)e=f=g=d;else{function h(a,b,c){c<0&&(c+=1),c>1&&(c-=1);if(c<1/6)return a+(b-a)*6*c;if(c<.5)return b;if(c<2/3)return a+(b-a)*(2/3-c)*6;return a}var i=d<.5?d*(1+c):d+c-d*c,j=2*d-i;e=h(j,i,b+1/3),f=h(j,i,b),g=h(j,i,b-1/3)}return{r:e*255,g:f*255,b:g*255}}function h(a,b,c,d){a=k(a),b=k(b);var e={};_.each(_.keys(a),function(g){e[g]=f(a[g],b[g],c,d)});return l(e)}function g(a,b,c,d){a=m(a),b=m(b);var e={};_.each(_.keys(a),function(g){e[g]=f(a[g],b[g],c,d)});return n(e)}function f(a,b,c,d){return a+d*(b-a)/c}function e(a,b,c,d){var e=c/(b.length-1),f=Math.floor(d/e);f=f<b.length-1?f:b.length-2;return a(b[f],b[f+1],e,d-e*f)}function d(a,b,c){return e(g,a,b,c)}function c(a,b,c){return e(h,a,b,c)}var b;b=Backbone.Model.extend({url:"",defaults:{currentYear:2011,input:{},values:{}},optionDefaults:function(a){a=a||{},a.format=a.format==undefined?!0:a.format,a.year=a.year||this.get("currentYear");return a},score:function(a){a=this.optionDefaults(a);var b=this.get("values")[a.year];if(!a.format)return b;if(b>1)return this.format(b,{format:"number",decimals:1});return this.format(b,{format:"number",decimals:3})},trend:function(a){a=a||"gain";if(this.get("name")=="trend"){var b=this.get(a);if(b){var c=b.sign;switch(c){case-1:return"down";case 0:return"same";case 1:return"up";default:return"undefined"}}}},input:function(a){a=this.optionDefaults(a);var b=this.get("input")[a.year];if(!a.format)return b;return this.format(b)},rank:function(a){a=this.optionDefaults(a);var b=this.get("rank")?this.get("rank")[a.year]:undefined;if(!a.format)return b;if(_.isUndefined(b))return"<div class='rank-number undefined'>&nbsp;</div>";var d=b.asc+b.desc;if(this.meta("index")=="vulnerability"||this.get("name")=="vulnerability_delta")var e=c(["#79ba51","#94c250","#B3CE44","#ded943","#E2B343","#eb944e","#f5734e","#f85f5f"],d,b.asc),f=b.asc;else var e=c(["#79ba51","#94c250","#B3CE44","#ded943","#E2B343","#eb944e","#f5734e","#f85f5f"],d,b.desc),f=b.desc;return"<div class='rank-number' style='background-color: #"+e+";'>"+f+"</div>"},meta:function(a){return b.meta[this.id||this.get("name")][a]||""},format:function(a,c){c=c||this.id||this.get("name");return b.format(a,c)},hasCorrection:function(){return!_.isUndefined(b.meta[(this.id||this.get("name"))+"_delta"])},isCorrection:function(){return(this.id||this.get("name")).slice(-6)=="_delta"},toggleCorrection:function(){return this.isCorrection()?(this.id||this.get("name")).slice(0,-6):(this.id||this.get("name"))+"_delta"},uncorrected:function(){if(this.hasCorrection())return this.id||this.get("name");return this.toggleCorrection()}}),b.format=function(a,c){var d=_.isObject(c)?c:b.meta[c];if(_.isUndefined(d))return a;if(_.isUndefined(a))return"-";b.formats[d.format]&&(a=b.formats[d.format](a,d));if(d.unit)return d.unit.replace("%s",a);return a},b.formats={number:function(a,b){var c=isNaN(b.decimals)?0:Math.abs(b.decimals),d=".",e=",",f=a<0?"-":"",g=parseInt(a=Math.abs(a).toFixed(c),10)+"",h=(h=g.length)>3?h%3:0,i=(h?g.substr(0,h)+e:"")+g.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+e)+(c?d+Math.abs(a-g).toFixed(c).slice(2):"");return parseFloat(i)==0?0:f+i},percent:function(a,b){if(_.isNumber(a))return this.number(a*100,b);return"-"}},b.meta={gain_delta:{id:"gain_delta",name:"GAIN Index, adjusted for GDP",description:"GDP adjusted GAIN Index scores represent how much better or worse the actual GAIN Index score is from its expected value, based on its GDP. A positive value means a country has a better GAIN Index score than other countries of a similar GDP. A negative value means a country has a worse score.",map_caption:"Countries of the world by GAIN Index, adjusted for GDP. Higher scores are better.",ranking_caption:"World wide ranking by GAIN Index, adjusted for GDP. Higher scores are better.",format:"number",decimals:"2",unit:null,index:"gain",sector:null,component:null},gain:{id:"gain",name:"GAIN Index",description:"The GAIN Index captures a country's Vulnerability to climate change and other global challenges, and its Readiness to improve resilience.",map_caption:"Countries of the world by their position on the GAIN Index.",ranking_caption:"World wide ranking by GAIN Index, higher scores are better.",format:"number",decimals:"1",unit:null,index:null,sector:null,component:null},matrix:{id:"gain",name:"GAIN Matrix",description:"The Readiness Matrix illustrates the comparative resilience of countries. The vertical axis measures the relative vulnerability of countries. The horizontal axis measures to what degree a country is ready to deal with climatic and environmental changes.",map_caption:"Countries of the world by their quadrant position on the GAIN Index.",ranking_caption:"World wide ranking by GAIN Index, higher scores are better.",format:"number",decimals:"1",unit:null,index:null,sector:null,component:null},matrix_delta:{id:"gain_delta",name:"GAIN Matrix",description:"GDP adjusted GAIN Index scores represent how much better or worse the actual GAIN Index score is from its expected value, based on its GDP. A positive value means a country has a better GAIN Index score than other countries of a similar GDP. A negative value means a country has a worse score.",map_caption:"No map available",ranking_caption:"World wide ranking by GAIN Index, higher scores are better.",format:"number",decimals:"1",unit:null,index:"gain",sector:null,component:null},business:{id:"business",name:"Business freedom",description:"Individual’s right to create, operate, and close an enterprise without interference from the state.",format:"number",decimals:"0",unit:null,index:"readiness",sector:null,component:"economic",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},coast_area:{id:"coast_area",name:"Coastal area",description:"Percent of land less than 10 meters above sea-level.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"infrastructure",component:"exposure",source:[{name:"CIESIN",link:"http://sedac.ciesin.columbia.edu/gpw/lecz.jsp "}]},coast_popn:{id:"coast_popn",name:"Coastal population",description:"Percent of population living less than 10 meters above sea-level.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"infrastructure",component:"sensitivity",source:[{name:"CIESIN",link:"http://sedac.ciesin.columbia.edu/gpw/lecz.jsp "}]},corruption:{id:"corruption",name:"Control of corruption",description:"Perceptions of public power exercised for private gain, including both petty and grand forms of corruption, as well as 'capture' of the state by elites and private interests.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:"governance",source:[{name:"Worldwide Governance Indicators",link:"http://info.worldbank.org/governance/wgi/sc_country.asp"}]},"d-ppt":{id:"d-ppt",name:"Precipitation change",description:"Projected change in precipitation by late 21st century, i.e. 2070-99 compared to  1961-90.",format:"percent",decimals:"1",unit:"%s %",index:"vulnerability",sector:"water",component:"exposure",source:[{name:"Climatic Research Unit, University of East Anglia. Dataset TYN CY 3.0",link:"http://www.cru.uea.ac.uk/cru/data/hrg/"}]},"d-temp":{id:"d-temp",name:"Temperature change",description:"Projected change in temperature by late 21st century, i.e. 2070-99 compared to  1961-90.",format:"number",decimals:"1",unit:"%s °C",index:"vulnerability",sector:"water",component:"exposure",source:[{name:"Climatic Research Unit, University of East Anglia. Dataset TYN CY 3.0",link:"http://www.cru.uea.ac.uk/cru/data/hrg/"}]},daly:{id:"daly",name:"Disability adjusted life years",description:"Projected percent increase in DALY due to climate change in the late 21st century.",format:"percent",decimals:"2",unit:"%s %",index:"vulnerability",sector:"health",component:"exposure",source:[{name:"Adaptation costs for climate change-related cases of diarrhoeal disease, malnutrition, and malaria in 2030, by Kristie L Ebi",link:"http://www.globalizationandhealth.com/content/4/1/9"}]},dependency_natural:{id:"dependency_natural",name:"Dependency on natural capital",description:"Use of natural capital in national accounting. Specifically natural capital related to ecosystem services: crop, pasture, forest (timber), forest (non-timber) and protected areas. Sub-surface capital such as oil, gas and mineral reserves are not included in this measure for GAIN.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"ecosystems",component:"exposure",source:[{name:"The Changing Wealth of Nations : Measuring Sustainable Development in the New Millennium. World Bank 2011",link:"http://data.worldbank.org/sites/default/files/total_and_per_capita_wealth_of_nations.xls"}]},ecological_footprint:{id:"ecological_footprint",name:"Ecological footprint",description:"Measures the number of hectares of land and water, both within and outside the country, to supply the average demand on the ecosystems services by the lifestyles of the population of each country. This is compared with the estimated capacity of a country’s ecosystems to regenerate and maintain ecosystem services for either internal use or export. This measure uses the surplus or deficit of capacity to supply over the demand within each country.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"ecosystems",component:"sensitivity",source:[{name:"National Footprint Accounts 2011 edition",link:"http://www.footprintnetwork.org"}]},electrical_outages:{id:"electrical_outages",name:"Value lost due to electrical outages",description:"Percentage of sale lost due to electrical outages (% of sales).",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"habitat",component:"capacity",source:[{name:"World Development Indicators - Value lost due to electrical outages",link:"http://data.worldbank.org/indicator/IC.FRM.OUTG.ZS"}]},energy_access:{id:"energy_access",name:"Energy access",description:"Percent population with access to electricity.",format:"number",decimals:"1",unit:"%s %",index:"vulnerability",sector:"infrastructure",component:"exposure",source:[{name:"WHO & UNPD",link:"http://content.undp.org/go/cms-service/stream/asset/?asset_id=2205620 "}]},energy_sensit:{id:"energy_sensit",name:"Energy sensitivity",description:"Percent of energy derived from hydroelectricity and imported power.",format:"percent",decimals:"1",unit:"%s %",index:"vulnerability",sector:"infrastructure",component:"sensitivity",source:[{name:"World Development Indicators - Energy Imports",link:"http://data.worldbank.org/indicator/EG.IMP.CONS.ZS"},{name:"World Development Indicators - Hydroelectric Power",link:"http://data.worldbank.org/indicator/EG.ELC.HYRO.ZS"}]},enrollment:{id:"enrollment",name:"Tertiary education",description:"The ratio of total enrollment, regardless of age, to the population in age range for tertiary education.",format:"number",decimals:"2",unit:"%s %",index:"readiness",sector:null,component:"social",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/SE.TER.ENRR"}]},external:{id:"external",name:"External health dependence",description:"Percent of total expendature devoted to health funds or services in kind that are provided by entities external to the country.",format:"number",decimals:"1",unit:"%s %",index:"vulnerability",sector:"health",component:"sensitivity",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/SH.XPD.EXTR.ZS"}]},biome_threat:{id:"biome_threat",name:"Projected Biome Threat",description:"The proportion of the land of a country on which the existing biome is no longer matched to the projected climate of the late 21st century.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"ecosystems",component:"exposure",source:[{name:"Gonzalez, et al. (2010), Global patterns in the vulnerability of ecosystems to vegetation shifts due to climate change. Global Ecology and Biogeography, 19: 755–768. doi: 10.1111/j.1466-8238.2010.00558.x Annex S3",link:"http://pgonzalez.home.igc.org/Gonzalez_et_al_2010_GEB_SI.pdf",name:"J. Hansen, et al., Global warming in the twenty-first century: An alternative scenario. Proc. Natl. Acad. Sci. 97, 9875-9880, doi:10.1073/pnas.170278997 (2000).",link:"http://pubs.giss.nasa.gov/docs/2000/2000_Hansen_etal_2.pdf"}]},finan:{id:"finan",name:"Financial freedom",description:"Banking efficiency, independence from government control and interference in the financial sector.",format:"number",decimals:"0",unit:null,index:"readiness",sector:null,component:"economic",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},fiscal:{id:"fiscal",name:"Fiscal freedom",description:"Tax burden imposed by government.",format:"number",decimals:"1",unit:null,index:"readiness",sector:null,component:"economic",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},food_capacity:{id:"food_capacity",name:"Food capacity",description:"Measure of agricultural technological capacity as the average of the 2 best scores from the use of fertilizers, the level of mechanization and the use of irrigation in agriculture.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"food",component:"capacity",source:[{name:"World Development Indicators - Fertilizer Consumption (kilograms per hectare of arable land)",link:"http://data.worldbank.org/indicator/AG.CON.FERT.ZS"},{name:"World Development Indicators - Agricultural Machinery (tractors per 100 sq. km of arable land)",link:"http://data.worldbank.org/indicator/AG.LND.TRAC.ZS"},{name:"World Development Indicators - Agricultural Irrigated Land (percent of total agricultural land)",link:"http://data.worldbank.org/indicator/AG.LND.IRIG.AG.ZS"}]},gdp:{id:"gdp",name:"GDP (PPP) per capita",description:"Gross domestic product per capita based on purchasing power parity, in units of constant 2005 international dollar.",format:"number",decimals:"2",unit:"%s USD",index:null,sector:null,component:null},gov_spend:{id:"gov_spend",name:"Government spending",description:"Level of government expenditures as a percentage of GDP.",format:"number",decimals:"1",unit:null,index:"readiness",sector:null,component:"economic",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},health_disease:{id:"health_disease",name:"Disease mortality",description:"Percentage mortality due to infectious diseases.",format:"percent",decimals:"1",unit:"%s %",index:"vulnerability",sector:"health",component:"exposure",source:[{name:"World Health Organization",link:"http://apps.who.int/ghodata/?vid=99001#"}]},imports:{id:"imports",name:"Food import dependency",description:"Proportion of cereal consumption obtained from entities not part of the country in question.",format:"percent",decimals:"0",unit:"%s %",index:"vulnerability",sector:"food",component:"sensitivity",source:[{name:"FAO",link:"http://FAOStat.fao.org"}]},international_treaties:{id:"international_treaties",name:"International Environmental Conventions",description:"The country’s participation in international forums, which is taken as an indicator its capacity to engage in multilateral negotiations and to reach agreement on appropriate actions internally.",format:"number",decimals:"0",unit:null,index:"vulnerability",sector:"ecosystems",component:"capacity",source:[{name:"Environmental Treaties and Resource Indicators",link:"http://sedac.ciesin.columbia.edu/entri/index.jsp"}]},invest:{id:"invest",name:"Investment freedom",description:"Constraints on the flow of investment capital. Includes rules for foreign and domestic investment; restrictions on payments, transfers, and capital transactions; labor regulations, corruption, red tape, weak infrastructure, and political and security conditions.",format:"number",decimals:"0",unit:null,index:"readiness",sector:null,component:"economic",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},labor:{id:"labor",name:"Labor freedom",description:"Legal and regulatory framework of a country’s labor market.",format:"number",decimals:"1",unit:null,index:"readiness",sector:null,component:"social",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},life:{id:"life",name:"Life expectancy",description:"The number of years a newborn infant would live if prevailing patterns of mortality at the time of its birth were to stay the same throughout its life.",format:"number",decimals:"1",unit:null,index:"vulnerability",sector:"health",component:"capacity",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/SP.DYN.LE00.IN"}]},malnutr:{id:"malnutr",name:"Malnutrition",description:"Percent of under 5 year-olds with low weight for their height.",format:"number",decimals:"1",unit:"%s %",index:"vulnerability",sector:"food",component:"capacity",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/SH.STA.WAST.ZS"}]},matern:{id:"matern",name:"Maternal mortality",description:"Life time risk of maternal death is the probability that a 15-year-old female will die eventually from a maternal cause assuming that current levels of fertility and mortality (including maternal mortality) do not change in the future, taking into account competing causes of death.",format:"number",decimals:"0",unit:"%s %",index:"vulnerability",sector:"health",component:"capacity",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/SH.MMR.RISK.ZS"}]},mobiles:{id:"mobiles",name:"Mobile penetration",description:"Mobile telephone subscriptions per 100 people to a public mobile telephone service using cellular technology, which provide access to the public switched telephone network (post-paid and prepaid subscriptions are included).",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:"social",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/IT.CEL.SETS.P2"}]},monetary:{id:"monetary",name:"Monetary freedom",description:"Price stability with an assessment of price controls.",format:"number",decimals:"1",unit:null,index:"readiness",sector:null,component:"economic",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},non_violence:{id:"non_violence",name:"Political stability & non-violence",description:"Perceptions of the likelihood that the government will be destabilized or overthrown by unconstitutional or violent means, including domestic violence and terrorism.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:"governance",source:[{name:"Worldwide Governance Indicators",link:"http://info.worldbank.org/governance/wgi/index.asp"}]},pop:{id:"pop",name:"Population",description:"Total population.",format:"number",decimals:"0",unit:null,index:null,sector:null,component:null},protected_biomes:{id:"protected_biomes",name:"Protected biomes",description:"The weighted percentage of biomes under protected status, where the weight is determined by the size of biomes within a country. Countries are not rewarded for protecting beyond 17% of any given biome (i.e., scores are capped at 17% per biome) so that higher levels of protection of some biomes cannot be used to offset lower levels of protection of other biomes.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"ecosystems",component:"capacity",source:[{name:"Emerson, J.W. et al. 2012: 2012 Environmental Performance Index and Pilot Trend Environmental Performance Index.",link:"http://epi.yale.edu/downloads"}]},road_floods:{id:"road_floods",name:"Road flooding",description:"Frequency of floods calculated as flood disasters per decade per 100,000 km2 of land area.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"infrastructure",component:"exposure",source:[{name:"World Development Indicators - Land area (sq. km)",link:"http://data.worldbank.org/indicator/AG.LND.TOTL.K2"},{name:"EM-DAT: The OFDA/CRED International Disaster Database - Floods.",link:"http://www.emdat.be/"}]},road_paved:{id:"road_paved",name:"Paved roads",description:"Roads surfaced with crushed stone (macadam) and hydrocarbon binder or bituminized agents, with concrete, or with cobblestones, as a percentage of all the country's roads, measured in length.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"infrastructure",component:"sensitivity",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/IS.ROD.PAVE.ZS"}]},rule_of_law:{id:"rule_of_law",name:"Rule of law",description:"Confidence in and abide by the rules of society, and in particular the quality of contract enforcement, property rights, the police, and the courts, as well as the likelihood of crime and violence.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:"social",source:[{name:"Worldwide Governance Indicators",link:"http://info.worldbank.org/governance/wgi/sc_country.asp"}]},rural_popn:{id:"rural_popn",name:"Rural population",description:"Total rural population as a percent of the total population.",format:"number",decimals:"1",unit:"%s %",index:"vulnerability",sector:"food",component:"sensitivity",source:[{name:"World Development Indicators - Rural Population",link:"http://data.worldbank.org/indicator/SP.RUR.TOTL"},{name:"World Development Indicators - Total Population",link:"http://data.worldbank.org/indicator/SP.POP.TOTL"}]},sanit:{id:"sanit",name:"Improved sanitation facilities",description:"The percentage of the population with at least adequate access to excreta disposal facilities that can effectively prevent human, animal, and insect contact with excreta.",format:"number",decimals:"1",unit:"%s %",index:"vulnerability",sector:"water",component:"capacity",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/SH.STA.ACSN"}]},slums:{id:"slums",name:"Slums",description:"Urban Population Living in Slums.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"habitat",component:"sensitivity",source:[{name:"United Nations Indicators - Millenium Development Goals",link:"http://mdgs.un.org/unsd/mdg/SeriesDetail.aspx?srid=710"}]},staff:{id:"staff",name:"Health workers per capita",description:"Number of medical workers per 1000 people, based on (2 x Physicians) + (Nurses and Midwives).",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"health",component:"sensitivity",source:[{name:"World Development Indicators - Physicians (per 1,000 people)",link:"http://data.worldbank.org/indicator/SH.MED.PHYS.ZS"},{name:"World Development Indicators - Nurses and midwives (per 1,000 people)",link:"http://data.worldbank.org/indicator/SH.MED.NUMW.P3"}]},threatened_species:{id:"threatened_species",name:"Threatened species",description:"Composite measure made up of (1) the percentage of mammal species recorded as threatened; (2) the percentage of plant species threatened; and (3) the number of bird species threatened.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"ecosystems",component:"sensitivity",source:[{name:"IUCN Red Book",link:"http://www.iucnredlist.org/"}]},trade:{id:"trade",name:"Trade freedom",description:"Absence of tariff and non-tariff barriers that affect imports and exports of goods and services.",format:"number",decimals:"1",unit:null,index:"readiness",sector:null,component:"economic",source:[{name:"Index of Economic Freedom",link:"http://www.heritage.org/index/explore"}]},trade_transport:{id:"trade_transport",name:"Trade and transport infrastructure",description:"Logistics professionals' perception of country's quality of trade and transport related infrastructure (e.g. ports, railroads, roads, information technology), on a rating ranging from 1 (very low) to 5 (very high). Scores are averaged across all respondents.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"habitat",component:"capacity",source:[{name:"World Development Indicators -  Logistics Performance Index",link:"http://data.worldbank.org/indicator/LP.LPI.INFR.XQ"}]},urban_concentration:{id:"urban_concentration",name:"Urban concentration",description:"Percentage of the country population living in the largest city.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"habitat",component:"exposure",source:[{name:"World Development Indicators - Population in largest city",link:"http://data.worldbank.org/indicator/EN.URB.LCTY.UR.ZS"}]},urban_excess_growth:{id:"urban_excess_growth",name:"Urban excess growth",description:"Excess rate of population growth in urban centres compared with the population growth rate in the whole country (annual %).",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"habitat",component:"sensitivity",source:[{name:"World Development Indicators - Urban population growth",link:"http://data.worldbank.org/indicator/SP.URB.GROW",name:"World Development Indicators - Urban population",link:"http://data.worldbank.org/indicator/SP.URB.TOTL",name:"World Development Indicators - Population growth",link:"http://data.worldbank.org/indicator/SP.POP.GROW"}]},urban_risk:{id:"urban_risk",name:"Urban risk",description:"A natural disaster risk index for populations living in large cities (i.e. >0.75M people).",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"habitat",component:"exposure",source:[{name:"UN Dept Economic & Social Affairs;",link:"http://esa.un.org/unup/CD-ROM/Urban-Agglomerations.htm"}]},voice_accountability:{id:"voice_accountability",name:"Voice & accountability",description:"Participation in selecting the government, as well as freedom of expression, freedom of association, and a free media.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:"governance",source:[{name:"Worldwide Governance Indicators",link:"http://info.worldbank.org/governance/wgi/sc_country.asp"}]},water_access:{id:"water_access",name:"Water access",description:"The percentage of the population with reasonable access to an adequate amount of water from an improved source, such as a household connection, public standpipe, borehole, protected well or spring, and rainwater collection.",format:"number",decimals:"1",unit:"%s %",index:"vulnerability",sector:"water",component:"capacity",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/SH.H2O.SAFE.ZS"}]},water_disease:{id:"water_disease",name:"Water disease",description:"Water, sanitation & hygiene related deaths per 100,000  children under 5 years old.",format:"number",decimals:"0",unit:null,index:"vulnerability",sector:"water",component:"sensitivity",source:[{name:"WHO",link:"http://apps.who.int/ghodata/?vid=99001#"}]},water_use:{id:"water_use",name:"Water use",description:"Percent of total internal and external water withdrawn for all uses.",format:"number",decimals:"1",unit:"%s %",index:"vulnerability",sector:"water",component:"sensitivity",source:[{name:"UN Food and Agriculture Organization",link:"http://www.fao.org/nr/water/aquastat/data/query/index.html?lang=en"}]},yield_cv:{id:"yield_cv",name:"Variation of cereal yield",description:"Coefficient of variation  (Stdev / mean) of cereal yield per hectare of harvested land, including wheat, rice, maize, barley, oats, rye, millet, sorghum, buckwheat, and mixed grains.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:"food",component:"exposure",source:[{name:"World Development Indicators",link:"http://data.worldbank.org/indicator/AG.YLD.CREL.KG"}]},yld_proj:{id:"yld_proj",name:"Yield change",description:"Projected percentage impact of climate change on agricultural yields.",format:"number",decimals:"2",unit:"%s %",index:"vulnerability",sector:"food",component:"exposure",source:[{name:"Center for Global Development",link:"http://www.cgdev.org/content/publications/detail/1424986"}]},economic:{id:"economic",name:"Economic",description:"Corresponds to 40% of Readiness and equally weights 7 measures related to goverment regulations, taxes and business enabling environment.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:null},governance:{id:"governance",name:"Governance",description:"Corresponds to 30% of Readiness, equally weighting 'Voice and Accountability', government 'Stability' and 'Control of corruption'.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:null},readiness_delta:{id:"readiness_delta",name:"Readiness, adjusted for GDP",description:"GDP adjusted Readiness scores represent how far the actual Readiness score is from its expected value based on its GDP. A positive value means a country has a higher Readiness score than other countries of a similar GDP. A negative value means a country has a worse score.",map_caption:"Countries of the world by Readiness, adjusted for GDP. Higher scores are better.",ranking_caption:"World wide ranking by Readiness, adjusted for GDP. Higher scores are better.",format:"number",decimals:"2",unit:null,index:"readiness_delta",sector:null,component:null},readiness:{id:"readiness",name:"Readiness",description:"A country's GAIN Index score is composed of a Vulnerability score and a Readiness score. Readiness targets those portions of the economy, governance and society that affect the speed and efficiency of absorption and implementation of Adaptation projects.",map_caption:"Countries of the world by Readiness, higher scores are better.",ranking_caption:"World wide ranking by Readiness, higher scores are better.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:null},social:{id:"social",name:"Social readiness",description:"Corresponds to 30% of Readiness. It measures human capital, access to information, communications and working environment.",format:"number",decimals:"2",unit:null,index:"readiness",sector:null,component:null},capacity:{id:"capacity",name:"Capacity",description:"The availability of economic, social, and institutional resources to cope with and adapt to the impacts of climate change in specific sectors. Though related, this differs from readiness indicators in that it seeks to measure the current ability to increase resilience (or reduce vulnerability) in specific sectors, whereas Readiness measures a country’s ability to facilitate further increases in resilience.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},ecosystems:{id:"ecosystems",name:"Ecosystems",description:"Ecosystem services are the multitude of processes that humans rely upon to support their lives and livelihoods.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},exposure:{id:"exposure",name:"Exposure",description:"The nature and degree to which a system is exposed to significant climatic variations.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},food:{id:"food",name:"Food",description:"The Food score summarizes a country's food production, nutrition and rural population.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},habitat:{id:"habitat",name:"Habitat",description:"Habitat measures the stresses rapid economic, migration and population growth place on human settlements and urban areas.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},health:{id:"health",name:"Health",description:"The Health score summarizes a country's ability to provide health services.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},infrastructure:{id:"infrastructure",name:"Infrastructure",description:"The Infrastructure score summarizes three factors impacting human well-being: coasts, energy and transportation.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},sensitivity:{id:"sensitivity",name:"Sensitivity",description:"The degree to which a system is affected, either adversely or beneficially, by climate variability or change.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},vulnerability_delta:{id:"vulnerability_delta",name:"Vulnerability, adjusted for GDP",description:"GDP adjusted Vulnerability scores represent how far the actual Vulnerability score of a country is from its expected Vulnerability score based on its GDP.  A positive value means a country has a higher Vulnerability score than other countries of a similar GDP. A negative value means a country has a worse score.",map_caption:"Countries of the world by Vulnerability, adjusted for GDP. Lower scores (green) are better.",ranking_caption:"World wide ranking by Vulnerability, adjusted for GDP. Lower scores (green) are better.",format:"number",decimals:"2",unit:null,index:"vulnerability_delta",sector:null,component:null},vulnerability:{id:"vulnerability",name:"Vulnerability",description:"A country's GAIN Index score is composed of a Vulnerability score and a Readiness score. Vulnerability measures a country's exposure, sensitivity and ability to cope with climate related hazards, as well as accounting for the overall status of food, water, health and infrastructure within the nation.",map_caption:"Countries of the world by Vulnerability, lower scores (green) are better.",ranking_caption:"World wide ranking by Vulnerability, lower scores (green) are better.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null},water:{id:"water",name:"Water",description:"The Water score summarizes a country's current and future ability to provide clean water.",format:"number",decimals:"2",unit:null,index:"vulnerability",sector:null,component:null}},b&&!b.title&&(b.title="Indicator");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Collection.extend({model:a.Indicator,initialize:function(){_.bindAll(this,"getGraphData","buildLookup"),this.bind("add",this.buildLookup),this.bind("remove",this.buildLookup),this.buildLookup()},buildLookup:function(){var a=this.lookup={};this.each(function(b){a[b.get("name")]=b})},byName:function(a){return this.lookup[a]},getGraphData:function(a,b,c){var c=c||"values",d=this.detect(function(c){return c.get(a)==b});d&&(d=_(d.get(c)).chain(),d=d.map(function(a,b){return[parseInt(b,10),a]}).reject(function(a){return a[1]===null}).value());return d},getRawGraphData:function(a,b){var c=this.getGraphData(a,b),d=this.byName(b);if(d!=undefined){var e=_(d.get("origin")).reduce(function(a,b,c){a[b]=a[b]||[],a[b].push(parseInt(c,10));return a},{});return _(c).select(function(a){return _.include(e.raw,a[0])})}},sortByRank:function(a){this.comparator=function(a){var b=a.rank({format:!1});if(!b)return[Infinity,Infinity];var c=a.meta("index");if(c=="vulnerability"||a.get("name")=="vulnerability_delta")var b=b.asc||0;else var b=b.desc||999;return[("000"+b).slice(-3),a.get("ISO3")].join("")},this.sort(a);return this}}),b&&!b.title&&(b.title="Indicators");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Model.extend({initialize:function(a,b){b=b||{},!this.get("years")&&this.set({years:b.years,silent:!0});if(!this.get("years"))throw new Error("Year parameter is required")},similar:function(a,b,c,d){c=c||"values",d=d||_.last(this.get("years"));var e=[],f=this.list(c,d),g=_.indexOf(_.pluck(f,"ISO3"),a);if(g==-1)return e;for(var h=g;h<g+b+1;h++){var i=h-Math.floor(b/2);f[i]&&i!=g&&e.push(f[i])}return e},list:function(b,c){if(!this.get(b))return[];var d=b=="values"?{format:"number",decimals:3}:this.get("id");return _(this.get(b)).chain().map(function(b,e){if(a.Country.meta[e]&&a.Country.meta[e].name)return{ISO3:e,name:a.Country.meta[e].name,value:a.Indicator.format(b[c],d),path:a.Country.pathSafe(e)}}).sortBy(function(a){return a.value}).value().reverse()},url:function(){var a="/api/IndicatorSummary/"+encodeURIComponent(this.get("id"))+"?";_.each(this.get("years"),function(b){a+="&years[]="+encodeURIComponent(b)});return a}}),b&&!b.title&&(b.title="IndicatorSummary");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Model.extend({initialize:function(b,c){_.bindAll(this,"tilejson","updateMap","featureHover","addControls"),c=c||{};var d=c.el||document.getElementById("map"),e=c.width||680,f=c.height||490,g=c.lat||28,h=c.lon||-8,i=c.z||2,j=c.extent||!1;this.controls=c.controls||["interaction"],this.el=d,this.isFullscreen=!1,this.countryMeta=new a.CountrySearch;var k=com.modestmaps,l=this.tilejson(),m=$("<div></div>").addClass("map");$(d).append(m);var n=new k.Map(m[0],new wax.mm.connector(l),new k.Point(e,f),[new k.DragHandler,new k.DoubleClickHandler,new k.MouseWheelHandler,new k.TouchHandler]);this.set({width:e,height:f},{silent:!0}),this.m=n,this.tooltip=new wax.tooltip;var o=this;this.tooltip.click=function(a,b,c){o.featureClick(a,b,c)},this.addControls(),j?n.setExtent([new k.Location(j[1],j[0]),new k.Location(j[3],j[2])]):n.setCenterZoom(new k.Location(g,h),i),this.bind("change",this.updateMap)},addControls:function(){var a=this,b={interaction:function(){wax.mm.interaction(a.m,a.tilejson(),{callbacks:a.tooltip})},zoomer:function(){$(".zoom-control",a.el).length==0&&$(a.el).append("<div class='zoom-control'></div>"),wax.mm.zoomer(a.m).appendTo($(".zoom-control",a.el).empty().get(0))}};_.each(this.controls,function(a){b[a]()})},tilejson:function(){var a=this.get("indicator"),b=this.get("year"),c=[],d=[],e=Bones.plugin.config.mapHosts.length?Bones.plugin.config.mapHosts.split(","):[];e.length?_.each(e,function(e){c.push("http://"+e+"."+location.host+"/tiles/1.0.0/"+a+"-"+b+"/{z}/{x}/{y}.png"),d.push("http://"+e+"."+location.host+"/tiles/1.0.0/"+a+"-"+b+"/{z}/{x}/{y}.grid.json")}):(c.push("http://"+location.host+"/tiles/1.0.0/"+a+"-"+b+"/{z}/{x}/{y}.png"),d.push("http://"+location.host+"/tiles/1.0.0/"+a+"-"+b+"/{z}/{x}/{y}.grid.json"));return tilejson={tilejson:"1.0.0",scheme:"tms",tiles:c,grids:d,formatter:this.featureHover,minzoom:1,maxzoom:6}},updateMap:function(){var a=com.modestmaps,b=this.tilejson(),c=this.m.coordinate;el=this.el,width=this.get("width"),height=this.get("height"),$(".map.obsolete",el).remove(),$(".map",el).addClass("obsolete"),mapEl=$("<div></div>").addClass("map"),$(".map:last",el).after(mapEl);var d=new a.Map(mapEl[0],new wax.mm.connector(b),new a.Point(width,height),[new a.DragHandler,new a.DoubleClickHandler,new a.MouseWheelHandler,new a.TouchHandler]);this.isFullscreen&&($(mapEl).addClass("wax-fullscreen-map"),d.setSize(this.m.parent.offsetWidth,this.m.parent.offsetHeight));var e=this.m;d.addCallback("panned",function(a,b){e.panBy(b[0],b[1])}),d.addCallback("zoomed",function(a,b){e.zoomBy(b)}),this.m=d,this.addControls(),d.coordinate=c,d.draw()},toggleFullscreen:function(){$(".map",this.el).toggleClass("wax-fullscreen-map"),this.isFullscreen||(this.smallSize=[this.m.parent.offsetWidth,this.m.parent.offsetHeight]),this.m.setSize(this.smallSize[0],this.smallSize[1]),this.isFullscreen=!this.isFullscreen},featureHover:function(b,c){var d="",e="";if(c.factor_raw===undefined)e="Not evaluated";else if(c.factor_raw===0){var f=this.get("indicator");f=="vulnerability"||f=="vulerability_delta"?e="No Vulnerability score":f=="readiness"||f=="readiness_delta"?e="No Readiness score":e="No GAIN score",d=' data-iso="'+c.iso_codes+'"'}else{var f=this.get("indicator");e=a.Indicator.format(c.factor_raw,f),d=' data-iso="'+c.iso_codes+'"'}var g=this.countryMeta.detect(function(a){return c.iso_codes==a.get("ISO3")}),h=g&&g.get("name")||c.wb_names;return"<span"+d+">"+h+": "+e+"</span>"},featureClick:function(a,b,c){}}),b&&!b.title&&(b.title="Map");return b}),Bones.initialize("model",function(a){var b;b=a.Document.extend({schema:{id:"Page",type:"object",properties:{id:{type:"string",title:"Path",required:!0,minlength:1,pattern:"^[a-z0-9-_]+$"},name:{type:"string",format:"simpletext",title:"Title"},body:{type:"string",title:"Body",format:"markdown"}}},url:function(){return"/api/Page/"+encodeURIComponent(this.id)}}),b&&!b.title&&(b.title="Page");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Collection.extend({model:a.Page,url:"/api/Page",comparator:function(a){return a.get("id").toLowerCase()}}),b&&!b.title&&(b.title="Pages");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Model.extend({url:function(){return"/api/Ranking/"+encodeURIComponent(this.get("id"))},parse:function(b){b.indicators=new a.Indicators(b.indicators),b.indicators.sortByRank({silent:!0});return b},initialize:function(b,c){var d=new a.Indicators(b.indicators),e=new a.Indicator({id:this.id});this.set({indicators:d.sortByRank({silent:!0}),subject:e},{silent:!0})},path:function(){return b.path(this.id)}}),b.path=function(b){var c=a.Indicator.meta;if(!c[b])return"/";var d="/ranking/";b.slice(-6)=="_delta"&&(d="/ranking/delta/",b=b.slice(0,-6));if(c[b].index&&b!=c[b].index)return d+c[b].index+"/"+b;return d+b},b&&!b.title&&(b.title="Ranking");return b}),Bones.initialize("model",function(a){var b;b=Backbone.Model.extend({initialize:function(a,b){this.set({indicator:a.id.slice(0,-5),year:a.id.slice(-4)},{silent:!0})}}),b&&!b.title&&(b.title="Tileset");return b}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({className:"adminDocument",display:null,events:{"click .edit":"edit","click .del":"del","click .save":"save","click .cancel":"editEnd"},initialize:function(a){_.bindAll(this,"render","edit","del","save"),this.display=a.display,this.render()},editEnd:function(){$("html").removeClass("bonesAdminEditing"),this.display.render()},render:function(){$(this.el).html(c.AdminDocument(this.model.renderer()));return this},edit:function(){var a=this;this.display.render({editable:!0}),_(this.model.renderer({editable:!0,keys:!0})).each(function(b){var c=a.display.$("."+a.model.id+".editable-"+b);c.size()&&a.model.edit("form",c,b)}),$("html").addClass("bonesAdminEditing")},del:function(){confirm("Are you sure you want to delete this page?")&&this.model.destroy({success:function(){window.location.hash=""},error:Bones.admin.error});return!1},save:function(){var a=this,b={};_(this.model.renderer({editable:!0,keys:!0})).each(function(c){var d=a.display.$("."+a.model.id+".editable-"+c);d.size()&&(b[c]=a.model.edit("value",d,c))}),_.isEmpty(b)||a.model.save(b,{success:function(){a.editEnd(),a.render()},error:Bones.admin.error})}}),d&&!d.title&&(d.title="AdminDocument");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({id:"bonesAdmin",dropdowns:[],auth:null,events:{"click a.toggle":"toggle"},initialize:function(a){_.bindAll(this,"render","toggle","setPanel","error"),a&&_.extend(this,a),this.model.bind("auth:status",this.render)},render:function(){$(this.el).html(c.Admin(this.model)),$("#"+this.id).size()||$("body").append(this.el),$("html").toggleClass("bonesAdmin",this.model.authenticated),this.model.authenticated?_.each(this.dropdowns,function(a){new a({admin:this,model:this.model})},this):this.auth&&new this.auth({admin:this,model:this.model});return this},toggle:function(){$("html").toggleClass("bonesAdmin");return!1},setPanel:function(a){a?this.$(".panel").html(a.el):this.$(".panel").empty()},error:function(a,c){var d=c;if(c instanceof Object)if(c.responseText)try{d=$.parseJSON(c.responseText).message}catch(e){}else c.message?d=c.message:d=c.toString();new b.AdminGrowl({message:d,classes:"error",autoclose:0})}}),d&&!d.title&&(d.title="Admin");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({className:"dropdown",icon:null,title:null,links:[],admin:null,context:null,events:{"click a[href$=#dropdown]":"dropdown","click .dropdown ul a":"dropdown"},initialize:function(a){_.bindAll(this,"render","dropdown"),a=a||{},this.admin=a.admin||null,this.context=a.context||$("#bonesAdminToolbar .menus"),this.render()},render:function(){this.links=_.isFunction(this.links)?this.links():this.links||[],$(this.el).html(c.AdminDropdown(this)),this.context.prepend(this.el);return this},dropdown:function(a){$(this.el).is(".expanded")||$(".expanded",this.context).removeClass("expanded"),$(this.el).toggleClass("expanded");return!1}}),d&&!d.title&&(d.title="AdminDropdown");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({className:"AdminGrowl",events:{"click a[href$=#close]":"close"},initialize:function(a){_.bindAll(this,"render","close"),this.options=a||{},this.options.message=this.options.message||"",this.options.classes=this.options.classes||"ok",this.options.context=this.options.context||$("#bonesAdminGrowl"),_.isUndefined(this.options.autoclose)&&(this.options.autoclose=2e3),this.render()},render:function(){$(this.el).html(c.AdminGrowl({message:this.options.message,autoclose:Boolean(this.options.autoclose)})).addClass(this.options.classes),this.options.autoclose&&this.close(this.options.autoclose),this.options.context.append(this.el);return this},close:function(a){a=a||0,$(this.el).delay(a).fadeOut(250,this.remove);return!1}}),d&&!d.title&&(d.title="AdminGrowl");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({className:"AdminPopup",title:"",content:"",view:null,admin:null,context:null,events:{"click a[href$=#close]":"close"},initialize:function(a){_.bindAll(this,"render","close"),a=a||{},this.title=a.title||this.title,this.admin=a.admin||null,this.content=a.content||this.content,this.context=a.context||$("#bonesAdminPopup"),this.content.el&&(this.view=this.content,this.content=""),this.render()},render:function(){if(this.$(".content").size())return this;var a=this;$(this.el).html(c.AdminPopup(this)),this.view&&this.$(".content").append(this.view.el),this.context.append(this.el),$("body").addClass("bonesAdminModal").bind("keyup.AdminPopup",function(b){b.keyCode==27&&a.close()});return this},close:function(){$("body").removeClass("bonesAdminModal").unbind(".AdminPopup"),$(this.el).fadeOut(250,function(){$(this).remove()});return!1}}),d&&!d.title&&(d.title="AdminPopup");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.AdminPopup.extend({rowView:"AdminTableRow",header:null,initialize:function(a){_.bindAll(this,"render"),this.rowView=a.rowView||this.rowView,this.header=a.header||this.header,this.content=c.AdminTable(this),this.collection.bind("all",this.render),this.collection.fetch(),b.AdminPopup.prototype.initialize.call(this,a)},render:function(){var a=this;$(this.el).addClass("AdminTable"),b.AdminPopup.prototype.render.call(this),this.collection.each(function(b){b.view||(b.view=new a.rowView({model:b,admin:a.admin,table:a}),a.$("table").append(b.view.el))});return this}}),d&&!d.title&&(d.title="AdminTable");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({tagName:"tr",events:{"click input.delete":"del"},initialize:function(a){_.bindAll(this,"render","del","remove"),this.render()},render:function(){$(this.el).html(this.template("AdminTableRow",this.model));return this},del:function(){if(!confirm("Are you sure you want to delete this item?"))return!1;this.model.destroy({success:this.remove});return!1}}),d&&!d.title&&(d.title="AdminTableRow");return d}),Bones.initialize("view",function(a,b,c){var d;b.AdminDropdown&&(d=b.AdminDropdown.extend({icon:"user",events:_.extend({"click a[href=#logout]":"logout","click a[href=#user]":"user","click a[href=#userCreate]":"userCreate","click a[href=#userView]":"userView"},b.AdminDropdown.prototype.events),links:[{href:"#user",title:"My account"},{href:"#userCreate",title:"Create user"},{href:"#userView",title:"View users"},{href:"#logout",title:"Logout"}],initialize:function(a){this.title=this.model.id,_.bindAll(this,"logout","user","userCreate","userView"),b.AdminDropdown.prototype.initialize.call(this,a)},logout:function(){this.model.logout();return!1},user:function(){new b.AdminPopupUser({title:"My account",model:this.model,admin:this.admin});return!1},userCreate:function(){new b.AdminPopupUser({title:"Create user",model:new this.model.constructor({id:""}),admin:this.admin});return!1},userView:function(){new b.AdminTable({title:"Users",collection:new a.Users,admin:this.admin,header:[{title:"Username"},{title:"Actions",className:"actions"}],rowView:b.AdminTableRowUser});return!1}})),d&&!d.title&&(d.title="AdminDropdownUser");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({admin:null,context:null,events:{"click input[type=submit]":"auth"},initialize:function(a){_.bindAll(this,"render","auth"),_.defaults(this,a||{},{context:$("#bonesAdminToolbar > .auth")}),this.model.unbind("auth:error"),this.model.bind("auth:error",function(a,c){var d={message:c.message||"An unknown error has occurred.",classes:"error"};new b.AdminGrowl(d)}),this.render()},render:function(){$(this.el).html(c.AdminFormLogin(this.model)),this.context.prepend(this.el);return this},auth:function(){this.model.login({id:this.$("input[name=username]").val(),password:this.$("input[name=password]").val()});return!1}}),d&&!d.title&&(d.title="AdminLogin");return d}),Bones.initialize("view",function(a,b,c){var d;b.AdminPopup&&(d=b.AdminPopup.extend({events:_.extend({"click input[type=submit]":"submit"},b.AdminPopup.prototype.events),initialize:function(a){_.bindAll(this,"submit"),this.create=!Boolean(this.model.id),this.content=c.AdminFormUser({id:this.model.get("id"),email:this.model.get("email")}),b.AdminPopup.prototype.initialize.call(this,a)},submit:function(){var a=this,c={id:this.model.id||this.$("input[name=id]").val(),password:this.$("input[name=password]").val(),passwordConfirm:this.$("input[name=passwordConfirm]").val(),email:this.$("input[name=email]").val()};this.model.save(c,{success:function(){var c=a.create?"User "+a.model.id+" created.":"Saved changes.";new b.AdminGrowl({message:c}),a.close()},error:a.admin.error});return!1}})),d&&!d.title&&(d.title="AdminPopupUser");return d}),Bones.initialize("view",function(a,b,c){var d;b.AdminTableRow&&(d=b.AdminTableRow.extend({initialize:function(a){_.bindAll(this,"render"),b.AdminTableRow.prototype.initialize.call(this,a)},render:function(){$(this.el).html(c.AdminTableRowUser(this.model));return this}})),d&&!d.title&&(d.title="AdminTableRowUser");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({className:"admin",events:{"click input[type=submit]":"submit"},initialize:function(a){_.bindAll(this,"render","submit"),this.render()},render:function(){$(this.el).empty().append(c.ResetPassword(this.model));return this},submit:function(){var a=this,c={id:encodeURIComponent(this.model.id||this.$("input[name=id]").val()),success:function(c){var c=c||{message:"Reset password"};new b.AdminGrowl(c),a.route("/")},error:function(a){new b.AdminGrowl({message:"Unknown user",classes:"error"})}};c.id&&this.model.resetPassword(c);return!1}}),d&&!d.title&&(d.title="ResetPassword");return d}),Bones.initialize("view",function(a,b,c){var d,e=_.once(function(){var a=!0,b=Backbone.History.prototype.loadUrl;Backbone.History.prototype.loadUrl=function(c){a?a=!1:b.call(this,c)},Bones.start({pushState:!0,root:""})}),f=_.once(function(){Bones.user=new a.User,Bones.admin=new b.Admin({model:Bones.user,auth:b.AdminLogin,dropdowns:[b.AdminDropdownUser]}),Bones.admin.render(),Bones.user.status()}),g=_.once(function(){var c=new b.CountrySearch({model:new a.CountrySearch});c.render()}),h=_.once(function(){$("#feedbacktab .button").click(function(){$("#feedbacktab").toggleClass("open")})}),i=_.once(function(){$(function(){$(document).keydown(function(a){window.currentKeys=window.currentKeys||{},window.currentKeys[a.keyCode]=a}),$(document).keyup(function(a){window.currentKeys=window.currentKeys||{},window.currentKeys[a.keyCode]&&delete window.currentKeys[a.keyCode]})})});d=Backbone.View.extend({_ensureElement:function(){this.el=$("body")},initialize:function(){Bones.server||(h(),g(),f(),i())}}),d.prototype.events={"click a":"routeClick"},d.prototype.routeClick=function(a){if(_.size(window.currentKeys))return!0;if(window.history&&window.history.pushState){var b=$(a.currentTarget).get(0).getAttribute("href",2);if(b)return d.route($(a.currentTarget).get(0).getAttribute("href",2))}return!0},d.route=function(a){e();if(a.charAt(0)==="/"){var b=_.any(Backbone.history.handlers,function(b){if(b.route.test(a)){Bones.admin.setPanel(),Backbone.history.navigate(a,!0);return!0}});return!b}return!0},d.startYear=1995,d.endYear=2011,d&&!d.title&&(d.title="App");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({id:"main",initialize:function(a){_.bindAll(this,"drawerEvents","positionDrawer"),this.app=new b.App,!Bones.server&&_.once(this.drawerEvents)()},attach:function(){$("body").removeClass("fullscreen-map"),this.feedbackEmail();return this},feedbackEmail:function(){var a=$(".feedback-email").attr("href").split("?").shift(),b=_.reduce({subject:"GAIN Index - Site feedback",body:"\n\n\nSent from "+window.location.href+"\n"},function(a,b,c){a+=a==""?"?":"&";return a+c+"="+encodeURIComponent(b)},"");$(".feedback-email").attr("href",a+b)},scrollTop:function(){var a=$(window.location.hash).offset(),b=a?a.top:1;if($("body").scrollTop(1)){$("body").scrollTop(b);return this}$("html").scrollTop(0)&&$("html").scrollTop(b);return this},activeLinks:function(){var a=window.location.pathname;$("a.active").removeClass("active"),$("a.exact").each(function(b,c){a==$(c).attr("href")&&$(c).addClass("active")}),$("a:not(.exact)").each(function(b,c){a.indexOf($(c).attr("href"))==0&&$(c).addClass("active")});return this},drawerEvents:function(){var a=this;_.each(["floor","drawer"],function(b){$(window).scroll(_.throttle(function(){a.positionDrawer(b)},20))})},positionDrawer:function(a){var b=$("#cabinet ."+a),c=$("#cabinet .top").offset(),d=$("#cabinet .floor").offset();if(!!c&&!!d){window.drawerTop=window.drawerTop||d.top;var e=$("#cabinet .top").outerHeight()+c.top-b.outerHeight()-(window.drawerTop-c.top),f=$(window).scrollTop();f>c.top?b.addClass("fixed"):b.removeClass("fixed"),f>e?b.addClass("bottom"):b.removeClass("bottom")}}}),d.render=Bones.server,d&&!d.title&&(d.title="Main");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({render:function(){var b=this,d={},e={},f=[],g="",h=this.model.get("indicators");h.each(function(b){g||(g=new a.Country({id:b.get("ISO3")})),d[b.get("name")]=b});if(!!g){_.each(["gain","readiness","vulnerability"],function(a){var c=!1;d.hasOwnProperty(a)&&(c=b.formatRank(d[a].rank({format:!1}))),c?e[a]=c:a!=="gain"&&f.push({vulnerability:"Vulnerability",readiness:"Readiness"}[a])});var i=this.templateName||"AboutQuadrant";if(!f.length&&!this.templateName){var j=[d.vulnerability.score({format:!1})>.33?"Top":"Bottom",d.readiness.score({format:!1})>.56?"Right":"Left"];i=i+j.join("")}$(this.el).empty().append(c[i]({country:g.get("articleName")||g.get("name"),ranks:e,missing:f,rankVerb:{gain:"suitable",readiness:"ready",vulnerability:"vulnerable"}}))}},formatRank:function(a){if(_.isUndefined(a))return!1;var b=a.desc<a.asc?"desc":"asc",c={desc:"most",asc:"least"}[b],d=a[b],e="th",f={1:"st",2:"nd",3:"rd"};/1\d$/.test(""+d)||(e=f[d%10]||"th");return d==1?c:d+e+" "+c}}),d&&!d.title&&(d.title="AboutQuadrant");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.AboutQuadrant.extend({initialize:function(){_.bind(this,"render"),this.templateName="AboutQuadrantShort",this.render()}}),d&&!d.title&&(d.title="AboutQuadrantShort");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({className:"adminDocument",display:null,events:{"click .edit":"edit"},initialize:function(a){_.bindAll(this,"edit","render"),this.collection.bind("add",this.render),this.render()},render:function(){var a=[];this.collection.each(function(b){a.push(b.get("name"))}),$(this.el).empty().append(c.AdminFrontFeature({countries:a.join(", ")}));return this},edit:function(){new b.AdminPopupFrontFeature({model:new a.Front({id:"front"}),collection:this.collection})}}),d&&!d.title&&(d.title="AdminFrontFeature");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.AdminPopup.extend({events:_.extend({"click input[type=submit]":"submit"},b.AdminPopup.prototype.events),initialize:function(d){_.bindAll(this,"submit"),this.content=c.AdminPopupFrontFeature({countries:a.Country.meta,featuredFirst:this.collection.first().get("id"),featuredSecond:this.collection.last().get("id")}),b.AdminPopup.prototype.initialize.call(this,d)},submit:function(c){c.preventDefault();var d=this,e=this.$("select[name=featuredFirst]").val(),f=this.$("select[name=featuredSecond]").val(),g={id:this.$("input[name=id]").val(),featuredFirst:e,featuredSecond:f,author:Bones.user.id||"",created:parseInt((new Date).getTime()/1e3)+""},d=this;this.model.save(g,{success:function(){var c=d.collection,g=c.first(),h=c.last();c.remove(g),c.remove(h),g=new a.Country({id:e}),h=new a.Country({id:f}),g.fetch({success:function(a){h.fetch({success:function(b){c.add(a,{silent:!0}),c.add(b)},error:Bones.admin.error})},error:Bones.admin.error});var i="Featured countries on front page have been updated.";new b.AdminGrowl({message:i,autoclose:5e3}),d.close()},error:Bones.admin.error});return!1}}),d&&!d.title&&(d.title="AdminPopupFrontFeature");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({initialize:function(){this.render.apply(this,arguments)},sparklineOptions:{xaxis:{tickDecimals:0},grid:{borderColor:"#ccc"},legend:{show:!0,container:".drawer .chart .legend",noColumns:4},series:{lines:{lineWidth:1},shadowSize:0},colors:["#666","#d15659","#d15659"]},render:function(a){var b=a.data,c=a.rawData;if(b&&b.length>1){var d={data:b,color:1,lines:{show:!1},points:{show:!0,radius:1}},e=[b,d];if(c&&c.length){c.length!=b.length&&(e[1].label="Calculated",e[1].color=0);var f={label:"Reported",data:c,color:1,lines:{show:!1},points:{show:!0,radius:1}};e.push(f)}if(a.options!=undefined)var g=_.extend(a.options,this.sparklineOptions);else var g=this.sparklineOptions;var h=[Infinity,-Infinity];_(b).each(function(a){a[1]<h[0]&&(h[0]=a[1]),a[1]>h[1]&&(h[1]=a[1])});var i=h[1]-h[0];if(i<.01){var j=h[0]+i/2;g=_.extend({},g,{yaxis:_.extend({},g.yaxis,{min:j-.005,max:j+.005})})}$.plot(a.el,e,g)}}}),d&&!d.title&&(d.title="Bigline");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.Main.extend({events:_.extend({"click ul.tabs.level-1 li a":"selectVR","click ul.tabs.level-2 li a":"selectBreakdown","click table.data tr":"openDrawer","click .country-summary .gain":"openDrawer","click .country-summary .indicator":"openDrawer","click .country-profile .reporting":"openDrawer","click .drawer .handle a":"closeDrawer"},b.Main.prototype.events),render:function(){var d=this.model.get("indicators"),e=[];_.each(d.byName("gain").get("rank"),function(a,b){e.push({year:b,rank:d.byName("gain").rank({year:b})})}),$(this.el).empty().append(c.Cabinet({klass:"country"})),$(".top",this.el).empty().append(c.Country({title:this.model.meta("name"),rank:e,gdp:{year:b.App.endYear,value:d.byName("gdp").input({year:2009}),label:d.byName("gdp").meta("name")},population:{year:b.App.endYear,value:d.byName("pop").input({year:2009}),label:d.byName("pop").meta("name")}})),new b.CountrySummary({el:$(".country-summary",this.el).last(),model:this.model,map:!0}),this.aboutView=(new b.AboutQuadrant({el:$(".prose",this.el),model:this.model})).render();var f=new a.Indicator({id:"gain"});$(".floor",this.el).empty().append(c.DefaultFloor({title:f.meta("name"),content:c.GaInFloorText(),methodologyLink:"/about/methodology#"+(f.meta("component")||f.meta("sector")?"scoringindicators":f.meta("index"))})),this.ensureChildViews(),this.vTable.render(),this.rTable.render(),this.pageTitle=this.model.meta("name");return this},attach:function(){b.Main.prototype.attach.call(this);var c=this.model.meta("coords");this.map=new a.Map({year:b.App.endYear,indicator:"gain"},{el:$(".country-summary .map-wrapper",this.el)[0],width:340,height:160,extent:c}),this.map.featureClick=function(c,d,e){var f=$(c).data("iso");f&&b.App.route("/country/"+a.Country.pathSafe(f))},this.ensureChildViews(),this.vTable.attach(),this.rTable.attach();return this},ensureChildViews:function(){this.vTable==undefined&&(this.vTable=new b.CountryTable({el:$("table#vulnerability",this.el),collection:this.model.get("indicators")})),this.rTable==undefined&&(this.rTable=new b.CountryTable({el:$("table#readiness",this.el),collection:this.model.get("indicators"),structure:"components",index:"readiness"}))},activeLinks:function(){b.Main.prototype.activeLinks.apply(this,arguments),$("ul.tabs.level-1 a").addClass("active"),$("ul.tabs.level-2").removeClass("hidden"),$(".tab-content table.hidden").each(function(a,b){var c=$(b).attr("id");$("ul.tabs.level-1 a#"+c).removeClass("active"),$("ul.tabs.level-2."+c).addClass("hidden")}),$("ul.tabs.level-2 ."+this.vTable.options.structure).addClass("active");return this},selectVR:function(a){$(".tab-content table").addClass("hidden"),$(".tab-content table"+$(a.currentTarget).attr("href")).removeClass("hidden"),this.activeLinks();return!1},selectBreakdown:function(a){this.vTable.options.structure="sectors",$(a.currentTarget).hasClass("components")&&(this.vTable.options.structure="components"),this.vTable.render().attach(),this.activeLinks();return!1},openDrawer:function(d){$(".indicator").removeClass("active");var e=$(d.currentTarget).attr("id").substr(10),f=this.model.get("indicators").byName(e),g=this.model;if(!!f){$(d.currentTarget).addClass("active");var h=e=="reporting"?"input":"values",i=f.meta("name");h!=="input"&&(i=i+" score");var j=this.model.get("indicators").getGraphData("name",e,h);$(".drawer .content",this.el).empty().append(c.CountryDrawer({title:f.meta("name"),chartTitle:i,description:f.meta("description"),indicator:f.get("name"),source:f.meta("source")||[],methodologyLink:"/about/methodology#"+(f.meta("component")||f.meta("sector")?"scoringindicators":f.meta("index"))}));var k=this.el;h!=="input"&&(f.score({format:!1})==undefined?$(".drawer .similar-countries",k).empty().append(c.SimilarCountries({similar:!1,title:f.meta("name")})):($(".drawer .similar-countries",k).css({opacity:0}),(new a.IndicatorSummary({id:f.get("name"),years:[f.get("currentYear")]})).fetch({success:function(a){$(".drawer .similar-countries",k).empty().append(c.SimilarCountries({similar:a.similar(g.get("id"),5),title:f.meta("name")})),$(".drawer .similar-countries",k).animate({opacity:1,duration:250})}})));if(j&&j.length>1){var l=this.model.get("indicators").getRawGraphData("name",e);l.length&&$(".lastReported",k).empty().append("Most recent reported data from "+_(l).last()[0]);var m={el:$(".drawer .content .graph",this.el),data:j,rawData:l};h=="input"&&(m.options={yaxis:{tickFormatter:function(b,c){return a.Indicator.format(b,e)}}}),new b.Bigline(m)}else $(".drawer .content .graph",this.el).addClass("no-data");$(".drawer",this.el).addClass("open"),this.positionDrawer("drawer");return!1}},closeDrawer:function(){$(".drawer",this.el).removeClass("open"),$(".indicator").removeClass("active");return!1}}),d&&!d.title&&(d.title="Country");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({initialize:function(a){this.indicator=a.indicator,this.render(a.callback)},render:function(b){var d=this,e=a.Country.meta;options={},$(this.el).hasClass("open")&&$(this.el).addClass("updating"),this.model.fetch({success:function(a){$(".content",d.el).empty().append(c.CountryDetailDrawer({countryName:e[a.id].name,indicatorName:d.indicator.meta("name"),countryPath:a.path()})),d.attach(),$(d.el).removeClass("updating"),typeof b=="function"&&b()}});return this},attach:function(){new b.CountrySummary({el:$(".content .country-summary",this.el),model:this.model});var a=this;$(".content .composition-bars",this.el).empty(),_.each(["Vulnerability","Readiness"],function(c){new b.SectorCandyBar({type:c,model:a.model,el:$(".content .composition-bars",a.el)})});var c=this.model.get("indicators").getGraphData("name",this.indicator.id);c.length>1?new b.Bigline({el:$(".content .graph",this.el),data:c}):$(".content .indicator-time",this.el).hide()}}),d&&!d.title&&(d.title="CountryDetailDrawer");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({id:"country-search",_ensureElement:function(){this.el=$("#country-search")},initialize:function(){_.bind(this,"search","filter","select","submit","trigger"),this.options.resultLimit=this.options.resultLimit||3;var a=this;this.active=null;var b=$("input[name=search]",this.el),c=b.attr("title");b.blur(function(){b.val()===""&&b.val(c)}).focus(function(){b.val()===c&&b.val("")}).blur(),b.autocomplete({source:function(b,c){a.active=null,c(a.search(b.term));return!1},select:function(b,c){b.preventDefault(),a.select(c)},position:{at:"left bottom",my:"left top"}})},events:{"click input[name=submit]":"submit","submit form":"submit"},select:function(a){this.active=a.item,$("input[name=search]",this.el).val(this.active.label),this.trigger(a.item)},trigger:function(a){b.App.route("/country/"+a.path),$("input[name=search]",this.el).val("")},submit:function(a){var b=$("input[name=search]",this.el);a.preventDefault();if(!this.active){var c=this.search(b.val());this.active=_(c).first()}this.active&&(b.autocomplete("close"),this.trigger(this.active),this.active=!1);return!1},filter:function(a){return _(a).first(this.options.resultLimit)},search:function(a){a=a.replace(/\s+/g," "),a=a.replace(/[^\w\s]/g,"");var b=new RegExp("\\b"+a,"i"),c=this.model.select(function(a){return b.test(a.get("ISO3"))||b.test(a.get("name"))});return _(this.filter(c)).map(function(a){return{label:a.get("name"),value:a.get("ISO3"),path:a.path()}})}}),d&&!d.title&&(d.title="CountrySearch");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.CountrySearch.extend({className:"country-selector",_ensureElement:function(){this.el=$(".country-selector")},events:{"click input[name=add]":"submit","submit form":"submit"},filter:function(a){var c=this.options.available;a=_(a).select(function(a){return _.include(c,a.get("ISO3"))});if(this.options.selected){var d=this.options.selected.pluck("ISO3");a=_(a).reject(function(a){return _.include(d,a.get("ISO3"))})}return b.CountrySearch.prototype.filter.call(this,a)},trigger:function(b){this.options.selected&&(this.options.selected.add([new a.Country({id:b.value})]),$("input[name=search]",this.el).val(""))}}),d&&!d.title&&(d.title="CountrySelect");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({initialize:function(a){this.map=a.map||!1,this.render()},render:function(){var a={},b={},d=this.model.get("indicators");_.each(["gain","readiness","vulnerability"],function(b){var c=d.byName("trend").trend(b),e=d.byName(b);e&&(b==="gain"?a[b]={name:e.meta("name")+" rank",value:(e.rank({format:!1})||{}).desc,score:e.score(),trend:c,raw:e.score({format:!1})}:a[b]={name:e.meta("name"),value:e.score(),raw:e.score({format:!1})})});if(a.readiness&&a.vulnerability){var e=a.readiness.raw,f=a.vulnerability.raw;if(e&&f){var g=f>.33?"t":"b";g+=e>.56?"r":"l",e=(e-.03)/1,f=(f-.03)/.6,b.x=Math.round(e*50)+23,b.y=50-Math.round(f*50)}else b=!1}$(this.el).empty().append(c.CountrySummary({data:a,active:g,pin:b,map:this.map}));return this}}),d&&!d.title&&(d.title="CountrySummary");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.Main.extend({initialize:function(a){_.bindAll(this,"render","attach"),this.options=this.options||{},this.options.tab=a.index||"vulnerability",this.options.structure=a.structure||"sectors"},render:function(){var a=this,d={},e=[],f=this.tree[this.options.tab][this.options.structure],g=this.collection.model.meta,h={},i=[],j=function(b,c){var d={field:g[b],klass:c,raw:null,normalized:null},f={},j=a.collection.byName(b);if(j!=undefined){d.input="";if(j.meta("sector")||j.meta("component"))d.input=j.input();d.score=j.score()}d.field!=undefined&&(h[d.field.id]={},h[d.field.id].score=d.score,h[d.field.id].index=d.field.index,h[d.field.id].name=d.field.id,h[d.field.id].sector=d.field.sector,d.field.component==null&&d.field.id!=a.options.tab&&(f.id=d.field.id,f.score=isNaN(parseFloat(d.score))?0:d.score,i.push(f)),e.push(d))};j(this.options.tab,"index"),_.each(f,function(a,b){j(b,"section"),_.each(a,function(a){a.id!=b&&j(a,"data")})});var k=_(i).chain().pluck("score").reduce(function(a,b){return a+parseFloat(b)},0).value(),l=_(i).chain().reduce(function(a,b){b.percent=Math.round(parseFloat(b.score)/k*100);return a+b.percent},0).value();i=_.select(i,function(a){return a.percent>0});var m=-1;while(l>100)m<0&&(m=i.length-1),i[m].percent>1&&(i[m].percent--,l--),m--;_.each(e,function(a){a.field.component==null&&(a.graph=i)}),h=_.filter(h,function(a){return a.score>0&&a.score<1||a.sector==null}),this.options.tab=="vulnerability"?(h=_.filter(h,function(a){return a.score>.7}),h.sort(function(a,b){return b.score-a.score}),h=h.slice(0,3)):(h=_.filter(h,function(a){return a.score<.33}),h.sort(function(a,b){return a.score-b.score}),h=h.slice(0,3));var n={};_.each(h,function(a){n[a.name]=a.score}),$(this.el).empty().append(c.CountryTable({data:e,worst:n,startYear:b.App.startYear,endYear:b.App.endYear}));return this},attach:function(){var a=this.collection;$("tr",this.el).each(function(){var c=$(".graph .placeholder",this);if(c.length!=0){var d=$(this).attr("id").substr(10);if(!d)return;var e=a.getGraphData("name",d),f=a.getRawGraphData("name",d);new b.Sparkline({el:c,data:e,rawData:f})}})}}),d.prototype.tree={readiness:{components:{economic:["business","finan","fiscal","gov_spend","invest","monetary","trade"],governance:["corruption","non_violence","voice_accountability"],social:["enrollment","labor","mobiles","rule_of_law"]},sectors:{}},vulnerability:{components:{exposure:["coast_area","d-ppt","d-temp","daly","dependency_natural","energy_access","biome_threat","health_disease","road_floods","urban_concentration","urban_risk","yield_cv","yld_proj"],sensitivity:["coast_popn","ecological_footprint","electrical_outages","energy_sensit","external","imports","road_paved","rural_popn","slums","staff","threatened_species","urban_excess_growth","water_disease","water_use"],capacity:["food_capacity","international_treaties","life","malnutr","matern","protected_biomes","sanit","trade_transport","water_access"]},sectors:{food:["food_capacity","imports","malnutr","rural_popn","yield_cv","yld_proj"],ecosystems:["dependency_natural","ecological_footprint","biome_threat","international_treaties","protected_biomes"],habitat:["electrical_outages","slums","threatened_species","trade_transport","urban_concentration","urban_excess_growth","urban_risk"],health:["daly","external","health_disease","life","matern","staff"],infrastructure:["coast_area","coast_popn","energy_access","energy_sensit","road_floods","road_paved"],water:["d-ppt","d-temp","sanit","water_access","water_disease","water_use"]}},vulnerability_delta:{components:{},sectors:{}},readiness_delta:{components:{},sectors:{}},gain:{components:{},sectors:{}}},d&&!d.title&&(d.title="CountryTable");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.Main.extend({initialize:function(a){b.Main.prototype.initialize.apply(this,arguments),_.bindAll(this,"setupPanel"),Bones.user&&Bones.user.bind("auth:status",this.setupPanel)},attach:function(){b.Main.prototype.attach.call(this),!Bones.server&&this.setupPanel();return this},setupPanel:function(){Bones.user&&Bones.user.authenticated?Bones.admin.setPanel(new b.AdminDocument({model:this.model,display:this})):Bones.admin.setPanel()}}),d&&!d.title&&(d.title="Document");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.Main.extend({initialize:function(a){_.bindAll(this,"render"),a=a||{};if(a.responseText)try{a=$.parseJSON(a.responseText)}catch(c){}this.options={},this.options.status=a.status||"404",this.options.message=a.message||"Not found",b.Main.prototype.initialize.call(this,a)},render:function(){$(this.el).empty().append(c.Error(this.options));return this}}),d&&!d.title&&(d.title="Error");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.Main.extend({events:{"click .drawer .handle a.handle":"closeDrawer","click #map-years li a":"yearClick","click #map-indicators li a":"indicatorClick","click .floor .correction-control a.correct":"toggleCorrection","click .featured .country":"countryClick","click #map-fullscreen":"fullscreenClick","touchmove .drawer":"disableEvent","gesturechange .drawer":"disableEvent"},initialize:function(a){_.bindAll(this,"render","renderCountryFeature","renderFloor","setupPanel","fullscreenClick"),this.collection.bind("add",this.renderCountryFeature),b.Main.prototype.initialize.call(this,a),Bones.user&&Bones.user.bind("auth:status",this.setupPanel)},render:function(){$(this.el).empty().append(c.Cabinet({klass:"front"})),$(".top",this.el).empty().append(c.Front());var d=[],e=[],f=this.model,g=_.reject(f.list("values",b.App.endYear),function(a){return isNaN(parseFloat(a.value))});d=g.slice(0,5),e=g.slice(g.length-5,g.length),_.map(d,function(b){b.path=a.Country.pathSafe(b.name),b.name=b.name.replace("The",""),b.value=b.value.substr(0,b.value.length-2)}),_.map(e,function(b){b.path=a.Country.pathSafe(b.name),b.name=b.name.replace("The",""),b.value=b.value.substr(0,b.value.length-2)}),$(".ranking",this.el).empty().append(c.RankingTopBottom({top:d,bottom:e,length:g.length})),this.renderCountryFeature(),this.renderFloor("gain");return this},attach:function(){function k(){function a(a){var b=$(window),c=$(a),d=b.scrollTop()+b.height();if(!c.offset())return!1;var e=c.offset().top+c.height();return d>e}!j&&a("#carousel")&&(j=!0,$("#carousel").cycle("resume"))}b.Main.prototype.attach.call(this);var d="gain",e=b.App.endYear,f=this;this.map=new a.Map({year:e,indicator:d},{controls:["interaction","zoomer"]}),this.map.featureClick=function(a,b,c){var d=$(a).data("iso");if(d)return f.openDrawer($(a).data("iso"))},this.map.bind("change:indicator",this.renderFloor);var g={indicators:[],years:[]};for(var h=b.App.startYear;h<=b.App.endYear;h++){var i={year:h,klass:"year-"+h};h==e&&(i.klass+=" selected"),g.years.push(i)}_.each(["gain","matrix","readiness","vulnerability"],function(b){var c={name:a.Indicator.meta[b].name,id:b,klass:"indicator-"+b};d==b&&(c.klass+=" selected"),g.indicators.push(c)}),$("#map",this.el).append(c.MapInterface(g)),$("#carousel").after("<div id='carousel-nav'>").cycle({timeout:6e3,delay:6e3,pager:"#carousel-nav"}).cycle("pause"),$("#carousel .overview").fadeIn("normal");var j=!1;k(),$(window).scroll(k),this.setupPanel();return this},fullscreenClick:function(a){a.preventDefault(),this.scrollTop(),$("body").toggleClass("fullscreen-map"),this.map.toggleFullscreen()},disableEvent:function(a){this.map.isFullscreen&&a.preventDefault()},setupPanel:function(){Bones.user&&Bones.user.authenticated?Bones.admin.setPanel(new b.AdminFrontFeature({collection:this.collection})):Bones.admin.setPanel()},renderCountryFeature:function(){var a=this;$(".featured .countries",this.el).empty(),this.collection.each(function(d){$(".featured .countries",a.el).append(c.FeaturedFront({path:d.path(),name:d.meta("name"),iso:d.meta("ISO3")})),(new b.AboutQuadrantShort({el:$(".featured .prose",a.el).last(),model:d})).render(),new b.CountrySummary({el:$(".featured .country-summary",a.el).last(),model:d})})},renderFloor:function(b){b=_.isObject(b)?b.get("indicator"):b;var d=new a.Indicator({id:b}),e=d.meta("map_caption")||"Countries of the world by "+d.meta("name"),f={title:d.meta("name"),content:d.get("id")=="gain"?c.GaInFloorText():d.meta("description"),correction:{caption:e,href:"#",methodologyLink:"/about/methodology#"+(d.meta("component")||d.meta("sector")?"scoringindicators":d.meta("index")),title:d.isCorrection()?"Remove GDP adjustment":"Adjust for GDP"}};$(".floor",this.el).empty().append(c.CorrectionFloor(f))},yearClick:function(a){var b=$(a.currentTarget);b.parents("ul").find("a").removeClass("selected"),this.map.set({year:b.addClass("selected").text()}),this.noDrawer=!0;return!1},indicatorClick:function(a){var b=$(a.currentTarget),c="";b.parents("ul").find("a").removeClass("selected"),b.addClass("selected"),_.each(b.attr("class").split(" "),function(a){a.slice(0,10)==="indicator-"&&(c=a.slice(10))}),this.legend(c),this.map.set({indicator:c}),this.noDrawer=!0;return!1},legend:function(a){$(".legend",this.el).removeClass("active"),$(".legend."+a,this.el).addClass("active")},countryClick:function(c){var d="/country/"+a.Country.pathSafe($(c.currentTarget).attr("id"));return b.App.route(d)},toggleCorrection:function(){var a=this.map.get("indicator");a.slice(-6)==="_delta"?(this.legend(a.slice(0,-6)),this.map.set({indicator:a.slice(0,-6)})):(this.legend(a+"_delta"),this.map.set({indicator:a+"_delta"}));return!1},openDrawer:function(c){if(this.noDrawer!=undefined)delete this.noDrawer;else{var d=this;new b.CountryDetailDrawer({el:$(".drawer",this.el),model:new a.Country({id:c}),indicator:new a.Indicator({id:this.map.get("indicator")}),callback:function(){$(".drawer",d.el).addClass("open")}})}},closeDrawer:function(){$(".drawer",this.el).removeClass("open");return!1}}),d&&!d.title&&(d.title="Front");return d}),Bones.initialize("view",function(a,b,c){var d,e=function(a){return Math.round((a-0)/.9*580)-8},f=function(a){return Math.round((a-.1)/.6*350)-8},g=0,h=!1,i=b.App.endYear,j=function(a){var b=a.vulnerability>.33?"t":"b";b+=a.readiness>.56?"r":"l";return b},k=function(a){var b=a.y>f(.33)?"t":"b";b+=a.x>e(.56)?"r":"l";return b},l=function(a,b,c){var d=this.className.split(" ");if(d.length>1&&"point active-"+j(a)!=c){var g=parseInt(this.style.left.slice(0,-2)),h=e(a.readiness)-g,i=parseInt(this.style.bottom.slice(0,-2)),l=f(a.vulnerability)-i;return function(a){return"point active-"+k({x:a*h+g,y:a*l+i})}}return function(){return c}},m=function(a){var b={vulnerability:f,readiness:e};return function(c,d,e){if(e==null){var f=a=="vulnerability"?"bottom":"left";e=this.style[f]}var e=parseInt(e.slice(0,-2)),g=b[a](c[a]);g-=e;return function(a){return Math.round(e+g*a)+"px"}}};d=b.Main.extend({events:{"click ul.year-selector li a":"yearSelect","click a.play-button":"yearsGo","click .drawer .handle a.handle":"closeDrawer","click div.point":"pointSelect","click .active-countries span.country a.remove":"removeCountry","click .active-countries span.country a.more":"openDrawer","mouseenter div.point":"pointHover","mouseleave div.point":"pointUnhover","mouseenter .interactive .quad":"quadrantHover","mouseleave .interactive .quad":"quadrantUnhover","mouseenter .mini-matrix-links a":"hoverRelatedQuad","mouseleave .mini-matrix-links a":"unHoverRelatedQuad","click .mini-matrix-links a":"_return"},pageTitle:"Matrix",initialize:function(a){_.bindAll(this,"pointSelect","removeCountry"),b.Main.prototype.initialize.call(this,a)},render:function(){$(this.el).empty().append(c.Cabinet({klass:"matrix"})),$(".floor",this.el).empty().append(c.DefaultFloor({title:"The Readiness Matrix",content:c.MatrixFloorText(),methodologyLink:"/about/matrix"})),$(".top",this.el).empty().append(c.Matrix());return this},_return:function(a){return!1},attach:function(){b.Main.prototype.attach.call(this);var c=this,d={};map={},countries={},this.data=d;for(var e=b.App.startYear;e<=b.App.endYear;e++)d[e]=[],map[e]={};_({readiness:"x",vulnerability:"y"}).each(function(b,e){c.options[e].get("indicators").each(function(b){_(b.get("values")).each(function(c,f){var g=b.get("ISO3");countries[g]==undefined&&(countries[g]=new a.Country({id:g}));if(map[f]!==undefined){if(map[f][g]==undefined){var h={iso:g,name:countries[g].meta("name")};map[f][g]=h,d[f].push(h)}map[f][g][e]=c}})})}),_(d).each(function(a,b){d[b]=_(a).reject(function(a){return a.readiness==undefined||a.vulnerability==undefined})}),window.CSSStyleDeclaration==undefined?this.staticGraphSetup(d):this.d3setup(d),this.countrySelectorSetup(d);return this},d3setup:function(a){this.polyfillSetup(),this.matrix=d3.select(".big-matrix .graph");var d=this.matrix.selectAll("div").data(a[b.App.endYear.toString()],function(a){return a.iso});d.enter().append("div").html(function(a){return c.MatrixPoint(a)}).attr("class","point").style("bottom",function(a){return f(a.vulnerability)+"px"}).style("left",function(a){return e(a.readiness)+"px"})},staticGraphSetup:function(a){$(".year-controls",this.el).remove();var d=$(".big-matrix .graph");_.each(a[b.App.endYear.toString()],function(a){var b=$("<div>").html(c.MatrixPoint(a)).addClass("point").css("bottom",f(a.vulnerability)+"px").css("left",e(a.readiness)+"px");b.get(0).__data__=a,d.append(b)})},countrySelectorSetup:function(e){this.selected=new Backbone.Collection,this.available=_(e).chain().map(function(a){return _(a).pluck("iso")}).flatten().uniq().value(),this.selected.bind("add",function(a){var b=$(".graph .country-"+a.id,d.el).parents(".point"),e=$(".active-countries .country-"+a.id,d.el),f=function(){var a=b.get(0).__data__,d=j(a);$(b).addClass("active-"+d),$(".active-countries",this.el).append(c.CountryOption(a))};h?d.bind("yearSet",f):f()}),this.selected.bind("remove",function(a){var b=$(".graph .country-"+a.id,d.el).parents(".point"),c=$(".active-countries .country-"+a.id,d.el),e=function(){c.remove(),b.removeClass("active-tl").removeClass("active-tr").removeClass("active-bl").removeClass("active-br")};h?d.bind("yearSet",e):e()}),(new b.CountrySelect({model:new a.CountrySearch,selected:this.selected,available:this.available,resultLimit:10})).render(),$("ul.year-selector a.year-"+b.App.endYear,this.el).addClass("selected")},polyfillSetup:function(){window.CSSStyleDeclaration&&CSSStyleDeclaration.prototype.getAttribute&&(CSSStyleDeclaration.prototype.getProperty=function(a){return this.getAttribute(a)},CSSStyleDeclaration.prototype.setProperty=function(a,b){return this.setAttribute(a,b)},CSSStyleDeclaration.prototype.removeProperty=function(a){return this.removeAttribute(a)}),window.getComputedStyle==undefined&&(window.getComputedStyle=function(a){return{getPropertyValue:function(b){return a.p}}}),document.querySelector==undefined&&(document.querySelector=function(){})},setYear:function(a,b){var c=this.data[a],d=c.length,e=0,f=$.browser.msie?2e3:500,g=this;i=parseInt(a),this.matrix.selectAll("div").data(c,function(a){return a.iso}).transition().duration(f).styleTween("bottom",m("vulnerability")).styleTween("left",m("readiness")).attrTween("class",l).each("end",function(){e++,e==d&&($("ul.year-selector a",g.el).removeClass("selected"),$("ul.year-selector a.year-"+a,g.el).addClass("selected"),g.trigger("yearSet"),g.unbind("yearSet"),b&&b())})},yearSelect:function(a){var b=$(a.currentTarget).text();if(this.data[b]==undefined)return!0;this.setYear(b);return!1},yearsGo:function(a){if(h==!0){$(a.currentTarget).removeClass("running"),h=!1;return!1}i==b.App.endYear&&(i=b.App.startYear);var c=[],d=this;c.push(function(b){$(a.currentTarget).addClass("running"),h=!0,b()});for(var e=i+1;e<=b.App.endYear;e++)(function(a){c.push(function(b){h&&d.setYear(a,b)})})(e);_(c).reduceRight(_.wrap,function(){$(a.currentTarget).removeClass("running"),h=!1})();return!1},pointSelect:function(b){var c=b.currentTarget.__data__,d=this.selected.find(function(a){return a.get("ISO3")===c.iso});d?this.selected.remove(d):this.selected.add([new a.Country({id:c.iso})]),b.preventDefault()},removeCountry:function(a){var b=/country-(\w{3})/,c=$(a.currentTarget).parents("span:first"),d=b.exec(c.attr("class"));if(d&&d[1]){var e=this.selected.find(function(a){return a.get("ISO3")===d[1]});this.selected.remove(e)}a.preventDefault()},openDrawer:function(c){var d=this,e=$(c.currentTarget).parents("span:first");_(e.attr("class").split(" ")).each(function(c){if(c.slice(0,8)==="country-"){var e=c.slice(8);new b.CountryDetailDrawer({el:$(".drawer",this.el),model:new a.Country({id:e}),indicator:new a.Indicator({id:"gain"}),callback:function(){$(".drawer",d.el).addClass("open")}})}});return!1},closeDrawer:function(){$(".drawer",this.el).removeClass("open");return!1},pointHover:function(a){g++,$(".tooltip",this.el).empty().append($(a.currentTarget).html())},pointUnhover:function(a){g>0&&g--,g==0&&$(".tooltip",this.el).empty()},quadrantHover:function(a){var b=$(a.currentTarget).attr("class").match(/[tb][lr]/);b=b[0],$(".mini-matrix ."+b,this.el).addClass("active"),$(".big-matrix",this.el).append($(a.currentTarget).html()),$(".big-matrix .quad-"+b,this.el).animate({opacity:.9})},quadrantUnhover:function(a){var b=$(a.currentTarget).attr("class").match(/[tb][lr]/);b=b[0],$(".mini-matrix ."+b,this.el).removeClass("active"),$(".big-matrix .quad-"+b,this.el).fadeOut(function(){$(this).remove()})},hoverRelatedQuad:function(a){var b=$(a.currentTarget).attr("class"),c=$(".mini-matrix .quad",this.el).filter("."+b).addClass("active");$(".big-matrix",this.el).append(c.html()),$(".big-matrix .quad-"+b,this.el).animate({opacity:.9})},unHoverRelatedQuad:function(a){var b=$(a.currentTarget).attr("class").match(/[tb][lr]/);b=b[0],$(".mini-matrix ."+b,this.el).removeClass("active"),$(".big-matrix .quad-"+b,this.el).fadeOut(function(){$(this).remove()})}}),d&&!d.title&&(d.title="Matrix");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.Document.extend({render:function(a){$(this.el).empty().append(c.Cabinet({klass:"page"}));var b=this.model.renderer();$(".top",this.el).empty().append(c.Page(b));if(this.options.download&&this.model.id=="download"){var d=$("#downloadlink",this.el);d.length&&$(d).empty().append(c.Download({model:this.options.download}))}$(".floor",this.el).empty().append(c.AboutFloor()),this.pageTitle=b.render("name");return this},attach:function(){if(this.model.id=="overview"){var a=$("#overviewvideo",this.el);a.html('<iframe width="640" height="360" src="http://www.youtube.com/embed/N-SCq634Y2g?feature=player_detailpage" frameborder="0" allowfullscreen></iframe>')}return this}}),d&&!d.title&&(d.title="Page");return d}),Bones.initialize("view",function(a,b,c){var d;d=b.Main.extend({events:_.extend({"click .drawer .handle a.handle":"closeDrawer","click table.data tr":"openDrawer"},b.Main.prototype.events),initialize:function(a){_.bindAll(this,"render","attach");if(a.trends){var c=this.model.get("id");this.trends=a.trends.get("indicators").reduce(function(a,b){var d=b.trend(c);d&&(a[b.get("ISO3")]=d);return a},{})}b.Main.prototype.initialize.call(this,a)},render:function(){var d=[],e={},f={},g="",h=this.model.get("indicators"),i=h.model.meta,j=a.Ranking.path;if(!i[this.model.get("id")])return this;var k=this.model.get("id");_.each(i,function(a){a.index==i[k].index&&(a.sector&&(e[a.sector]={path:j(a.sector),name:i[a.sector].name}),a.component&&(f[a.component]={path:j(a.component),name:i[a.component].name}))});var l=function(a){return a.name};f=_.sortBy(f,l),e=_.sortBy(e,l);var m=f.length+e.length>1?{path:j(i[k].index),name:i[i[k].index].name}:{};$(this.el).empty().append(c.Cabinet({klass:"ranking"})),$(".top",this.el).empty().append(c.Ranking({indicatorName:this.model.get("subject").meta("name"),active:m,current:b.App.endYear,sectors:e,components:f,delta:this.model.get("subject").isCorrection()})),this.tableView=(new b.RankingTable({el:$("table.data",this.el),indicatorName:k,trends:this.trends,collection:this.model.get("indicators")})).render(),this.renderFloor(),this.pageTitle=this.model.get("subject").meta("name")+" rankings";return this},attach:function(){b.Main.prototype.attach.call(this);var a=this;this.tableView==undefined&&(this.tableView=new b.RankingTable({el:$("table.data",this.el),collection:this.model.get("indicators"),trends:this.trends}));return this},renderFloor:function(){var b=c.DefaultFloor,d=this.model.get("subject"),e={title:d.meta("name"),content:d.get("id")=="gain"?c.GaInFloorText():d.meta("description"),methodologyLink:"/about/methodology#"+(d.meta("component")||d.meta("sector")?"scoringindicators":d.meta("index"))};if(d.hasCorrection()||d.isCorrection()){var f=a.Ranking.path(d.uncorrected()),g=d.meta("ranking_caption")||"World wide ranking by "+d.meta("name");b=c.CorrectionFloor,d.isCorrection()?e.correction={caption:g,href:f=="/ranking/gain"?"/ranking":f,methodologyLink:"/about/methodology#"+(d.meta("component")||d.meta("sector")?"scoringindicators":d.meta("index")),title:"Remove GDP adjustment"}:e.correction={caption:g,href:f.replace("/ranking","/ranking/delta"),methodologyLink:"/about/methodology#"+(d.meta("component")||d.meta("sector")?"scoringindicators":d.meta("index")),title:"Adjust for GDP"}}$(".floor",this.el).empty().append(b(e))},openDrawer:function(c){$("table.data tr").removeClass("active"),$(c.currentTarget).addClass("active");var d=this,e=a.Country.meta,f=$(c.currentTarget).attr("id").substr(8);if(!!f&&!!e[f]){new b.CountryDetailDrawer({el:$(".drawer",this.el),model:new a.Country({id:f}),indicator:this.model.get("subject"),callback:function(){$(".drawer",d.el).addClass("open")}}),this.positionDrawer("drawer");return!1}},closeDrawer:function(){$(".drawer",this.el).removeClass("open"),$("table.data tr").removeClass("active");return!1}}),d&&!d.title&&(d.title="Ranking");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({events:{"click a.sort.rank":"sortRank","click a.sort.alpha":"sortAlpha","click a.sort.income":"sortIncome"},initialize:function(){_.bindAll(this,"render"),this.collection.bind("reset",this.render)},render:function(){var b=[],d=a.Country.meta,e=this.options.trends,f=$("tr.active",this.el).attr("id");this.collection.each(function(c){d[c.get("ISO3")]&&b.push({path:a.Country.pathSafe(c.get("ISO3")),name:d[c.get("ISO3")].name,income:d[c.get("ISO3")].oecd_income,incomeClass:d[c.get("ISO3")].oecd_income.toLowerCase().replace(/[^a-zA-Z0-9]+/gi,"-"),iso3:c.get("ISO3"),score:c.score(),trend:e[c.get("ISO3")]||"undefined",rank:c.rank()})}),$(this.el).empty().append(c.RankingTable({showTrend:!_.isEmpty(e),rows:b})),f&&$("tr#"+f).addClass("active");return this},sortAlpha:function(a){this.collection.comparator=function(a){return a.get("country")},this.collection.sort(),$("a.sort.label").removeClass("activeSort"),$("a.sort.label.alpha").addClass("activeSort");return!1},sortRank:function(a){this.collection.sortByRank(),$("a.sort.label").removeClass("activeSort"),$("a.sort.label.rank").addClass("activeSort");return!1},sortIncome:function(b){this.collection.sortByRank();var c=c=a.Country.meta;this.collection.comparator=function(a){var b=c[a.get("ISO3")];if(b&&b.oecd_value){var d=a.rank({format:!1});d=d&&d.desc?d.desc/1e3:.999;return b.oecd_value+d}return Infinity},this.collection.sort(),$("a.sort.label").removeClass("activeSort"),$("a.sort.label.income").addClass("activeSort");return!1}}),d&&!d.title&&(d.title="RankingTable");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({initialize:function(a){this.model=a.model,this.type=a.type,this.render()},render:function(){var a=this.model.get("indicators"),b=[],d=this.type=="Vulnerability"?["water","food","health","infrastruct","habitat","ecosystems"]:["economic","governance","social"],e=0,f=0;a.each(function(a){var c=a.get("name"),e={},g=a.score();_.indexOf(d,c)>-1&&!isNaN(parseFloat(g))&&(e.score=g,e.name=a.meta("name"),e.id=c,f+=parseFloat(e.score),b.push(e))}),_.each(b,function(a){a.percent=Math.round(parseFloat(a.score)/f*100),e+=a.percent});if(b.length){var g=_.sortBy(b,function(a){return a.percent}),h=g.length;while(e<99)h>=g.length&&(h=0),g[h].percent++,e++,h++;var h=-1;while(e>99)h<0&&(h=g.length-1),g[h].percent--,e--,h--}$(this.el).append(c.SectorCandyBar({data:b,klass:b.length?"":"empty",type:this.type}));return this}}),d&&!d.title&&(d.title="SectorCandyBar");return d}),Bones.initialize("view",function(a,b,c){var d;d=Backbone.View.extend({initialize:function(){this.render.apply(this,arguments)},sparklineOptions:{xaxis:{show:!1},yaxis:{show:!1},grid:{borderWidth:0},series:{lines:{lineWidth:1},shadowSize:0},colors:["#ebebeb","#666","#666"]},render:function(a){var b=a.data,c=a.rawData||[];c=_.size(c)?c:b;if(b&&b.length>1){var d=b.length-1,e=[[b[0][0],b[0][1]],[b[d][0],b[0][1]]],f={data:_(c).rest(-1),lines:{show:!1},points:{show:!0,radius:1}};if(a.options!=undefined)var g=_.extend(a.options,this.sparklineOptions);else var g=this.sparklineOptions;var h=[Infinity,-Infinity];_(b).each(function(a){a[1]<h[0]&&(h[0]=a[1]),a[1]>h[1]&&(h[1]=a[1])});var i=h[1]-h[0];if(i<.01){var j=h[1]-i,j=h[0]+i/2;g=_.extend({},g,{yaxis:_.extend({},g.yaxis,{min:j-.005,max:j+.005})})}$.plot(a.el,[e,b,f],g)}}}),d&&!d.title&&(d.title="Sparkline");return d}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div id='bonesAdminOverlay'></div>\n<div id='bonesAdminPopup'></div>\n<div id='bonesAdminGrowl'></div>\n<div id='bonesAdminToolbar'>\n    <div class='panel clearfix'></div>\n    <div class='menus clearfix'></div>\n    <div class='auth clearfix'></div>\n    <a class='toggle' href='#toggle'>Admin</a>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="Admin");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div id='cabinet' class='",klass," clearfix'>\n  <div class='top'></div>\n  <div class='slider floor'></div>\n  <div class='slider drawer'>\n    <div class='handle container'><a class='close handle' href='#close'></a></div>\n    <div class='content'></div>\n  </div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="Cabinet");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<a href='#dropdown'>\n    <span class='icon down'></span>\n    "),icon&&__p.push("<span class='icon ",icon,"'></span>"),__p.push("\n    ",title,"\n</a>\n\n<ul>\n"),_.each(links,function(a){__p.push("\n    <li><a href='",a.href,"'>",a.title,"</a></li>\n")}),__p.push("\n</ul>\n");return __p.join("")},template&&!template.title&&(template.title="AdminDropdown");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),autoclose||__p.push("\n    <a class='icon close' href='#close'>Close</a>\n"),__p.push("\n",message,"\n");return __p.join("")},template&&!template.title&&(template.title="AdminGrowl");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='header clearfix'>\n  <h2>",title,"</h2>\n  <a href='#close' class='icon close'>Close</a>\n</div>\n<div class='content'>",content,"</div>\n");return __p.join("")},template&&!template.title&&(template.title="AdminPopup");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<table>\n    <thead><tr>\n    "),header&&_.forEach(header,function(a){__p.push("\n    <th "),a.className&&__p.push("class='",a.className,"'"),__p.push(">",a.title,"</th>\n    ")}),__p.push("\n    </tr></thead>\n</table>\n");return __p.join("")},template&&!template.title&&(template.title="AdminTable");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<td>",id,"</td>\n<td class='actions'>\n    <input class='delete' type='button' value='Delete' />\n</td>\n");return __p.join("")},template&&!template.title&&(template.title="AdminTableRow");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<form action='/' method='post' class='login'>\n    <label for='username'>Username</label>\n    <input size='10' type='text' name='username' />\n    <label for='password'>Password</label>\n    <input size='10' type='password' name='password' />\n    <input type='submit' value='Login' />\n</form>\n");return __p.join("")},template&&!template.title&&(template.title="AdminFormLogin");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<form action='/' method='post'>\n"),id?__p.push("\n<div>\n    <label>Username</label>\n    <strong>",id,"</strong>\n</div>\n"):__p.push("\n<div>\n    <label for='id'>Username</label>\n    <input type='text' name='id' />\n</div>\n"),__p.push("\n<div class='inline'>\n    <label for='email'>Email</label>\n    <input type='text' name='email' value='",email,"' />\n</div>\n<div>\n    <div class='inline'>\n        <label for='password'>Password</label>\n        <input type='password' name='password' />\n    </div>\n    <div class='inline'>\n        <label for='passwordConfirm'>Confirm</label>\n        <input type='password' name='passwordConfirm' />\n    </div>\n</div>\n<div class='buttons'>\n    "),id?__p.push("<input type='submit' value='Save changes' />\n    "):__p.push("<input type='submit' value='Create user' />"),__p.push("\n</div>\n</form>\n");return __p.join("")},template&&!template.title&&(template.title="AdminFormUser");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<td><span class='icon user'></span>",id,"</td>\n<td class='actions'>\n    <input class='delete' type='button' value='Delete' />\n</td>\n\n");return __p.join("")},template&&!template.title&&(template.title="AdminTableRowUser");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<form action='/' method='post'>\n  <h3>Reset your password.</h3>\n  <p>By filling in this form, you are requesting that your password on this site be reset, and that we\n  send you an email to your configured email address containing a link allowing you to log in and change\n  you password.</p>\n<div>\n    <label for='id'>Username</label>\n    <input type='text' name='id' />\n</div>\n<div class='buttons'>\n    <input type='submit' value='Reset password' />\n</div>\n<div>\n    ",this.ReCaptcha(),"\n</div>\n</form>\n");return __p.join("")},template&&!template.title&&(template.title="ResetPassword");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<html>\n<body>\n<p>Greetings,</p>\n\n<p>To change your password follow\n<a href='http://",host,"/reset-password/",token,"'>this link to login</a>,\nor copy the link below into your browser.</p>\n\nhttp://",host,"/reset-password/",token,"\n\n<p>You are receiving this message because someone requested a new password\nfrom ",host," for an account registered with this email address.</p>\n</body>\n</html>\n");return __p.join("")},template&&!template.title&&(template.title="ResetPasswordEmail");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("Greetings,\n\nTo change your password click the link below, or copy the link into your browser.\n\nhttp://",host,"/reset-password/",token,"\n\nYou are receiving this message because someone requested a new password\nfrom ",host," for an account registered with this email address.\n");return __p.join("")},template&&!template.title&&(template.title="ResetPasswordEmailAlt");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='content container'>\n  <h3>About</h3>\n  <div id='about-nav-container'>\n    <ul id='about-nav'>\n      <li><a class='nav-overview button exact' href='/about'> Overview </a></li>\n      <li><a class='nav-methodology button' href='/about/methodology'> Methodology </a></li>\n      <li><a class='nav-matrix button' href='/about/matrix'> Readiness Matrix </a></li>\n      <li><a class='nav-consultation button' href='/about/consultation'> Consultation </a></li>\n      <li><a class='nav-download button' href='/about/download'> Download Data</a></li>\n      <li><a class='nav-reference button' href='/about/reference'> Reference </a></li>\n    </ul>\n  </div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="AboutFloor");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<p>The GAIN Index&#8482; for ",country," could not be generated because of missing indicators for ",missing.join(" and "),". "),_(ranks).each(function(a,b){__p.push(" ",country," is the ",a," ",rankVerb[b]," country. ")}),__p.push("</p>\n");return __p.join("")},template&&!template.title&&(template.title="AboutQuadrant");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<p>The low vulnerability score and low readiness score of ",country," places it in the lower-left quadrant of the <a href='/about/matrix'>Readiness Matrix</a>. Relative to other countries, its current vulnerabilities are manageable but improvements in readiness will help it better adapt to future challenges. ",country," is the ",ranks.vulnerability," vulnerable country and the ",ranks.readiness," ready country.</p>\n");return __p.join("")},template&&!template.title&&(template.title="AboutQuadrantBottomLeft");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<p>The low vulnerability score and high readiness score of ",country," places it in the lower-right quadrant of the <a href='/about/matrix'>Readiness Matrix</a>. Adaptation challenges still exist, but ",country," is well positioned to adapt. ",country," is the ",ranks.vulnerability," vulnerable country and the ",ranks.readiness," ready country. </p>\n");return __p.join("")},template&&!template.title&&(template.title="AboutQuadrantBottomRight");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<p>\n",country," is the \n",ranks.readiness?ranks.readiness+" "+rankVerb.readiness+" country":"","\n",ranks.readiness&&ranks.vulnerability?" and the ":"","\n",ranks.vulnerability?ranks.vulnerability+" "+rankVerb.vulnerability+" country":"",".\n"),ranks.gain?__p.push(" "):__p.push("\nThe GAIN Index for ",country," could not be generated because of missing indicators for ",missing.join(" and "),".\n"),__p.push("\n</p>\n");return __p.join("")},template&&!template.title&&(template.title="AboutQuadrantShort");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<p>The high vulnerability score and low readiness score of ",country," places it in the upper-left quadrant of the <a href='/about/matrix'>Readiness Matrix</a>. It has both a great need for investment and innovations to improve readiness and a great urgency for action. ",country," is the ",ranks.vulnerability," vulnerable country and the ",ranks.readiness," ready country.</p>\n");return __p.join("")},template&&!template.title&&(template.title="AboutQuadrantTopLeft");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<p>The high vulnerability score and high readiness score of ",country," places it in the upper-right quadrant of the <a href='/about/matrix'>Readiness Matrix</a>. It is on the road to responding effectively to climate change, but the adaptation needs and urgency to act are greater. ",country," is the ",ranks.vulnerability," vulnerable country and the ",ranks.readiness," ready country. </p>\n");return __p.join("")},template&&!template.title&&(template.title="AboutQuadrantTopRight");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='attribute admin-actions-panel'>\n  <a href='#' class='button save large'>Save</a>\n  <a href='#' class='button cancel large'>Cancel</a>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="AdminActionsPanel");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<strong><label>Featured: ",countries,"</label></strong>\n<input type='button' value='Edit' class='viewing edit'>\n");return __p.join("")},template&&!template.title&&(template.title="AdminFrontFeature");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<form>\n<div class='attribute featuredFirst'>\n    <label for='featuredFirst'>First featured country</label>\n    <select name=\"featuredFirst\">\n        "),_.each(countries,function(a,b){__p.push("\n            "),b==featuredFirst?__p.push('\n                <option value="',b,'" selected="selected">',a.name,"</option>\n            "):__p.push('\n                <option value="',b,'">',a.name,"</option>\n            "),__p.push("\n        ")}),__p.push("\n    </select>\n    <div class='description'>Choose the first country to feature on the front page.</div>\n</div>\n<div class='attribute featuredSecond'>\n    <label for='featuredSecond'>Second featured country</label>\n    <select name=\"featuredSecond\">\n        "),_.each(countries,function(a,b){__p.push("\n            "),b==featuredSecond?__p.push('\n                <option value="',b,'" selected="selected">',a.name,"</option>\n            "):__p.push('\n                <option value="',b,'">',a.name,"</option>\n            "),__p.push("\n        ")}),__p.push("\n    </select>\n    <div class='description'>Choose the second country to feature on the front page.</div>\n</div>\n<input type=\"hidden\" name=\"id\" value=\"front\" />\n<div class='buttons'>\n    <input type='submit' value='Save' />\n</div>\n</form>\n");return __p.join("")},template&&!template.title&&(template.title="AdminPopupFrontFeature");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<!DOCTYPE html>\n<html>\n<head>\n  <meta charset='utf-8' />\n  <title>",title,"</title>\n\n  <meta name=\"description\" content=\"The GAIN Index, a project of the Global Adaption Institute (GAIN), summarizes a country's Vulnerability to climate change and other global challenges on the one hand and its Readiness to improve resilience on the other hand.\">\n  <meta name=\"keywords\" content=\"Adaptation, GAIN, climate change, population, economy, growth, Vulnerability, Readiness, data, Index, Global, OpenData, transparency, nodejs\">\n\n  <link rel='shortcut icon' href='/assets/gain/images/favicon.ico' type='image/x-icon' />\n  <script src='/assets/bones/wax.js?",version,"'></script>\n  <script src='/assets/bones/all.js?",version,"'></script>\n  <!--[if lte IE 8]><script src='/assets/gain/scripts/excanvas.min.js'></script><![endif]-->\n  <script src='/assets/gain/scripts/flot/jquery.flot.js?",version,"'></script>\n  <script src='/assets/gain/scripts/jquery-ui-1.8.16.custom.min.js?",version,"'></script>\n  <script src='/assets/gain/scripts/jquery.cycle.min.js?",version,"'></script>\n\n  <link rel='stylesheet' href='/assets/gain/stylesheets/reset.css?",version,"' media='all' />\n  <link rel='stylesheet' href='/assets/gain/stylesheets/style.css?",version,"' media='screen' />\n  <link rel='stylesheet' href='/assets/bones-admin/style.css?",version,"' media='screen' />\n  <link rel='stylesheet' href='/assets/gain/stylesheets/print.css?",version,"' media='print' />\n  <script type=\"text/javascript\">\n\n    var _gaq = _gaq || [];\n    _gaq.push(['_setAccount', 'UA-23256792-2']);\n    _gaq.push(['_trackPageview']);\n\n    (function() {\n      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n    })();\n\n  </script>\n</head>\n<body>\n  <div id='header'><div class='limiter'>\n    <h1><a class='logo' href='/'>GAIN Index</a></h1>\n    <ul class='navigation'>\n      <li><a class='map exact' href='/'><span class='icon map'></span>Map</a></li>\n      <li><a class='rank' href='/ranking'><span class='icon rank'></span>Rankings</a></li>\n      <li><a class='matrix' href='/matrix'><span class='icon matrix'></span>Matrix</a></li>\n      <li><a class='about' href='/about'><span class='icon about'></span>About</a></li>\n    </ul>\n    <small><a href='http://gain.org'>Global Adaptation Institute</a></small>\n  </div></div>\n  <div id='page' class='limiter clearfix'>\n    <div id='main'>",main,"</div>\n  </div>\n  <div id='footer1'>\n    <div class='limiter clearfix'>\n      <div class='download'>\n        <a href='http://creativecommons.org/licenses/by/3.0' class='cc'>Download Data under a creative commons licence</a>\n        <a class='downloadbutton button' href='/about/download'><span>Download the GAIN Index</span> scores and indicators between ",startYear," and ",endYear," in CSV format.</a>\n      </div>\n      <div id='country-search' class='search content'>\n        <form>\n          <input class='textfield' name='search' title='Search for a country'/>\n          <input class='button' name='submit' type='submit' value='Go' />\n        </form>\n      </div>\n    </div>\n  </div>\n  <div id='footer2'>\n  \t<div class='limiter clearfix'>\n      <div id='address'><a href='http://gain.org'>Global Adaptation Institute</a> <br>1747 Pennsylvania Ave NW, Suite 1125 - Washington, DC 20006</div>\n  \t  <div class='org'><a href='http://gain.org'>Global Adaptation Institute</a></div>\n      <div id='feedbacktab'>\n        <div class='tab button green'>Feedback</div>\n        <div class='content'>\n          <p>List known bugs available <a href=\"http://github.com/globalai/GaIn-Index/issues\">here</a>. Please report any inconsistencies, errors or leave a comments:</p>\n          <a href='mailto:index@gain.org' class='feedback-email button green'>Send us feedback</a>\n          <p>Interested in providing a more in depth review? <a href='/about/consultation'>Participate in our Consultation process</a></p>\n        </div>\n      </div>\n  \t</div>\n  </div>\n  <script>",config,"</script>\n  <script>",startup,"</script>\n</body>\n</html>\n");return __p.join("")},template&&!template.title&&(template.title="App");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<strong><label>",render(id),"</label></strong>\n<input type='button' value='Edit' class='viewing edit'>\n<input type='button' value='Save' class='editing save'>\n<input type='button' value='Cancel' class='editing cancel'>\n");return __p.join("")},template&&!template.title&&(template.title="AdminDocument");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='content'>\n  <div class='description container'>\n    <h3>",title,"</h3>\n    <p>",content,"</p>\n  </div>\n  <div class='correction-control container'>\n  <a class='button methodology' href='",correction.methodologyLink,"'>Methodology</a>\n  <p>",correction.caption,"</p>\n  <a class='correct button green' href='",correction.href,"'>",correction.title,"</a>\n  </div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="CorrectionFloor");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='country-profile'>\n  <h2 class='container'>",title,"</h2>\n  <div class='info container'>\n    <div class='background-info left clearfix'>",gdp.label," (",gdp.year,"): ",gdp.value,"</div>\n    <div class='background-info right clearfix'>",population.label," (",population.year,"): ",population.value,"</div>\n  </div>\n  <div class='country-summary clearfix'></div>\n  <div class='prose container'></div>\n  <div class='rankings'>\n    <div class='inner'>\n      "),_(rank).size()&&(__p.push("\n        <h3>GAIN Ranking since 1995</h3>\n        <div class='ranking-history-wrapper'>\n          <table class='data ranking-history'>\n            <thead>\n              <tr class='years'>\n                <th class='label'>Year</th>\n                "),_.each(rank,function(a){__p.push("  <th>",a.year,"</th>  ")}),__p.push("\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <th class='label'>Ranking</th>\n                "),_.each(rank,function(a){__p.push("  <td>",a.rank,"</td>  ")}),__p.push("\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      ")),__p.push("\n    </div>\n  </div>\n  <div class='details'>\n    <div class='tab-wrapper clearfix'>\n      <ul class='tabs level-1'>\n        <li><a href='#vulnerability' id='vulnerability'>Vulnerability</a></li>\n        <li><a href='#readiness' id='readiness'>Readiness</a></li>\n      </ul>\n      <div class='tab-wrapper clearfix'>\n        <ul class='tabs level-2 vulnerability'>\n          <li><a href='#vulnerability/sector' class='sectors'>Sector</a></li>\n          <li><a href='#vulnerability/component' class='components'>Component</a></li>\n        </ul>\n        <div class='bottomscorelabel label'>Denotes worst scores</div>\n      </div>\n    </div>\n    <div id='tab' class='tab-content'>\n      <table id='vulnerability' class='data full'></table>\n      <table id='readiness' class='data full hidden'></table>\n    </div>\n  </div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="Country");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='country-info container clearfix'>\n  <a class='button green' href='/country/",countryPath,"'>View profile</a>\n  <h3>",countryName,"</h3>\n  <div class='country-summary'></div>\n</div>\n<div class='composition container'>\n  <div class='composition-bars'></div>\n</div>\n<div class='indicator-time container clearfix'>\n  <h4>",indicatorName," score over time </h4>\n  <div class='graph'></div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="CountryDetailDrawer");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='indicator-info container'>\n  <a class='button methodology' href='",methodologyLink,"'>Methodology</a>\n  <h3>",title,"</h3>\n  <div class='description'>\n    <p>",description,"</p>\n  </div>\n</div>\n<div class='indicator-time container'>\n  <div class='chart clearfix'>\n    <h4>",chartTitle," over time </h4>\n    <div class='graph'></div>\n    <div class='legend'></div>\n    <h5 class='lastReported clearfix'></h5>\n  </div>\n</div>\n"),source.length&&(__p.push("\n<div class='source container'>\n  <h4>Source</h4>\n  <ul>\n  "),_.each(source,function(a){__p.push("\n      <li><a href='",a.link,"'>",a.name,"</a></li>\n  ")}),__p.push("\n  </ul>\n</div>\n")),__p.push("\n<div class='similar-countries ",indicator,"'></div>\n");return __p.join("")},template&&!template.title&&(template.title="CountryDrawer");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<span class='country country-",iso,"'><a title=\"More information\" href='#more' class='more'>",name,"</a><a href='#remove' class='remove'>Remove</a></span>\n");return __p.join("")},template&&!template.title&&(template.title="CountryOption");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div id='indicator-gain' class='gain'>\n    <span class='name'>",data.gain.name,"</span>\n    "),data.gain.value&&__p.push("\n      <span class='value'>",data.gain.value,"</span>\n      <div class='score'>Score: <span class='score'>",data.gain.score,"</span></div>\n      <div class='trend'>Trend:\n         <div class='icon-trend icon-trend-",data.gain.trend,"'>",data.gain.trend,"</div>\n      </div>\n    "),__p.push("\n</div>\n<div class='chart'>\n  <div class='mini-matrix'>\n    <div class='quad tl",active=="tl"?" active":"","'></div>\n    <div class='quad tr",active=="tr"?" active":"","'></div>\n    <div class='quad br",active=="br"?" active":"","'></div>\n    <div class='quad bl",active=="bl"?" active":"","'></div>\n    "),pin&&__p.push("\n    <div class='pin' style='top: ",pin.y,"px; left: ",pin.x,"px;'></div>\n    "),__p.push("\n  </div>\n"),_.each(["vulnerability","readiness"],function(a){__p.push("\n  <div id='indicator-",a,"' class='indicator'>\n    <span class='name'>",data[a].name,"</span>\n    <span class='value'>",data[a].value,"</span>\n  </div>\n")}),__p.push("\n</div>\n"),map&&__p.push("<div class='map-wrapper'></div>"),__p.push("\n");return __p.join("")},template&&!template.title&&(template.title="CountrySummary");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<thead><tr>\n    <th class='name label'>Indicator</th>\n    <th class='composition label'>Composition</th>\n    <th class='graph label'>",startYear," to ",endYear,"</th>\n    <th class='raw label'>Raw</th>\n    <th class='score label'>Score</th>\n</tr></thead>\n<tbody>\n"),_.each(data,function(a){__p.push("\n  "),worst.hasOwnProperty(a.field.id)?__p.push("\n    <tr id='indicator-",a.field.id,"' class='",a.klass," worst indicator'>\n  "):__p.push("\n    <tr id='indicator-",a.field.id,"' class='",a.klass," indicator'>\n  "),__p.push("\n    <td class='name'>",a.field.name,"</td>\n    <td class='composition'>\n      "),a.graph&&(__p.push("\n        <div class='country-sector-graph'>\n          "),_.each(a.graph,function(b){__p.push("\n            "),a.field.id==b.id?__p.push("\n              <span class='sector-graph-",b.id," hilite'\n            "):__p.push("\n              <span class='sector-graph-",b.id,"'\n            "),__p.push("\n            style='width:",b.percent,"%;'>\n            </span>\n          ")}),__p.push("\n        </div>\n      ")),__p.push("\n    </td>\n    <td class='graph'><div class='placeholder'></div></td>\n    <td class='input'>",a.input,"</td>\n    <td class='score'>",a.score,"</td>\n  </tr>\n")}),__p.push("\n</tbody>\n");return __p.join("")},template&&!template.title&&(template.title="CountryTable");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='content'>\n  <div class='container'>\n    <a class='button default methodology' href='",methodologyLink,"'>Methodology</a>\n    <h3>",title,"</h3>\n    <p>",content,"</p>\n  </div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="DefaultFloor");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<a href='/assets/gain/files/",model.escape("filename"),"' class='container button green'>\nDOWNLOAD (.zip, ",model.getFileSize(),")\n<span class='timestamp'>Last updated on ",model.getDate(),"</span>\n</a>\n");return __p.join("")},template&&!template.title&&(template.title="Download");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='error-page limiter'>\n    <h2>",status,"</h2>\n    <div class='message'>",message,"</div>\n    <a href='/' class='button'>Return to homepage</a>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="Error");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='country clearfix' id='",iso,"'>\n  <div class='info'>\n    <div class='inner'>\n      <h3><a href='/country/",path,"'>",name,"</a></h3>\n      <div class='prose'></div>\n    </div>\n  </div>\n  <div class='country-summary clearfix'></div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="FeaturedFront");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='front'>\n  <div id='map'>\n    <div class='legend matrix '>\n      <div class=\"mini-matrix\">\n        <div class=\"quad tl active\"></div>\n        <div class=\"quad tr active\"></div>\n        <div class=\"quad br active\"></div>\n        <div class=\"quad bl active\"></div>\n      </div>\n    </div>\n    <div class='legend active readiness vulnerability gain gain_delta readiness_delta vulnerability_delta'>\n      <div class='label'>Worse</div>\n      <div class='scale'>\n        <div class='swatch scale-1'></div>\n        <div class='swatch scale-2'></div>\n        <div class='swatch scale-3'></div>\n        <div class='swatch scale-4'></div>\n        <div class='swatch scale-5'></div>\n        <div class='swatch scale-6'></div>\n        <div class='swatch scale-7'></div>\n        <div class='swatch scale-8'></div>\n      </div>\n      <div class='label'>Better</div>\n    </div>\n  </div>\n  <div id='carousel'>\n    <div class='item container'>\n      <div class='overview active slide1'>\n        <h2>Discover Improvement Opportunities</h2>\n        <p>Assess where the greatest needs and opportunities for improving resilience to climate change exist. <a href='/ranking'>Explore GAIN Index rankings.</a></p>\n      </div>\n    </div>\n    <div class='item container'>\n      <div class='overview slide2'>\n        <h2>Measuring What Matters</h2>\n        <p>We continuously monitor and analyze 50 indicators for 192 countries to assess climate change related vulnerabilities and readiness for improvement.</p>\n      </div>\n    </div>\n    <div class='item container'>\n      <div class='overview slide3'>\n        <h2>Rigorous and Evolving</h2>\n        <p>The GAIN Index has been designed by industry experts and is improved under a continuous open review process. <a href='/about/methodology'>See our methodology.</a></p>\n      </div>\n    </div>\n    <div class='item container'>\n      <div class='overview slide4'>\n        <h2>It's Open: Analyze and Republish</h2>\n        <p>Download, analyze and republish GAIN Index data under and open Creative Commons license. <a href=\"/about/download\">Get started now.</a></p>\n      </div>\n    </div>\n  </div>\n  <a class='front button green' href='/ranking'> View Full Rankings </a>\n  <h3 class='container'> GAIN Index Country Rankings</h3>\n  <div class='ranking clearfix'>\n  </div>\n  <h3 class='container'>Featured Countries</h3>\n  <div class='featured container'>\n    <div class='countries'></div>\n  </div>\n  <div class='mission'>\n    <div class='inner'>\n      <h3>About the Global Adaptation Institute</h3>\n      <p class='prose'>The Global Adaptation Institute, GAIN, is a non-profit organization guided by a vision of building resilience to climate change and other global forces as a key component to sustainable development. Our mission is to enhance the world's understanding of the urgency for adaptation to climate change and other global forces through private and public investments for vulnerable communities.</p>\n    </div>\n  </div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="Front");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<a class='button methodology' href='/about/methodology#gain'>Methodology</a>\n\nThe GAIN Index, a project of the <a href=\"http://www.gain.org\" > Global Adaption Institute (GAIN)</a>, summarizes a country's vulnerability to climate change and other global challenges in combination with its readiness to improve resilience. It aims to help businesses and the public sector better prioritize investments for a more efficient response to the immediate global challenges ahead.\n");return __p.join("")},template&&!template.title&&(template.title="GaInFloorText");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<ul id='map-years' class='map-selector'>\n  "),_.each(years,function(a){__p.push("\n      <li><a href='#",a.year,"' class='button ",a.klass,"'>",a.year,"</a></li>\n  ")}),__p.push("\n</ul>\n<ul id='map-indicators' class='map-selector'>\n  "),_.each(indicators,function(a){__p.push("\n      <li><a href='#",a.id,"' class='button ",a.klass,"'>",a.name,"</a></li>\n  ")}),__p.push("\n</ul>\n\n<a href='#fullscreen' id='map-fullscreen' class='map-selector wax-fullscreen'>fullscreen</a>\n");return __p.join("")},template&&!template.title&&(template.title="MapInterface");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("<div class='big-matrix'>\n  <img src='/assets/gain/images/matrix-underlay.png' alt='' />\n  <div class='tooltip'></div>\n  <div class='graph'></div>\n  <div class='year-controls'>\n    <a href='#play' class='play-button'>Play</a>\n    <ul class='year-selector'>\n      ");for(var y=1995;y<=2011;y++)__p.push("\n        <li><a href='#",y,"' class='year-",y,"'>",y,"</a></li>\n      ");__p.push("\n    </ul>\n  </div>\n</div>\n<div class='country-selector' >\n  <div class='inner'>\n    <form>\n      <input name='search' type='textfield' class='textfield' title='Add country to highlight' />\n      <input name='add' type='button' class='button' value='Add' />\n    </form>\n    <div class='active-countries'></div>\n  </div>\n</div>\n<div class='gapminder'>\n  <a href='http://bsan.eu/GaIn_GapMinder'>Compare more variables with Google</a>\n<div>\n")}return __p.join("")},template&&!template.title&&(template.title="Matrix");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<p>The Readiness Matrix illustrates the comparative resilience of countries. The vertical axis measures the relative vulnerability of countries. The horizontal axis measures to what degree a country is ready to deal with climatic and environmental changes.</p>\n\n<div class='interactive clearfix'>\n  <div class='mini-matrix'>\n    <div class='quad tl'>\n      <div class='matrix-overlay quad-tl'>\n      Countries with a high Vulnerability score but a low level of Readiness have both a great need for investments and innovations to improve Readiness and a great urgency for action.\n      </div>\n    </div>\n    <div class='quad tr'>\n      <div class='matrix-overlay quad-tr'>\n      Countries with a high Vulnerability score and a high Readiness score are on the road to responding effectively, but the remaining needs are greater. The private sector is more likely to participate here in an effort to improve the ability to adapt.\n      </div>\n    </div>\n    <div class='quad bl'>\n      <div class='matrix-overlay quad-bl'>\n      Countries with low Vulnerability and low Readiness scores have few immediate challenges and more time to improve. There are likely enticing opportunities for public and private sectors to intervene.\n      </div>\n    </div>\n    <div class='quad br'>\n      <div class='matrix-overlay quad-br'>\n        Adaptation challenges still exist, but these countries are well positioned to adapt.\n      </div>\n    </div>\n  </div>\n  <ul class='mini-matrix-links'>\n    <li><a class='tl' href='#'>Upper Left Quadrant</a></li>\n    <li><a class='tr' href='#'>Upper Right Quadrant</a></li>\n    <li><a class='bl' href='#'>Lower Left Quadrant</a></li>\n    <li><a class='br' href='#'>Lower Right Quadrant</a></li>\n  </ul>\n</div>\n<div class='browser'>\n  This interactive matrix works best in a <a href='http://www.google.com/chrome'>modern web browser</a>.\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="MatrixFloorText");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<span class='country country-",iso,"'>",name,"</span>\n");return __p.join("")},template&&!template.title&&(template.title="MatrixPoint");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class ='document page container'>\n  <div class='attribute name'>\n    <h2>\n    <span class='editable ",render("id")," editable-name'>",render("name"),"</span>\n    </h2>\n  </div>\n  <div class='attribute body'>\n    <div class='editable ",render("id")," editable-body'>",render("body"),"</div>\n  </div>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="Page");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='ranking'>\n  <h2 class='container'>Country Rankings</h2>\n  <p class='container'>Rank countries by GAIN Index, Vulnerability and Readiness.</p>\n  <p class='label container'>Table values show latest scores for ",current,"</p>\n  <div class='tab-wrapper clearfix'>\n    <ul class='tabs level-1 clearfix'>\n      "),delta?__p.push("\n          <li><a href='/ranking/delta/gain'>GAIN Index</a></li>\n          <li><a href='/ranking/delta/vulnerability'>Vulnerability</a></li>\n          <li><a href='/ranking/delta/readiness'>Readiness</a></li>\n      "):__p.push("\n        <li><a href='/ranking' class='exact'>GAIN Index</a></li>\n        <li><a href='/ranking/vulnerability'>Vulnerability</a></li>\n        <li><a href='/ranking/readiness'>Readiness</a></li>\n      "),__p.push("\n    </ul>\n    <div class='tab-wrapper clearfix'>\n    "),active.path&&__p.push("\n      <ul class='tabs level-2 clearfix'>\n        <li><a href='",active.path,"' class='exact'>",active.name,"</a></li>\n      </ul>\n    "),__p.push("\n      <ul class='tabs level-2 clearfix'>\n      "),_.each(sectors,function(a){__p.push("\n        <li><a href='",a.path,"'>",a.name,"</a></li>\n      ")}),__p.push("\n      </ul>\n      <ul class='tabs level-2 clearfix last'>\n      "),_.each(components,function(a){__p.push("\n        <li><a href='",a.path,"'>",a.name,"</a></li>\n      ")}),__p.push("\n      </ul>\n    </div>\n  </div>\n  <table class='data full'></table>\n</div>\n");return __p.join("")},template&&!template.title&&(template.title="Ranking");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<thead><tr>\n  <th class='rank'><a class='sort label rank activeSort' href='#sort-rank'>Rank</a></th>\n  <th class='alpha'><a class='sort label alpha' href='#sort-alpha'>Country</a></th>\n  <th class='income'><a class='sort label income' href='#sort-income'>Income group</a></th>\n  <th class='trend'>"),showTrend&&__p.push("Trend"),__p.push("</th>\n  <th class='index'>Score</th>\n</tr></thead>\n<tbody>\n  "),_.each(rows,function(a,b){__p.push("\n    <tr id='country-",a.iso3,"'>\n      <td>",a.rank,'</td>\n      <td><a href="/country/',a.path,'">',a.name,"</a></td>\n      <td><div class='income-group ",a.incomeClass,"'>",a.income,"</div></td>\n      <td>"),showTrend&&__p.push("<div class='icon-trend icon-trend-",a.trend,"'>"),__p.push("</div></td>\n      <td>",a.score,"</td>\n    </tr>\n  ")}),__p.push("\n</tbody>\n");return __p.join("")},template&&!template.title&&(template.title="RankingTable");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<table class='data ranktop'>\n  <thead>\n    <tr>\n      <th class='country'> Top 5 Countries </th>\n      <th class='score'> Score </th>\n    </tr>\n  </thead>\n  <tbody>\n    "),_.each(top,function(a,b){__p.push("\n    <tr>\n      <td class='country'> <div class='rank-number'>",b+1,"</div> <div class='nowrap'> <a href='/country/",a.path,"'> ",a.name," </a></div></td>\n      <td class='score'> ",a.value," </td>\n    </tr>\n    ")}),__p.push("\n    </tbody>\n  </table>\n  <table class='data rankbottom'>\n    <thead>\n      <tr>\n        <th class='country'> Bottom 5 Countries </th>\n        <th class='score'> Score </th>\n      </tr>\n    </thead>\n    <tbody>\n      "),_.each(bottom,function(a,b){__p.push("\n      <tr>\n        <td class='country'> <div class='rank-number'>",length-(4-b),"</div> <div class='nowrap'> <a href='/country/",a.path,"'> ",a.name," </a></div></td>\n        <td class='score'> ",a.value," </td>\n      </tr>\n      ")}),__p.push("\n  </tbody>\n</table>\n");return __p.join("")},template&&!template.title&&(template.title="RankingTopBottom");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<div class='label'>",type," composition</div>\n<div class='country-sector-graph clearfix ",klass,"'>\n  "),_.each(data,function(a,b){__p.push("\n    <span class='sector-graph-",a.id," hilite bar' style='width:",a.percent,"%;'>\n      <label>",a.name,": ",a.percent,"% of ",type,"</label>\n    </span>\n      ")}),__p.push("\n</div>");return __p.join("")},template&&!template.title&&(template.title="SectorCandyBar");return template}),Bones.initialize("template",function(templates){var template;template=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<table class='similar'>\n  <tr class='header'>\n    <th class='country container'>Similar Countries</th>\n    <th class='indicator container'><div class='nowrap'>",title,"</div></th>\n  </tr>\n"),similar?(__p.push("\n  "),_.each(similar,function(a){__p.push("\n    <tr>\n      <td class='country container'><div class='nowrap'><a href='/country/",a.path,"'>",a.name,"</a></div></td>\n      <td class='indicator container'>",a.value,"</td>\n    </tr>\n  ")}),__p.push("\n")):__p.push("\n  <tr>\n    <td class='container empty' colspan='2'>\n    No Data\n    </td>\n  </tr>\n"),__p.push("\n</table>\n");return __p.join("")},template&&!template.title&&(template.title="SimilarCountries");return template})